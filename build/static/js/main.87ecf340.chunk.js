(this["webpackJsonppasswords-frontend"]=this["webpackJsonppasswords-frontend"]||[]).push([[0],{58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t),n.d(t,"router",(function(){return Ae}));var c=n(1),r=n.n(c),a=n(25),s=n.n(a),i=n(6),u=n(14),o=n(28),l=n(29),j=n(3),d=n(4),f=n.n(d),b=n(7),O=n(10),h=n(5),v=Object(h.c)(),x=Object(h.c)(),p=n(26),m=n.n(p),g=function(e){var t=Object(j.a)({method:"get",withCredentials:!0},e);return t.url="".concat("https://passwords-api.star-tech.dev").concat(e.url),"get"===t.method&&Object.prototype.hasOwnProperty.call(t,"data")&&(t.params=e.data,delete t.data),m()(t).then((function(e){return e.data})).catch((function(e){throw 423===e.response.status&&k(!0),e}))},C=x.createEffect().use((function(){return g({method:"post",url:"/lock"})})),w=x.createEffect().use((function(e){return g({method:"post",url:"/unlock",data:{securityCode:e}})})),y=x.createEvent(),k=x.createEvent(),N=Object(h.c)(),S=N.createEvent("open modal"),L=N.createEvent("close modal"),E=N.createEvent("close last modal"),R=N.createEvent("close all modals"),M=v.effect().use((function(e){return g({method:"post",data:{username:e.username,password:e.password},url:"/register"})})),I=v.effect().use((function(e){return g({method:"post",data:{username:e.username,password:e.password},url:"/login"})})),Z=v.effect().use((function(){return g({url:"/logout"})})),_=v.effect().use((function(){return g({url:"/auth"}).catch((function(){return{user:null}}))})),P=v.event(),D=v.effect().use((function(e){return g({method:"post",url:"/security-code",data:{securityCode:e}})})),z=v.store({user:null}).on(M.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n})})).on(I.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n.user}),y(),e})).on(Z.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{user:null})})).on(_.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n.user}),k(n.isAppLocked),e})).on(P,(function(e){return e.user&&!e.user.hasSecurityCode&&S("set_security_code"),e})).on(D,(function(e){return L("set_security_code"),e})),B=[{name:"home",path:"/",private:!0},{name:"auth",path:"/auth",forGuests:!0},{name:"unlock",path:"/unlock",private:!0},{name:"item",path:"/item/:id",private:!0},{name:"profile",path:"/profile",private:!0},{name:"add",path:"/add",private:!0},{name:"404",path:"/404"}];function W(){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z.getState().user){e.next=4;break}return e.next=4,_();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){return function(e,t){var n=Object(O.a)(e,t).toActivate.map((function(e){return B.find((function(t){return t.name===e})).onActivate})).filter(Boolean);return Promise.all(n.map((function(e){return e()}))).then(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var n=t.reduce((function(e,t){return Object.assign(e,t)}),{});return Object(j.a)(Object(j.a)({},e),{},{data:n})}))}};var q=function(e){var t=B.find((function(t){return t.name===e})),n=!!t&&!!t.forGuests,c=!!t&&!!t.private;return n?!z.getState().user:!c||!!z.getState().user},G=function(e){return function(t,n,c){if(!q(t.name))return e.navigate("auth");c()}},H=Object(h.e)({isLocked:!1,lastPath:null}).on(C.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{isLocked:!0})})).on(w.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{isLocked:!1})})).on(y,(function(e){var t=Ae.getState();return!!z.getState().user&&t&&(e.isLocked&&"unlock"!==t.name&&Ae.navigate("unlock"),e.isLocked||"unlock"!==t.name||Ae.navigate("home")),e})).on(k,(function(e,t){return y(),Object(j.a)(Object(j.a)({},e),{},{isLocked:t})})),Q=function(e){return function(t,n,c){if(H.getState().isLocked&&"unlock"!==t.name)return e.navigate("unlock");c()}};function U(){var e=Object(u.b)(B,{});return e.usePlugin(o.a),e.usePlugin(Object(l.a)()),e.useMiddleware(T,G,Q),e}var J=Object(h.c)().event(),X=n(11),F=n(2),Y=(n(58),n(0));var K=function(){return Object(Y.jsx)("div",{className:"component -loader-round",children:Object(Y.jsx)("svg",{className:"svg",width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-629.000000, -385.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsx)("path",{d:"M631.20799,398.4917 C631.37363,398.8603 631.2091,399.2933 630.8405,399.459 C630.4719,399.6246 630.03881,399.4601 629.873162,399.0915 C629.300253,397.8166 629,396.4285 629,395 C629,389.47726 633.47726,385 639,385 C644.5227,385 649,389.47726 649,395 C649,400.5227 644.5227,405 639,405 C636.65339,405 634.42972,404.1881 632.65267,402.7281 C632.34042,402.4715 632.29526,402.0105 632.55179,401.6982 C632.80833,401.386 633.26941,401.3408 633.58166,401.5973 C635.09934,402.8442 636.9955,403.5366 639,403.5366 C643.7145,403.5366 647.5366,399.7145 647.5366,395 C647.5366,390.28549 643.7145,386.46341 639,386.46341 C634.28549,386.46341 630.46341,390.28549 630.46341,395 C630.46341,396.2208 630.71947,397.4046 631.20799,398.4917 Z",id:"Path"})})})})})},V=(n(60),Object(c.forwardRef)((function(e,t){t||(t=Object(c.useRef)());var n=Object(c.useState)({}),r=Object(F.a)(n,2),a=r[0],s=r[1],i="button -component -theme-".concat(e.theme||"default"," -size-").concat(e.size||"default"," ").concat(e.fullWidth?"-full-width":""," ").concat(e.loading?"-loading":""),u=Object(c.useRef)(null);return Object(c.useEffect)((function(){!function(){t.current={};var n=Object(j.a)({},e);delete n.fullWidth,delete n.loading,delete n.size,delete n.theme,s(n)}()}),[e]),Object(Y.jsx)("div",{className:i,children:Object(Y.jsx)("button",Object(j.a)(Object(j.a)({},a),{},{ref:u,children:e.loading?Object(Y.jsx)("div",{className:"loader",children:Object(Y.jsx)(K,{})}):e.children}))})})));V.displayName="Button";var $=V;n(61);var ee=function(){return Object(Y.jsx)("svg",{className:"icon -lock",width:"12px",height:"16px",viewBox:"0 0 12 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-858.000000, -67.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsxs)("g",{transform:"translate(858.000000, 67.000000)",children:[Object(Y.jsx)("path",{d:"M9.6969697,6.67253333 L9.6969697,4.12116364 C9.6969697,1.84877576 7.84819394,0 5.57575758,0 C3.30332121,0 1.45459394,1.84877576 1.45459394,4.12116364 L1.45459394,6.67243636 C0.551418182,7.66370909 0,8.9808 0,10.4242424 C0,13.4987152 2.50128485,16 5.57575758,16 C8.6502303,16 11.1515152,13.4987152 11.1515152,10.4242424 C11.1515152,8.9808 10.600097,7.66370909 9.6969697,6.67253333 Z M5.57575758,1.45454545 C7.04615758,1.45454545 8.24242424,2.65081212 8.24242424,4.12116364 L8.24242424,5.5286303 C7.44979394,5.09517576 6.54109091,4.84848485 5.57575758,4.84848485 C4.61047273,4.84848485 3.7017697,5.09517576 2.90913939,5.5286303 L2.90913939,4.12116364 C2.90913939,2.65081212 4.10535758,1.45454545 5.57575758,1.45454545 Z M5.57575758,14.5454545 C3.30332121,14.5454545 1.45454545,12.6966788 1.45454545,10.4242424 C1.45454545,8.15180606 3.30332121,6.3030303 5.57575758,6.3030303 C7.84819394,6.3030303 9.6969697,8.15180606 9.6969697,10.4242424 C9.6969697,12.6966788 7.84819394,14.5454545 5.57575758,14.5454545 Z",id:"XMLID_811_"}),Object(Y.jsx)("path",{d:"M5.57575758,8.48484848 C4.90739394,8.48484848 4.36363636,9.02860606 4.36363636,9.6969697 C4.36363636,10.092703 4.55427879,10.4446545 4.84848485,10.6659879 L4.84848485,11.6363636 C4.84848485,12.0380121 5.17410909,12.3636364 5.57575758,12.3636364 C5.97740606,12.3636364 6.3030303,12.0380121 6.3030303,11.6363636 L6.3030303,10.6659879 C6.59723636,10.4446545 6.78787879,10.0926545 6.78787879,9.6969697 C6.78787879,9.02860606 6.24412121,8.48484848 5.57575758,8.48484848 Z",id:"XMLID_815_"})]})})})})};var te=function(){return Object(Y.jsx)("svg",{className:"icon -add",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-1000.000000, -56.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsx)("g",{transform:"translate(984.000000, 43.000000)",children:Object(Y.jsx)("g",{transform:"translate(16.000000, 11.000000)",children:Object(Y.jsx)("g",{transform:"translate(0.000000, 2.000000)",children:Object(Y.jsx)("path",{d:"M7,0 C10.8599548,0 14,3.14004518 14,7 C14,10.8599548 10.8599548,14 7,14 C3.14004518,14 0,10.8599548 0,7 C0,3.14004518 3.14004518,0 7,0 Z M7,3.35420228 C6.67796325,3.35420228 6.41670228,3.61546325 6.41670228,3.9375 L6.41670228,3.9375 L6.41670228,6.41670228 L3.9375,6.41670228 C3.61546325,6.41670228 3.35420228,6.67796325 3.35420228,7 C3.35420228,7.32203675 3.61546325,7.58329772 3.9375,7.58329772 L3.9375,7.58329772 L6.41670228,7.58329772 L6.41670228,10.0625 C6.41670228,10.3845368 6.67796325,10.6457977 7,10.6457977 C7.32203675,10.6457977 7.58329772,10.3845368 7.58329772,10.0625 L7.58329772,10.0625 L7.58329772,7.58329772 L10.0625,7.58329772 C10.3845368,7.58329772 10.6457977,7.32203675 10.6457977,7 C10.6457977,6.67796325 10.3845368,6.41670228 10.0625,6.41670228 L10.0625,6.41670228 L7.58329772,6.41670228 L7.58329772,3.9375 C7.58329772,3.61546325 7.32203675,3.35420228 7,3.35420228 Z",id:"Path-3"})})})})})})})};n(62);var ne=function(){return Object(Y.jsxs)("header",{className:"component -header flex a-center j-between",children:[Object(Y.jsxs)("nav",{children:[Object(Y.jsx)(i.a,{routeName:"home",children:"Home"}),Object(Y.jsx)(i.a,{routeName:"profile",children:"Account"}),Object(Y.jsx)("a",{href:"https://github.com/star-tech-dev/passwords-frontend",target:"_blank",rel:"noreferrer",children:"Github"})]}),Object(Y.jsxs)("div",{className:"right flex a-center",children:[Object(Y.jsxs)($,{size:"small",theme:"ghost",onClick:function(e){e.preventDefault(),C()},children:[Object(Y.jsx)(ee,{}),Object(Y.jsx)("span",{children:"Lock app"})]}),Object(Y.jsx)(i.a,{routeName:"add",children:Object(Y.jsxs)($,{size:"small",children:[Object(Y.jsx)(te,{}),Object(Y.jsx)("span",{children:"New item"})]})})]})]})},ce=function(e){var t=e.children;return Object(Y.jsx)("div",{className:"layout -default",children:Object(Y.jsxs)("div",{className:"container",children:[Object(Y.jsx)(ne,{}),Object(Y.jsx)("main",{children:t})]})})},re=(n(63),function(e){var t=e.children;return Object(Y.jsx)("div",{className:"layout -simple",children:Object(Y.jsx)("main",{children:Object(Y.jsx)("div",{className:"container",children:t})})})}),ae=function(e){setTimeout(e,0)},se=Object(h.c)(),ie=se.createEffect().use((function(){return g({url:"/items"}).catch((function(){return[]}))})),ue=se.createEffect().use((function(e){return g({data:{id:e},url:"/item"})})),oe=se.createEffect().use((function(e){return g({method:"post",data:e,url:"/items"})})),le=Object(h.e)([]).on(ie.done,(function(e,t){return t.result})).on(oe.done,(function(e,t){var n=t.result;return n&&e.push(n),e})),je=n(30);var de=function(e){return Object(Y.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{className:"icon -cross",children:Object(Y.jsx)("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-410.000000, -395.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsx)("g",{transform:"translate(121.000000, 380.000000)",children:Object(Y.jsx)("g",{id:"information",transform:"translate(289.000000, 15.000000)",children:Object(Y.jsx)("path",{d:"M9,0 C13.9626,0 18,4.03745455 18,9.00005455 C18,13.9626545 13.9626,18 9,18 C4.0374,18 0,13.9626545 0,9.00005455 C0,4.03745455 4.0374,0 9,0 Z M9,7.63636364 C8.54814545,7.63636364 8.18181818,8.00269091 8.18181818,8.45454545 L8.18181818,13.3636364 C8.18181818,13.8154909 8.54814545,14.1818182 9,14.1818182 C9.45185455,14.1818182 9.81818182,13.8154909 9.81818182,13.3636364 L9.81818182,8.45454545 C9.81818182,8.00269091 9.45185455,7.63636364 9,7.63636364 Z M8.99989091,3.81818182 C8.39847273,3.81818182 7.9092,4.30778182 7.9092,4.90958182 C7.9092,5.51083636 8.39847273,6 8.99989091,6 C9.60130909,6 10.0905818,5.51083636 10.0905818,4.90958182 C10.0905818,4.30778182 9.60130909,3.81818182 8.99989091,3.81818182 Z"})})})})})})}))},fe=(n(64),Object(c.forwardRef)((function(e,t){t||(t=Object(c.useRef)());var n=Object(c.useState)(e.error),a=Object(F.a)(n,2),s=a[0],i=a[1],u=Object(c.useRef)(null),o=r.a.useRef(null),l="input -component -theme-".concat(e.theme||"default"," ").concat(e.error?"-error":""),d=function(){ae((function(){var e;u.current&&(null===(e=u.current)||void 0===e||e.focus())}))},f=function(){ae((function(){var e;u.current&&(null===(e=u.current)||void 0===e||e.select())}))};return Object(c.useEffect)((function(){s&&o.current&&Object(je.a)(o.current,{placement:"top-end",content:s})}),[s]),Object(c.useEffect)((function(){i(e.error)}),[]),Object(c.useEffect)((function(){t.current={focus:d,select:f}}),[t]),Object(c.useEffect)((function(){i(e.error)}),[e.error]),Object(Y.jsxs)("div",{className:l,children:[Object(Y.jsx)("div",{className:"buttons",children:s?Object(Y.jsx)("div",{ref:o,className:"icon-error",onClick:function(e){return function(e){e.preventDefault(),d()}(e)},children:Object(Y.jsx)(de,{})}):null}),Object(Y.jsx)("input",Object(j.a)(Object(j.a)({},e),{},{ref:u,type:e.type||"text",onInput:function(t){return function(t){e.onInput&&e.onInput(t),i("")}(t)}}))]})})));fe.displayName="Input";var be=fe;var Oe=function(){return Object(Y.jsx)("svg",{className:"icon -eye",width:"18px",height:"12px",viewBox:"0 0 18 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-701.000000, -405.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsxs)("g",{transform:"translate(701.000000, 405.000000)",children:[Object(Y.jsx)("path",{d:"M8.8000125,3.6 C7.476,3.6 6.4000125,4.6759875 6.4000125,6 C6.4000125,7.3240125 7.476,8.4 8.8000125,8.4 C10.124025,8.4 11.2000125,7.3240125 11.2000125,6 C11.2000125,4.6759875 10.1239875,3.6 8.8000125,3.6 Z",id:"Path"}),Object(Y.jsx)("path",{d:"M8.8000125,0 C4.8,0 1.3840125,2.487975 0,6 C1.3840125,9.5119875 4.8,12 8.8000125,12 C12.804,12 16.2160125,9.5119875 17.600025,6 C16.2160125,2.487975 12.804,0 8.8000125,0 Z M8.8000125,9.999975 C6.5920125,9.999975 4.8,8.2079625 4.8,5.9999625 C4.8,3.7919625 6.5920125,1.9999875 8.8000125,1.9999875 C11.0080125,1.9999875 12.800025,3.792 12.800025,6 C12.800025,8.208 11.0080125,9.999975 8.8000125,9.999975 Z",id:"Shape"})]})})})})};n(65);var he=function(e){var t=Object(c.useState)(e.type),n=Object(F.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),u=Object(F.a)(i,2),o=u[0],l=u[1],d=r.a.useRef(),f=function(){d.current.focus(),d.current.select()};return Object(Y.jsx)("div",{className:"component -item-field",children:Object(Y.jsxs)("div",{className:"flex column a-start",children:[Object(Y.jsx)("div",{className:"label",onClick:f,children:e.name}),Object(Y.jsxs)("div",{className:"field",children:[Object(Y.jsx)("div",{className:"icons",children:"password"===e.name&&Object(Y.jsx)("div",{onClick:function(){o?(l(!1),s("password")):(l(!0),s("text"))},children:Object(Y.jsx)(Oe,{})})}),Object(Y.jsx)(be,Object(j.a)(Object(j.a)({ref:d},e),{},{type:a,theme:"clean",onClick:f}))]})]})})};n(66);var ve=function(e){var t=e.data,n=e.mode,c=t.username||t.url||t.note||"",r=t.name||c,a=Object(i.d)();return Object(Y.jsxs)("div",{className:"component -item -mode-".concat(n),children:[Object(Y.jsxs)("div",{className:"head flex a-start",onClick:function(){a.navigate("item",{id:t._id})},children:[Object(Y.jsx)("div",{className:"image",children:Object(Y.jsx)("img",{src:"",alt:""})}),Object(Y.jsxs)("div",{className:"content",children:[Object(Y.jsx)("div",{className:"title",children:r}),Object(Y.jsx)("div",{className:"subtitle",children:t.url&&"large"===n?Object(Y.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:t.url}):Object(Y.jsx)("div",{children:c})})]})]}),"large"===n&&Object(Y.jsxs)("div",{className:"fields",children:[t.username&&Object(Y.jsx)(he,{name:"username",value:t.username,readOnly:!0}),t.password&&Object(Y.jsx)(he,{name:"password",type:"password",value:t.password,readOnly:!0}),t.note&&Object(Y.jsx)(he,{name:"note",value:t.note,readOnly:!0})]})]})};n(67);var xe=function(e){var t=Object(X.a)(le),n=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){n()}),[]),Object(Y.jsx)("div",{className:"component -item-list",children:Object(Y.jsx)("div",{className:"grid",children:function(){var n=t;return e.searchQuery&&(n=t.filter((function(t){return"".concat(t.name," ").concat(t.url," ").concat(t.username," ").concat(t.note).includes(e.searchQuery)}))),n.map((function(e){return Object(Y.jsx)(ve,{data:e,mode:n.length<3?"large":"compact"},e._id)}))}()})})};var pe=function(){return Object(Y.jsx)("svg",{className:"icon -search",width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(Y.jsx)("g",{transform:"translate(-421.000000, -181.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(Y.jsx)("g",{transform:"translate(421.000000, 180.000000)",children:Object(Y.jsx)("g",{transform:"translate(-0.000000, 1.000000)",children:Object(Y.jsx)("path",{d:"M15.2124425,14.5734649 L11.4044167,10.612927 C12.383527,9.44900467 12.9199874,7.98455219 12.9199874,6.45999368 C12.9199874,2.89800934 10.021978,0 6.45999368,0 C2.89800934,0 0,2.89800934 0,6.45999368 C0,10.021978 2.89800934,12.9199874 6.45999368,12.9199874 C7.79721237,12.9199874 9.07151634,12.5166591 10.1610083,11.7510094 L13.9979637,15.7416003 C14.1583401,15.9081557 14.3740477,16 14.6052031,16 C14.8240003,16 15.0315627,15.9165818 15.1891304,15.7649124 C15.5239266,15.4427553 15.5345996,14.9085419 15.2124425,14.5734649 Z M6.45999368,1.68521574 C9.09286241,1.68521574 11.2347716,3.82712495 11.2347716,6.45999368 C11.2347716,9.09286241 9.09286241,11.2347716 6.45999368,11.2347716 C3.82712495,11.2347716 1.68521574,9.09286241 1.68521574,6.45999368 C1.68521574,3.82712495 3.82712495,1.68521574 6.45999368,1.68521574 Z",id:"Shape"})})})})})})};var me=function(){return Object(Y.jsx)("svg",{className:"icon -cross",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(Y.jsx)("path",{d:"M6 0C2.7 0 0 2.7 0 6C0 9.3 2.7 12 6 12C9.3 12 12 9.3 12 6C12 2.7 9.3 0 6 0ZM8.625 7.575L7.575 8.625L6 7.05L4.425 8.625L3.375 7.575L4.95 6L3.375 4.425L4.425 3.375L6 4.95L7.575 3.375L8.625 4.425L7.05 6L8.625 7.575Z",fill:"currentColor"})})},ge=(n(68),Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(null),r=Object(F.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),u=Object(F.a)(i,2),o=u[0],l=u[1],j=Object(c.useRef)(null),d=function(){e.onChange&&e.onChange(o)},f=function(e){for(var t=!0,n=document.activeElement;n;){if(n.classList.contains("-search-bar"))return t=!1,void(n=null);n=n.parentElement}t&&/\w/.test(e.key)&&1===e.key.length&&(l(e.key),ae((function(){var e;null===(e=j.current)||void 0===e||e.focus()})))};return Object(c.useEffect)((function(){clearTimeout(a),s(null),o?s(setTimeout(d,300)):d()}),[o]),Object(c.useEffect)((function(){var e;t.current={focus:null===(e=j.current)||void 0===e?void 0:e.focus}}),[t]),Object(c.useEffect)((function(){return document.addEventListener("keyup",f),function(){document.removeEventListener("keyup",f)}}),[]),Object(Y.jsxs)("div",{className:"component -search-bar",children:[Object(Y.jsx)("div",{className:"icon-parent flex center",children:o?Object(Y.jsx)("div",{className:"clear flex center",onClick:function(){l(""),ae((function(){var e;null===(e=j.current)||void 0===e||e.focus()}))},children:Object(Y.jsx)(me,{})}):Object(Y.jsx)(pe,{})}),Object(Y.jsx)(be,{ref:j,value:o,theme:"clean",placeholder:"Start typing to search...",onInput:function(e){return l(e.target.value)}})]})})));ge.displayName="SearchBar";var Ce=ge;var we=function(){var e=Object(c.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],s=r.a.createRef();return Object(c.useEffect)((function(){ae((function(){var e;null===(e=s.current)||void 0===e||e.focus()}))}),[]),Object(Y.jsx)("div",{className:"page -home",children:Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{className:"flex a-center j-between",children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(Ce,{ref:s,onChange:function(e){return a(e)}})}),Object(Y.jsx)("div",{children:"sort by: default"})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)(xe,{searchQuery:n})})]})})};var ye=function(){var e=Object(i.d)(),t=Object(X.a)(z).user,n=function(){e.navigate("home")},r=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){t||n()}),[t]),t?Object(Y.jsxs)("div",{className:"page -profile",children:[Object(Y.jsx)("div",{children:"ProfilePage"}),Object(Y.jsxs)("div",{className:"flex a-center",children:[Object(Y.jsx)("div",{children:"name"}),Object(Y.jsx)("input",{type:"text",value:t.username,readOnly:!0})]}),Object(Y.jsxs)("div",{className:"flex a-center",children:[Object(Y.jsx)("div",{children:"hasSecurityCode"}),Object(Y.jsx)("input",{type:"checkbox",checked:t.hasSecurityCode,readOnly:!0})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)("button",{onClick:r,children:"logout"})})]}):null};n(69);var ke=function(e){var t=e.onRegisterShow,n=Object(c.useState)(""),a=Object(F.a)(n,2),s=a[0],u=a[1],o=Object(c.useState)(""),l=Object(F.a)(o,2),j=l[0],d=l[1],O=Object(c.useState)(""),h=Object(F.a)(O,2),v=h[0],x=h[1],p=Object(c.useState)(""),m=Object(F.a)(p,2),g=m[0],C=m[1],w=Object(i.d)(),y=r.a.createRef(),k=r.a.createRef(),N=Object(c.useState)(!1),S=Object(F.a)(N,2),L=S[0],E=S[1],R=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,I({username:s,password:j}).then((function(){return!0})).catch((function(){return k.current.focus(),k.current.select(),C("Failed to sign in"),!1}));case 3:if(t=e.sent,E(!1),!t){e.next=9;break}return e.next=8,w.navigate("home");case 8:P();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){y.current.focus()}))}),[]),Object(Y.jsx)("div",{className:"component -login-form",children:Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=function(){var e=[];return s.length?(j.length||(e.push({field:"password",message:"This field is required"}),s.length&&k.current.focus()),e):(e.push({field:"username",message:"This field is required"}),y.current.focus(),e)}();if(t.length)return t.forEach((function(e){switch(e.field){case"username":x(e.message);break;case"password":C(e.message)}})),void console.log({username:s,password:j});R()},children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{ref:y,placeholder:"Username",error:v,onInput:function(){return x("")},onChange:function(e){return u(e.target.value)},onBlur:function(e){return e.target.value.length?null:x("")}})}),Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{ref:k,type:"password",placeholder:"Password",error:g,onInput:function(){return C("")},onChange:function(e){return d(e.target.value)},onBlur:function(e){return e.target.value.length?null:C("")}})}),Object(Y.jsx)("div",{className:"button-block",children:Object(Y.jsx)($,{type:"submit",loading:L,fullWidth:!0,children:"Sign in"})}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("span",{children:"or "}),Object(Y.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t&&t()},children:"create new account"})]})]})})};var Ne=function(e){var t=e.onLoginShow,n=Object(c.useState)(""),a=Object(F.a)(n,2),s=a[0],u=a[1],o=Object(c.useState)(""),l=Object(F.a)(o,2),j=l[0],d=l[1],O=Object(c.useState)(""),h=Object(F.a)(O,2),v=h[0],x=h[1],p=Object(i.d)(),m=r.a.createRef(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M({username:s,email:v,password:j}).then(Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.navigate("home");case 2:P();case 3:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){m.current.focus()}))}),[]),Object(Y.jsx)("div",{className:"component -register-form",children:Object(Y.jsxs)("form",{onSubmit:g,children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{ref:m,placeholder:"Username",onChange:function(e){return u(e.target.value)}})}),Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{type:"email",placeholder:"Email",onChange:function(e){return x(e.target.value)}})}),Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{placeholder:"Password",onChange:function(e){return d(e.target.value)}})}),Object(Y.jsx)("div",{className:"button-block",children:Object(Y.jsx)($,{type:"submit",fullWidth:!0,children:"Sign up"})}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("span",{children:"or "}),Object(Y.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t&&t()},children:"return to login"})]})]})})};n(70);var Se=function(){var e=Object(c.useState)("login"),t=Object(F.a)(e,2),n=t[0],r=t[1];return Object(Y.jsxs)("div",{className:"page -auth",children:[Object(Y.jsx)("h1",{children:"register"===n?Object(Y.jsx)("span",{children:"Let's create a new account:"}):Object(Y.jsx)("span",{children:"Hi, I'm your password manager."})}),Object(Y.jsx)("div",{className:"container -narrow",children:"register"===n?Object(Y.jsx)(Ne,{onLoginShow:function(){return r("login")}}):Object(Y.jsx)(ke,{onRegisterShow:function(){return r("register")}})})]})};n(71);var Le=function(){var e=Object(c.useState)(!1),t=Object(F.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(F.a)(s,2),o=u[0],l=u[1],j=Object(c.useState)(""),d=Object(F.a)(j,2),O=d[0],h=d[1],v=Object(X.a)(z).user,x=Object(i.d)(),p=r.a.createRef(),m=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Z();case 3:x.navigate("auth");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.length){e.next=5;break}return h("This field is required"),ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()})),e.abrupt("return");case 5:return a(!0),e.next=8,w(o).catch((function(e){h(""),h(e.response.data.message),ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()}))}));case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()})),function(){}}),[]),Object(Y.jsxs)("div",{className:"page -unlock",children:[Object(Y.jsx)("h1",{children:"App is locked!"}),Object(Y.jsxs)("div",{className:"flex column center",children:[Object(Y.jsx)("div",{children:"Enter your security code to unlock the app:"}),Object(Y.jsxs)("form",{className:"flex column",onSubmit:g,children:[Object(Y.jsx)("div",{children:Object(Y.jsx)(be,{ref:p,type:"password",error:O,placeholder:"your_security_code",value:o,onInput:function(e){return l(e.target.value)}})}),Object(Y.jsx)("div",{children:Object(Y.jsx)($,{type:"submit",loading:n,fullWidth:!0,children:"Unlock"})})]}),Object(Y.jsxs)("div",{className:"bottom flex a-center",children:[Object(Y.jsx)("div",{children:"You signed as\xa0"}),Object(Y.jsx)("div",{className:"name",children:null===v||void 0===v?void 0:v.username}),Object(Y.jsx)("div",{children:".\xa0"}),Object(Y.jsx)("a",{href:"#",onClick:m,children:"logout"}),Object(Y.jsx)("div",{children:"."})]})]})]})},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;return Object.entries(e).every((function(e){return!!t.includes(e[0])||(!e[1]||(n=!0,!1))})),!n};var Re=function(){var e=Object(i.c)().router,t=Object(c.useState)(""),n=Object(F.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),u=Object(F.a)(s,2),o=u[0],l=u[1],j=Object(c.useState)(""),d=Object(F.a)(j,2),O=d[0],h=d[1],v=Object(c.useState)(""),x=Object(F.a)(v,2),p=x[0],m=x[1],g=Object(c.useState)(""),C=Object(F.a)(g,2),w=C[0],y=C[1],k=function(){var t=Object(b.a)(f.a.mark((function t(n){var c,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!Ee(c={group:null,name:r,url:o,username:O,password:p,note:w},["group"])){t.next=6;break}alert("Cannot save empty item."),t.next=10;break;case 6:return t.next=8,oe(c);case 8:a=t.sent,e.navigate("item",{id:a._id});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(Y.jsxs)("div",{className:"Page Home",children:[Object(Y.jsx)("div",{children:"Add newItem:"}),Object(Y.jsxs)("form",{onSubmit:k,children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"name"}),Object(Y.jsx)("input",{type:"text",name:"name",value:r,onInput:function(e){return a(e.target.value)}})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"url"}),Object(Y.jsx)("input",{type:"text",name:"url",value:o,onInput:function(e){return l(e.target.value)}})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"username"}),Object(Y.jsx)("input",{type:"text",name:"username",value:O,onInput:function(e){return h(e.target.value)}})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"password"}),Object(Y.jsx)("input",{type:"text",name:"password",value:p,onInput:function(e){return m(e.target.value)}})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"note"}),Object(Y.jsx)("textarea",{name:"note",value:w,onInput:function(e){return y(e.target.value)}})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)("button",{type:"submit",children:"create"})})]})]})};var Me=function(){var e=Object(c.useState)(null),t=Object(F.a)(e,2),n=t[0],r=t[1],a=Object(i.c)(),s=a.route,u=a.router;return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(s.params.id).then((function(e){r(e)})).catch((function(){return u.navigate("home")}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[s.params.id]),Object(Y.jsxs)("div",{className:"Page Profile",children:[Object(Y.jsx)("div",{children:"ItemPage"}),n?Object(Y.jsxs)("div",{children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"name"}),Object(Y.jsx)("input",{type:"text",value:n.name,readOnly:!0})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"url"}),Object(Y.jsx)("input",{type:"text",value:n.url,readOnly:!0})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"username"}),Object(Y.jsx)("input",{type:"text",value:n.username,readOnly:!0})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"password"}),Object(Y.jsx)("input",{type:"text",value:n.password,readOnly:!0})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("div",{children:"note"}),Object(Y.jsx)("textarea",{value:n.note,readOnly:!0})]})]}):null]})};var Ie=function(){return Object(Y.jsx)("div",{className:"page -not-found",children:Object(Y.jsx)("div",{children:"404"})})};n(72);var Ze=function(){return Object(Y.jsx)("div",{className:"component -page-loader flex center",children:Object(Y.jsx)(K,{})})},_e=n(8),Pe=Object(h.e)([]).on(S,(function(e,t){var n=new Set([].concat(Object(_e.a)(e),[t]));return e=Array.from(n)})).on(L,(function(e,t){return e=e.filter((function(e){return e!==t}))})).on(E,(function(e){return e=e.slice(0,1)})).on(R,(function(){return[]}));n(73);var De=function(e){void 0===e.closable&&(e.closable=!0);var t=Object(c.useState)(!1),n=Object(F.a)(t,2),r=n[0],a=n[1],s=Object(X.a)(Pe),i=Object(c.useState)(!1),u=Object(F.a)(i,2),o=u[0],l=u[1],j="component modal -".concat(e.id," -size-").concat(e.size||"default");Object(c.useEffect)((function(){a(!0)}),[]),Object(c.useEffect)((function(){var t=Pe.watch((function(t){l(t.includes(e.id))}));return function(){t()}}),[s]),Object(c.useEffect)((function(){r&&(o&&e.onOpen&&e.onOpen(),!o&&e.onClose&&e.onClose())}),[o]);var d=function(){e.closable&&L(e.id)};return o?Object(Y.jsx)("div",{className:j,onClick:function(e){var t=e.target;t.classList.contains("Modal")&&t.classList.contains("Component")&&d()},children:Object(Y.jsxs)("dialog",{open:!0,className:"dialog",children:[e.closable&&Object(Y.jsx)("div",{className:"close",onClick:d,children:Object(Y.jsx)(me,{})}),Object(Y.jsx)("div",{className:"head",children:Object(Y.jsx)("div",{className:"h2 flex center",children:e.heading})}),Object(Y.jsx)("div",{className:"body",children:e.children})]})}):null};var ze=function(){var e="set_security_code",t=Object(c.useState)(""),n=Object(F.a)(t,2),r=n[0],a=n[1],s=null,i=function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,Z();case 3:L(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,D(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){var e;null===(e=s)||void 0===e||e.focus()}))}),[s]),Object(Y.jsxs)(De,{id:e,closable:!1,children:[Object(Y.jsxs)("form",{onSubmit:u,children:[Object(Y.jsx)("div",{children:"Set your security code:"}),Object(Y.jsx)("div",{children:Object(Y.jsx)("input",{type:"text",ref:function(e){s=e},value:r,onInput:function(e){return a(e.target.value)}})}),Object(Y.jsx)("div",{children:Object(Y.jsx)("button",{type:"submit",children:"Set"})}),Object(Y.jsx)("div",{children:"Do not forget your secret code!"})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)("a",{href:"#",onClick:i,children:"logout"})})]})};n(74);var Be=function(){var e=Object(c.useState)(!1),t=Object(F.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=Pe.watch((function(e){r(!!e.length)}));return function(){e()}})),Object(Y.jsx)("div",{className:"Modal Controller ".concat(n?"-active":""),children:Object(Y.jsx)(ze,{})})};var We=function(){var e=Object(i.c)().route,t=Object(X.a)(H);function n(){switch(e.name){case"home":return Object(Y.jsx)(ce,{children:Object(Y.jsx)(we,{})});case"auth":return Object(Y.jsx)(re,{children:Object(Y.jsx)(Se,{})});case"unlock":return Object(Y.jsx)(re,{children:Object(Y.jsx)(Le,{})});case"profile":return Object(Y.jsx)(ce,{children:Object(Y.jsx)(ye,{})});case"add":return Object(Y.jsx)(ce,{children:Object(Y.jsx)(Re,{})});case"item":return Object(Y.jsx)(ce,{children:Object(Y.jsx)(Me,{})});default:return Object(Y.jsx)(re,{children:Object(Y.jsx)(Ie,{})})}}return Object(c.useEffect)((function(){var e=J.watch((function(e){e&&P()}));return function(){e()}}),[]),Object(c.useEffect)((function(){y()}),[t]),e?Object(Y.jsxs)("div",{className:"app",children:[Object(Y.jsx)(n,{}),Object(Y.jsx)(Be,{})]}):Object(Y.jsx)(Ze,{})},Ae=(n(75),U());s.a.render(Object(Y.jsx)(i.b,{router:Ae,children:Object(Y.jsx)(We,{})}),document.getElementById("root")),Ae.start((function(){J(!0)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.87ecf340.chunk.js.map