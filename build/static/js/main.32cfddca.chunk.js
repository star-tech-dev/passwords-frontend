(this["webpackJsonppasswords-frontend"]=this["webpackJsonppasswords-frontend"]||[]).push([[0],{58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t),n.d(t,"router",(function(){return Be}));var c=n(1),r=n.n(c),a=n(25),s=n.n(a),i=n(6),u=n(14),o=n(28),l=n(29),j=n(3),d=n(4),f=n.n(d),b=n(7),O=n(10),h=n(5),v=Object(h.c)(),x=Object(h.c)(),p=n(26),m=n.n(p),g=function(e){var t=Object(j.a)({method:"get",withCredentials:!0},e);return t.url="".concat("https://passwords-api.star-tech.dev").concat(e.url),"get"===t.method&&Object.prototype.hasOwnProperty.call(t,"data")&&(t.params=e.data,delete t.data),m()(t).then((function(e){return e.data})).catch((function(e){throw 423===e.response.status&&k(!0),e}))},w=x.createEffect().use((function(){return g({method:"post",url:"/lock"})})),C=x.createEffect().use((function(e){return g({method:"post",url:"/unlock",data:{securityCode:e}})})),y=x.createEvent(),k=x.createEvent(),N=Object(h.c)(),S=N.createEvent("open modal"),E=N.createEvent("close modal"),L=N.createEvent("close last modal"),R=N.createEvent("close all modals"),I=v.effect().use((function(e){return g({method:"post",data:{username:e.username,password:e.password},url:"/register"})})),_=v.effect().use((function(e){return g({method:"post",data:{username:e.username,password:e.password},url:"/login"})})),M=v.effect().use((function(){return g({url:"/logout"})})),P=v.effect().use((function(){return g({url:"/auth"}).catch((function(){return{user:null}}))})),D=v.event(),z=v.effect().use((function(e){return g({method:"post",url:"/security-code",data:{securityCode:e}})})),B=v.store({user:null}).on(I.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n})})).on(_.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n.user}),y(),e})).on(M.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{user:null})})).on(P.done,(function(e,t){var n=t.result;return e=Object(j.a)(Object(j.a)({},e),{},{user:n.user}),k(n.isAppLocked),e})).on(D,(function(e){return e.user&&!e.user.hasSecurityCode&&S("set_security_code"),e})).on(z,(function(e){return E("set_security_code"),e})),Z=[{name:"home",path:"/",private:!0},{name:"auth",path:"/auth",forGuests:!0},{name:"unlock",path:"/unlock",private:!0},{name:"item",path:"/item/:id",private:!0},{name:"profile",path:"/profile",private:!0},{name:"add",path:"/add",private:!0},{name:"404",path:"/404"}];function W(){return A.apply(this,arguments)}function A(){return(A=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B.getState().user){e.next=4;break}return e.next=4,P();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T=function(e){return function(e,t){var n=Object(O.a)(e,t).toActivate.map((function(e){return Z.find((function(t){return t.name===e})).onActivate})).filter(Boolean);return Promise.all(n.map((function(e){return e()}))).then(function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var n=t.reduce((function(e,t){return Object.assign(e,t)}),{});return Object(j.a)(Object(j.a)({},e),{},{data:n})}))}};var q=function(e){var t=Z.find((function(t){return t.name===e})),n=!!t&&!!t.forGuests,c=!!t&&!!t.private;return n?!B.getState().user:!c||!!B.getState().user},G=function(e){return function(t,n,c){if(!q(t.name))return e.navigate("auth");c()}},H=Object(h.e)({isLocked:!1,lastPath:null}).on(w.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{isLocked:!0})})).on(C.done,(function(e){return e=Object(j.a)(Object(j.a)({},e),{},{isLocked:!1})})).on(y,(function(e){var t=Be.getState();return!!B.getState().user&&t&&(e.isLocked&&"unlock"!==t.name&&Be.navigate("unlock"),e.isLocked||"unlock"!==t.name||Be.navigate("home")),e})).on(k,(function(e,t){return y(),Object(j.a)(Object(j.a)({},e),{},{isLocked:t})})),U=function(e){return function(t,n,c){if(H.getState().isLocked&&"unlock"!==t.name)return e.navigate("unlock");c()}};function J(){var e=Object(u.b)(Z,{});return e.usePlugin(o.a),e.usePlugin(Object(l.a)()),e.useMiddleware(T,G,U),e}var X=Object(h.c)().event(),F=n(11),Y=n(2),K=(n(58),n(0));var Q=function(){return Object(K.jsx)("div",{className:"component -loader-round",children:Object(K.jsx)("svg",{className:"svg",width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(K.jsx)("g",{transform:"translate(-629.000000, -385.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(K.jsx)("path",{d:"M631.20799,398.4917 C631.37363,398.8603 631.2091,399.2933 630.8405,399.459 C630.4719,399.6246 630.03881,399.4601 629.873162,399.0915 C629.300253,397.8166 629,396.4285 629,395 C629,389.47726 633.47726,385 639,385 C644.5227,385 649,389.47726 649,395 C649,400.5227 644.5227,405 639,405 C636.65339,405 634.42972,404.1881 632.65267,402.7281 C632.34042,402.4715 632.29526,402.0105 632.55179,401.6982 C632.80833,401.386 633.26941,401.3408 633.58166,401.5973 C635.09934,402.8442 636.9955,403.5366 639,403.5366 C643.7145,403.5366 647.5366,399.7145 647.5366,395 C647.5366,390.28549 643.7145,386.46341 639,386.46341 C634.28549,386.46341 630.46341,390.28549 630.46341,395 C630.46341,396.2208 630.71947,397.4046 631.20799,398.4917 Z",id:"Path"})})})})})},V=(n(60),Object(c.forwardRef)((function(e,t){t||(t=Object(c.useRef)());var n=Object(c.useState)({}),r=Object(Y.a)(n,2),a=r[0],s=r[1],i="button -component -theme-".concat(e.theme||"default"," -size-").concat(e.size||"default"," ").concat(e.fullWidth?"-full-width":""," ").concat(e.loading?"-loading":""),u=Object(c.useRef)(null);return Object(c.useEffect)((function(){!function(){t.current={};var n=Object(j.a)({},e);delete n.fullWidth,delete n.loading,delete n.size,delete n.theme,s(n)}()}),[e]),Object(K.jsx)("div",{className:i,children:Object(K.jsx)("button",Object(j.a)(Object(j.a)({},a),{},{ref:u,children:e.loading?Object(K.jsx)("div",{className:"loader",children:Object(K.jsx)(Q,{})}):e.children}))})})));V.displayName="Button";var $=V;n(61);var ee=function(){return Object(K.jsx)("svg",{className:"icon -lock",width:"12px",height:"16px",viewBox:"0 0 12 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(K.jsx)("g",{transform:"translate(-858.000000, -67.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(K.jsxs)("g",{transform:"translate(858.000000, 67.000000)",children:[Object(K.jsx)("path",{d:"M9.6969697,6.67253333 L9.6969697,4.12116364 C9.6969697,1.84877576 7.84819394,0 5.57575758,0 C3.30332121,0 1.45459394,1.84877576 1.45459394,4.12116364 L1.45459394,6.67243636 C0.551418182,7.66370909 0,8.9808 0,10.4242424 C0,13.4987152 2.50128485,16 5.57575758,16 C8.6502303,16 11.1515152,13.4987152 11.1515152,10.4242424 C11.1515152,8.9808 10.600097,7.66370909 9.6969697,6.67253333 Z M5.57575758,1.45454545 C7.04615758,1.45454545 8.24242424,2.65081212 8.24242424,4.12116364 L8.24242424,5.5286303 C7.44979394,5.09517576 6.54109091,4.84848485 5.57575758,4.84848485 C4.61047273,4.84848485 3.7017697,5.09517576 2.90913939,5.5286303 L2.90913939,4.12116364 C2.90913939,2.65081212 4.10535758,1.45454545 5.57575758,1.45454545 Z M5.57575758,14.5454545 C3.30332121,14.5454545 1.45454545,12.6966788 1.45454545,10.4242424 C1.45454545,8.15180606 3.30332121,6.3030303 5.57575758,6.3030303 C7.84819394,6.3030303 9.6969697,8.15180606 9.6969697,10.4242424 C9.6969697,12.6966788 7.84819394,14.5454545 5.57575758,14.5454545 Z",id:"XMLID_811_"}),Object(K.jsx)("path",{d:"M5.57575758,8.48484848 C4.90739394,8.48484848 4.36363636,9.02860606 4.36363636,9.6969697 C4.36363636,10.092703 4.55427879,10.4446545 4.84848485,10.6659879 L4.84848485,11.6363636 C4.84848485,12.0380121 5.17410909,12.3636364 5.57575758,12.3636364 C5.97740606,12.3636364 6.3030303,12.0380121 6.3030303,11.6363636 L6.3030303,10.6659879 C6.59723636,10.4446545 6.78787879,10.0926545 6.78787879,9.6969697 C6.78787879,9.02860606 6.24412121,8.48484848 5.57575758,8.48484848 Z",id:"XMLID_815_"})]})})})})};var te=function(){return Object(K.jsx)("svg",{className:"icon -add",width:"14px",height:"14px",viewBox:"0 0 14 14",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(K.jsx)("g",{transform:"translate(-1000.000000, -56.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(K.jsx)("g",{transform:"translate(984.000000, 43.000000)",children:Object(K.jsx)("g",{transform:"translate(16.000000, 11.000000)",children:Object(K.jsx)("g",{transform:"translate(0.000000, 2.000000)",children:Object(K.jsx)("path",{d:"M7,0 C10.8599548,0 14,3.14004518 14,7 C14,10.8599548 10.8599548,14 7,14 C3.14004518,14 0,10.8599548 0,7 C0,3.14004518 3.14004518,0 7,0 Z M7,3.35420228 C6.67796325,3.35420228 6.41670228,3.61546325 6.41670228,3.9375 L6.41670228,3.9375 L6.41670228,6.41670228 L3.9375,6.41670228 C3.61546325,6.41670228 3.35420228,6.67796325 3.35420228,7 C3.35420228,7.32203675 3.61546325,7.58329772 3.9375,7.58329772 L3.9375,7.58329772 L6.41670228,7.58329772 L6.41670228,10.0625 C6.41670228,10.3845368 6.67796325,10.6457977 7,10.6457977 C7.32203675,10.6457977 7.58329772,10.3845368 7.58329772,10.0625 L7.58329772,10.0625 L7.58329772,7.58329772 L10.0625,7.58329772 C10.3845368,7.58329772 10.6457977,7.32203675 10.6457977,7 C10.6457977,6.67796325 10.3845368,6.41670228 10.0625,6.41670228 L10.0625,6.41670228 L7.58329772,6.41670228 L7.58329772,3.9375 C7.58329772,3.61546325 7.32203675,3.35420228 7,3.35420228 Z",id:"Path-3"})})})})})})})};n(62);var ne=function(){return Object(K.jsxs)("header",{className:"component -header flex a-center j-between",children:[Object(K.jsxs)("nav",{children:[Object(K.jsx)(i.a,{routeName:"home",children:"Home"}),Object(K.jsx)(i.a,{routeName:"profile",children:"Account"}),Object(K.jsx)("a",{href:"https://github.com/star-tech-dev/passwords-frontend",target:"_blank",rel:"noreferrer",children:"Github"})]}),Object(K.jsxs)("div",{className:"right flex a-center",children:[Object(K.jsxs)($,{size:"small",theme:"ghost",onClick:function(e){e.preventDefault(),w()},children:[Object(K.jsx)(ee,{}),Object(K.jsx)("span",{children:"Lock app"})]}),Object(K.jsx)(i.a,{routeName:"add",children:Object(K.jsxs)($,{size:"small",children:[Object(K.jsx)(te,{}),Object(K.jsx)("span",{children:"New item"})]})})]})]})},ce=function(e){var t=e.children;return Object(K.jsx)("div",{className:"layout -default",children:Object(K.jsxs)("div",{className:"container",children:[Object(K.jsx)(ne,{}),Object(K.jsx)("main",{children:t})]})})},re=(n(63),function(e){var t=e.children;return Object(K.jsx)("div",{className:"layout -simple",children:Object(K.jsx)("main",{children:Object(K.jsx)("div",{className:"container",children:t})})})}),ae=function(e){setTimeout(e,0)},se=Object(h.c)(),ie=se.createEffect().use((function(){return g({url:"/items"}).catch((function(){return[]}))})),ue=se.createEffect().use((function(e){return g({data:{id:e},url:"/item"})})),oe=se.createEffect().use((function(e){return g({method:"post",data:e,url:"/items"})})),le=Object(h.e)([]).on(ie.done,(function(e,t){return t.result})).on(oe.done,(function(e,t){var n=t.result;return n&&e.push(n),e}));n(64);var je=function(e){var t=e.data,n=t.username||t.url||t.note||"",c=t.name||n,r=Object(i.d)();return Object(K.jsx)("div",{className:"component -item -mode-".concat("compact"),onClick:function(){r.navigate("item",{id:t._id})},children:Object(K.jsxs)("div",{className:"flex a-start",children:[Object(K.jsx)("div",{className:"image",children:Object(K.jsx)("img",{src:"",alt:""})}),Object(K.jsxs)("div",{className:"content",children:[Object(K.jsx)("div",{className:"title",children:c}),Object(K.jsx)("div",{className:"subtitle",children:n})]})]})})};n(65);var de=function(){var e=Object(F.a)(le),t=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){t()}),[]),Object(K.jsx)("div",{className:"component -item-list",children:Object(K.jsx)("div",{className:"grid",children:e.map((function(e){return Object(K.jsx)(je,{data:e},e._id)}))})})},fe=(n(66),n(30));var be=function(e){return Object(K.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{className:"icon -cross",children:Object(K.jsx)("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(K.jsx)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(K.jsx)("g",{transform:"translate(-410.000000, -395.000000)",fill:"currentColor",fillRule:"nonzero",children:Object(K.jsx)("g",{transform:"translate(121.000000, 380.000000)",children:Object(K.jsx)("g",{id:"information",transform:"translate(289.000000, 15.000000)",children:Object(K.jsx)("path",{d:"M9,0 C13.9626,0 18,4.03745455 18,9.00005455 C18,13.9626545 13.9626,18 9,18 C4.0374,18 0,13.9626545 0,9.00005455 C0,4.03745455 4.0374,0 9,0 Z M9,7.63636364 C8.54814545,7.63636364 8.18181818,8.00269091 8.18181818,8.45454545 L8.18181818,13.3636364 C8.18181818,13.8154909 8.54814545,14.1818182 9,14.1818182 C9.45185455,14.1818182 9.81818182,13.8154909 9.81818182,13.3636364 L9.81818182,8.45454545 C9.81818182,8.00269091 9.45185455,7.63636364 9,7.63636364 Z M8.99989091,3.81818182 C8.39847273,3.81818182 7.9092,4.30778182 7.9092,4.90958182 C7.9092,5.51083636 8.39847273,6 8.99989091,6 C9.60130909,6 10.0905818,5.51083636 10.0905818,4.90958182 C10.0905818,4.30778182 9.60130909,3.81818182 8.99989091,3.81818182 Z"})})})})})})}))},Oe=(n(67),Object(c.forwardRef)((function(e,t){t||(t=Object(c.useRef)());var n=Object(c.useState)(e.error),a=Object(Y.a)(n,2),s=a[0],i=a[1],u=Object(c.useRef)(null),o=r.a.useRef(null),l="input -component -theme-".concat(e.theme||"default"," ").concat(e.error?"-error":""),d=function(){ae((function(){var e;u.current&&(null===(e=u.current)||void 0===e||e.focus())}))},f=function(){ae((function(){var e;u.current&&(null===(e=u.current)||void 0===e||e.select())}))};return Object(c.useEffect)((function(){s&&o.current&&Object(fe.a)(o.current,{placement:"top-end",content:s})}),[s]),Object(c.useEffect)((function(){i(e.error)}),[]),Object(c.useEffect)((function(){t.current={focus:d,select:f}}),[t]),Object(c.useEffect)((function(){i(e.error)}),[e.error]),Object(K.jsxs)("div",{className:l,children:[Object(K.jsx)("div",{className:"buttons",children:s?Object(K.jsx)("div",{ref:o,className:"icon-error",onClick:function(e){return function(e){e.preventDefault(),d()}(e)},children:Object(K.jsx)(be,{})}):null}),Object(K.jsx)("input",Object(j.a)(Object(j.a)({},e),{},{ref:u,type:e.type||"text",onInput:function(t){return function(t){e.onInput&&e.onInput(t),i("")}(t)}}))]})})));Oe.displayName="Input";var he=Oe,ve=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(null),r=Object(Y.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),u=Object(Y.a)(i,2),o=u[0],l=u[1],j=Object(c.useRef)(null),d=function(){};return Object(c.useEffect)((function(){clearTimeout(a),s(null),o&&s(setTimeout(d,1e3))}),[o]),Object(c.useEffect)((function(){var e;t.current={focus:null===(e=j.current)||void 0===e?void 0:e.focus}}),[t]),Object(K.jsx)("div",{className:"component -search-bar",children:Object(K.jsx)(he,{ref:j,value:o,theme:"clean",placeholder:"Start typing to search...",onInput:function(e){return l(e.target.value)}})})}));ve.displayName="SearchBar";var xe=ve;var pe=function(){var e=r.a.createRef();return Object(c.useEffect)((function(){ae((function(){var t;null===(t=e.current)||void 0===t||t.focus()}))}),[]),Object(K.jsx)("div",{className:"page -home",children:Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{className:"flex a-center j-between",children:[Object(K.jsx)("div",{children:Object(K.jsx)(xe,{ref:e})}),Object(K.jsx)("div",{children:"sort by:"})]}),Object(K.jsx)("div",{children:Object(K.jsx)(de,{})})]})})};var me=function(){var e=Object(i.d)(),t=Object(F.a)(B).user,n=function(){e.navigate("home")},r=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){t||n()}),[t]),t?Object(K.jsxs)("div",{className:"page -profile",children:[Object(K.jsx)("div",{children:"ProfilePage"}),Object(K.jsxs)("div",{className:"flex a-center",children:[Object(K.jsx)("div",{children:"name"}),Object(K.jsx)("input",{type:"text",value:t.username,readOnly:!0})]}),Object(K.jsxs)("div",{className:"flex a-center",children:[Object(K.jsx)("div",{children:"hasSecurityCode"}),Object(K.jsx)("input",{type:"checkbox",checked:t.hasSecurityCode,readOnly:!0})]}),Object(K.jsx)("div",{children:Object(K.jsx)("button",{onClick:r,children:"logout"})})]}):null};n(68);var ge=function(e){var t=e.onRegisterShow,n=Object(c.useState)(""),a=Object(Y.a)(n,2),s=a[0],u=a[1],o=Object(c.useState)(""),l=Object(Y.a)(o,2),j=l[0],d=l[1],O=Object(c.useState)(""),h=Object(Y.a)(O,2),v=h[0],x=h[1],p=Object(c.useState)(""),m=Object(Y.a)(p,2),g=m[0],w=m[1],C=Object(i.d)(),y=r.a.createRef(),k=r.a.createRef(),N=Object(c.useState)(!1),S=Object(Y.a)(N,2),E=S[0],L=S[1],R=function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,_({username:s,password:j}).then((function(){return!0})).catch((function(){return k.current.focus(),k.current.select(),w("Failed to sign in"),!1}));case 3:if(t=e.sent,L(!1),!t){e.next=9;break}return e.next=8,C.navigate("home");case 8:D();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){y.current.focus()}))}),[]),Object(K.jsx)("div",{className:"component -login-form",children:Object(K.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=function(){var e=[];return s.length?(j.length||(e.push({field:"password",message:"This field is required"}),s.length&&k.current.focus()),e):(e.push({field:"username",message:"This field is required"}),y.current.focus(),e)}();if(t.length)return t.forEach((function(e){switch(e.field){case"username":x(e.message);break;case"password":w(e.message)}})),void console.log({username:s,password:j});R()},children:[Object(K.jsx)("div",{children:Object(K.jsx)(he,{ref:y,placeholder:"Username",error:v,onInput:function(){return x("")},onChange:function(e){return u(e.target.value)},onBlur:function(e){return e.target.value.length?null:x("")}})}),Object(K.jsx)("div",{children:Object(K.jsx)(he,{ref:k,type:"password",placeholder:"Password",error:g,onInput:function(){return w("")},onChange:function(e){return d(e.target.value)},onBlur:function(e){return e.target.value.length?null:w("")}})}),Object(K.jsx)("div",{className:"button-block",children:Object(K.jsx)($,{type:"submit",loading:E,fullWidth:!0,children:"Sign in"})}),Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"or "}),Object(K.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t&&t()},children:"create new account"})]})]})})};var we=function(e){var t=e.onLoginShow,n=Object(c.useState)(""),a=Object(Y.a)(n,2),s=a[0],u=a[1],o=Object(c.useState)(""),l=Object(Y.a)(o,2),j=l[0],d=l[1],O=Object(c.useState)(""),h=Object(Y.a)(O,2),v=h[0],x=h[1],p=Object(i.d)(),m=r.a.createRef(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I({username:s,email:v,password:j}).then(Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.navigate("home");case 2:D();case 3:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){m.current.focus()}))}),[]),Object(K.jsx)("div",{className:"component -register-form",children:Object(K.jsxs)("form",{onSubmit:g,children:[Object(K.jsx)("div",{children:Object(K.jsx)(he,{ref:m,placeholder:"Username",onChange:function(e){return u(e.target.value)}})}),Object(K.jsx)("div",{children:Object(K.jsx)(he,{type:"email",placeholder:"Email",onChange:function(e){return x(e.target.value)}})}),Object(K.jsx)("div",{children:Object(K.jsx)(he,{placeholder:"Password",onChange:function(e){return d(e.target.value)}})}),Object(K.jsx)("div",{className:"button-block",children:Object(K.jsx)($,{type:"submit",fullWidth:!0,children:"Sign up"})}),Object(K.jsxs)("div",{children:[Object(K.jsx)("span",{children:"or "}),Object(K.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),t&&t()},children:"return to login"})]})]})})};n(69);var Ce=function(){var e=Object(c.useState)("login"),t=Object(Y.a)(e,2),n=t[0],r=t[1];return Object(K.jsxs)("div",{className:"page -auth",children:[Object(K.jsx)("h1",{children:"register"===n?Object(K.jsx)("span",{children:"Let's create a new account:"}):Object(K.jsx)("span",{children:"Hi, I'm your password manager."})}),Object(K.jsx)("div",{className:"container -narrow",children:"register"===n?Object(K.jsx)(we,{onLoginShow:function(){return r("login")}}):Object(K.jsx)(ge,{onRegisterShow:function(){return r("register")}})})]})};n(70);var ye=function(){var e=Object(c.useState)(!1),t=Object(Y.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(Y.a)(s,2),o=u[0],l=u[1],j=Object(c.useState)(""),d=Object(Y.a)(j,2),O=d[0],h=d[1],v=Object(F.a)(B).user,x=Object(i.d)(),p=r.a.createRef(),m=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M();case 3:x.navigate("auth");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.length){e.next=5;break}return h("This field is required"),ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()})),e.abrupt("return");case 5:return a(!0),e.next=8,C(o).catch((function(e){h(""),h(e.response.data.message),ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()}))}));case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return ae((function(){var e;null===(e=p.current)||void 0===e||e.focus()})),function(){}}),[]),Object(K.jsxs)("div",{className:"page -unlock",children:[Object(K.jsx)("h1",{children:"App is locked!"}),Object(K.jsxs)("div",{className:"flex column center",children:[Object(K.jsx)("div",{children:"Enter your security code to unlock the app:"}),Object(K.jsxs)("form",{className:"flex column",onSubmit:g,children:[Object(K.jsx)("div",{children:Object(K.jsx)(he,{ref:p,type:"password",error:O,placeholder:"your_security_code",value:o,onInput:function(e){return l(e.target.value)}})}),Object(K.jsx)("div",{children:Object(K.jsx)($,{type:"submit",loading:n,fullWidth:!0,children:"Unlock"})})]}),Object(K.jsxs)("div",{className:"bottom flex a-center",children:[Object(K.jsx)("div",{children:"You signed as\xa0"}),Object(K.jsx)("div",{className:"name",children:null===v||void 0===v?void 0:v.username}),Object(K.jsx)("div",{children:".\xa0"}),Object(K.jsx)("a",{href:"#",onClick:m,children:"logout"}),Object(K.jsx)("div",{children:"."})]})]})]})},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;return Object.entries(e).every((function(e){return!!t.includes(e[0])||(!e[1]||(n=!0,!1))})),!n};var Ne=function(){var e=Object(i.c)().router,t=Object(c.useState)(""),n=Object(Y.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),u=Object(Y.a)(s,2),o=u[0],l=u[1],j=Object(c.useState)(""),d=Object(Y.a)(j,2),O=d[0],h=d[1],v=Object(c.useState)(""),x=Object(Y.a)(v,2),p=x[0],m=x[1],g=Object(c.useState)(""),w=Object(Y.a)(g,2),C=w[0],y=w[1],k=function(){var t=Object(b.a)(f.a.mark((function t(n){var c,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!ke(c={group:null,name:r,url:o,username:O,password:p,note:C},["group"])){t.next=6;break}alert("Cannot save empty item."),t.next=10;break;case 6:return t.next=8,oe(c);case 8:a=t.sent,e.navigate("item",{id:a._id});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(K.jsxs)("div",{className:"Page Home",children:[Object(K.jsx)("div",{children:"Add newItem:"}),Object(K.jsxs)("form",{onSubmit:k,children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"name"}),Object(K.jsx)("input",{type:"text",name:"name",value:r,onInput:function(e){return a(e.target.value)}})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"url"}),Object(K.jsx)("input",{type:"text",name:"url",value:o,onInput:function(e){return l(e.target.value)}})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"username"}),Object(K.jsx)("input",{type:"text",name:"username",value:O,onInput:function(e){return h(e.target.value)}})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"password"}),Object(K.jsx)("input",{type:"text",name:"password",value:p,onInput:function(e){return m(e.target.value)}})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"note"}),Object(K.jsx)("textarea",{name:"note",value:C,onInput:function(e){return y(e.target.value)}})]}),Object(K.jsx)("div",{children:Object(K.jsx)("button",{type:"submit",children:"create"})})]})]})};var Se=function(){var e=Object(c.useState)(null),t=Object(Y.a)(e,2),n=t[0],r=t[1],a=Object(i.c)(),s=a.route,u=a.router;return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ue(s.params.id).then((function(e){r(e)})).catch((function(){return u.navigate("home")}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}}),[s.params.id]),Object(K.jsxs)("div",{className:"Page Profile",children:[Object(K.jsx)("div",{children:"ItemPage"}),n?Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"name"}),Object(K.jsx)("input",{type:"text",value:n.name,readOnly:!0})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"url"}),Object(K.jsx)("input",{type:"text",value:n.url,readOnly:!0})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"username"}),Object(K.jsx)("input",{type:"text",value:n.username,readOnly:!0})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"password"}),Object(K.jsx)("input",{type:"text",value:n.password,readOnly:!0})]}),Object(K.jsxs)("div",{children:[Object(K.jsx)("div",{children:"note"}),Object(K.jsx)("textarea",{value:n.note,readOnly:!0})]})]}):null]})};var Ee=function(){return Object(K.jsx)("div",{className:"page -not-found",children:Object(K.jsx)("div",{children:"404"})})};n(71);var Le=function(){return Object(K.jsx)("div",{className:"component -page-loader flex center",children:Object(K.jsx)(Q,{})})},Re=n(8),Ie=Object(h.e)([]).on(S,(function(e,t){var n=new Set([].concat(Object(Re.a)(e),[t]));return e=Array.from(n)})).on(E,(function(e,t){return e=e.filter((function(e){return e!==t}))})).on(L,(function(e){return e=e.slice(0,1)})).on(R,(function(){return[]}));var _e=function(){return Object(K.jsx)("div",{className:"icon -cross",children:Object(K.jsx)("div",{children:"x"})})};n(72);var Me=function(e){void 0===e.closable&&(e.closable=!0);var t=Object(c.useState)(!1),n=Object(Y.a)(t,2),r=n[0],a=n[1],s=Object(F.a)(Ie),i=Object(c.useState)(!1),u=Object(Y.a)(i,2),o=u[0],l=u[1],j="component modal -".concat(e.id," -size-").concat(e.size||"default");Object(c.useEffect)((function(){a(!0)}),[]),Object(c.useEffect)((function(){var t=Ie.watch((function(t){l(t.includes(e.id))}));return function(){t()}}),[s]),Object(c.useEffect)((function(){r&&(o&&e.onOpen&&e.onOpen(),!o&&e.onClose&&e.onClose())}),[o]);var d=function(){e.closable&&E(e.id)};return o?Object(K.jsx)("div",{className:j,onClick:function(e){var t=e.target;t.classList.contains("Modal")&&t.classList.contains("Component")&&d()},children:Object(K.jsxs)("dialog",{open:!0,className:"dialog",children:[e.closable&&Object(K.jsx)("div",{className:"close",onClick:d,children:Object(K.jsx)(_e,{})}),Object(K.jsx)("div",{className:"head",children:Object(K.jsx)("div",{className:"h2 flex center",children:e.heading})}),Object(K.jsx)("div",{className:"body",children:e.children})]})}):null};var Pe=function(){var e="set_security_code",t=Object(c.useState)(""),n=Object(Y.a)(t,2),r=n[0],a=n[1],s=null,i=function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,M();case 3:E(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,z(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){ae((function(){var e;null===(e=s)||void 0===e||e.focus()}))}),[s]),Object(K.jsxs)(Me,{id:e,closable:!1,children:[Object(K.jsxs)("form",{onSubmit:u,children:[Object(K.jsx)("div",{children:"Set your security code:"}),Object(K.jsx)("div",{children:Object(K.jsx)("input",{type:"text",ref:function(e){s=e},value:r,onInput:function(e){return a(e.target.value)}})}),Object(K.jsx)("div",{children:Object(K.jsx)("button",{type:"submit",children:"Set"})}),Object(K.jsx)("div",{children:"Do not forget your secret code!"})]}),Object(K.jsx)("div",{children:Object(K.jsx)("a",{href:"#",onClick:i,children:"logout"})})]})};n(73);var De=function(){var e=Object(c.useState)(!1),t=Object(Y.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=Ie.watch((function(e){r(!!e.length)}));return function(){e()}})),Object(K.jsx)("div",{className:"Modal Controller ".concat(n?"-active":""),children:Object(K.jsx)(Pe,{})})};var ze=function(){var e=Object(i.c)().route,t=Object(F.a)(H);function n(){switch(e.name){case"home":return Object(K.jsx)(ce,{children:Object(K.jsx)(pe,{})});case"auth":return Object(K.jsx)(re,{children:Object(K.jsx)(Ce,{})});case"unlock":return Object(K.jsx)(re,{children:Object(K.jsx)(ye,{})});case"profile":return Object(K.jsx)(ce,{children:Object(K.jsx)(me,{})});case"add":return Object(K.jsx)(ce,{children:Object(K.jsx)(Ne,{})});case"item":return Object(K.jsx)(ce,{children:Object(K.jsx)(Se,{})});default:return Object(K.jsx)(re,{children:Object(K.jsx)(Ee,{})})}}return Object(c.useEffect)((function(){var e=X.watch((function(e){e&&D()}));return function(){e()}}),[]),Object(c.useEffect)((function(){y()}),[t]),e?Object(K.jsxs)("div",{className:"app",children:[Object(K.jsx)(n,{}),Object(K.jsx)(De,{})]}):Object(K.jsx)(Le,{})},Be=(n(74),J());s.a.render(Object(K.jsx)(i.b,{router:Be,children:Object(K.jsx)(ze,{})}),document.getElementById("root")),Be.start((function(){X(!0)}))}},[[75,1,2]]]);
//# sourceMappingURL=main.32cfddca.chunk.js.map