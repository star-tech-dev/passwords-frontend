{"version":3,"sources":["router/routes.ts","store/auth/domain.ts","store/locker/domain.ts","store/modals/domain.ts","store/modals/events.ts","api/index.ts","store/locker/events.ts","store/auth/events.ts","store/auth/store.ts","router/middlewares/session.ts","router/middlewares/accessor.ts","router/index.ts","store/app/events.ts","store/app/domain.ts","report-web-vitals.ts","store/locker/store.ts","components/header/index.tsx","layouts/default.tsx","layouts/simple/index.tsx","store/items/domain.ts","store/items/events.ts","store/items/store.ts","components/items/item.tsx","components/items/index.tsx","pages/home.tsx","pages/profile.tsx","helpers/next-tick.ts","components/icons/info.tsx","components/ui/input/index.tsx","components/loader/round/index.tsx","components/ui/button/index.tsx","components/auth/login-form/index.tsx","components/auth/register-form.tsx","pages/auth/index.tsx","helpers/validator.ts","pages/add-item.tsx","pages/item.tsx","pages/not-found.tsx","components/loader/page-loader/index.tsx","store/modals/store.ts","components/icons/cross.tsx","components/modals/wrapper/index.tsx","components/modals/set-security-code.tsx","components/modals/locker.tsx","components/modals/controller/index.tsx","app.tsx","index.tsx"],"names":["name","path","forGuests","private","AuthDomain","createDomain","LockerDomain","ModalsDomain","openModal","createEvent","closeModal","closeLastModal","closeAllModals","sendRequest","options","mergedOptions","method","withCredentials","url","process","Object","prototype","hasOwnProperty","call","params","data","axios","then","res","catch","err","response","status","lock","createEffect","use","unlock","securityCode","checkIsAppLocked","setIsAppLocked","register","effect","payload","username","password","login","logout","checkAuth","user","checkUserSecurityCode","event","setUserSecurityCode","$auth","store","on","done","state","result","isAppLocked","hasSecurityCode","a","getState","sessionMiddleware","routes","router","toState","fromState","onActivateHandlers","transitionPath","toActivate","map","segment","find","r","onActivate","filter","Boolean","Promise","all","callback","_checkAuth","routeData","reduce","accData","rData","assign","canActivate","routeName","foundRoute","i","isRouterOnlyForGuests","isRouterOnlyForAuthed","accessor","cancel","configureRouter","createRouter","defaultRoute","usePlugin","loggerPlugin","browserPlugin","useMiddleware","setMounted","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","$locker","createStore","isLocked","value","Header","useStore","authStore","className","href","onClick","e","preventDefault","DefaultLayout","children","SimpleLayout","ItemsDomain","getItems","getItem","id","createItem","$items","push","Item","title","_id","useRouter","navigate","Items","items","useRoute","onMounted","useEffect","item","HomePage","ProfilePage","redirect","sendLogoutRequest","type","readOnly","checked","nextTick","cb","setTimeout","InfoIcon","props","width","height","viewBox","version","xmlns","stroke","strokeWidth","fill","fillRule","transform","d","Input","forwardRef","ref","useRef","useState","error","localError","setLocalError","innerRef","classList","focus","current","select","console","log","displayName","RoundLoader","Button","fullWidth","loading","buttonProps","Index","onRegisterShow","loginUsername","setLoginUsername","loginPassword","setLoginPassword","usernameError","setUsernameError","passwordError","setPasswordError","usernameField","React","createRef","passwordField","isLoading","setIsLoading","sendLoginRequest","successResponse","onSubmit","errorsFound","length","field","message","validateForm","forEach","placeholder","onInput","onChange","target","onBlur","RegisterForm","onLoginShow","registerUsername","setRegisterUsername","registerPassword","setRegisterPassword","registerEmail","setRegisterEmail","sendRegisterRequest","email","AuthPage","mode","setMode","isAllFieldsEmpty","exclude","isFilled","entries","every","pair","includes","AddItemPage","setName","setUrl","setUsername","setPassword","note","setNote","create","group","alert","ItemPage","setData","route","_getData","NotFound","Loader","$modals","set","Set","Array","from","slice","CrossIcon","ModalWrapper","closable","heading","modals","show","setShow","unwatch","watch","close","contains","open","SetSecurityCodeModal","code","setCode","codeField","_logout","element","LockerModal","ModalController","App","locker","Switch","unwatchMounted","mounted","ReactDOM","render","document","getElementById","start"],"mappings":"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","file":"static/js/main.319c003f.chunk.js","sourcesContent":["export default [\n  {\n    name: 'home',\n    path: '/'\n  },\n  {\n    name: 'auth',\n    path: '/auth',\n    forGuests: true\n  },\n  {\n    name: 'item',\n    path: '/item/:id',\n    private: true\n  },\n  {\n    name: 'profile',\n    path: '/profile',\n    private: true\n  },\n  {\n    name: 'add',\n    path: '/add',\n    private: true\n  },\n  {\n    name: '404',\n    path: '/404'\n  }\n]\n","import { createDomain } from 'effector'\n\nexport const AuthDomain = createDomain()\n","import { createDomain } from 'effector'\n\nexport const LockerDomain = createDomain()\n","import { createDomain } from 'effector'\n\nexport const ModalsDomain = createDomain()\n","import { ModalsDomain } from './domain'\nimport { ModalName } from './types'\n\nexport const openModal = ModalsDomain.createEvent<ModalName>('open modal')\n\nexport const closeModal = ModalsDomain.createEvent<ModalName>('close modal')\n\nexport const closeLastModal = ModalsDomain.createEvent('close last modal')\n\nexport const closeAllModals = ModalsDomain.createEvent('close all modals')\n","import axios, { AxiosRequestConfig } from 'axios'\nimport { openModal } from '../store/modals/events'\n\nexport const sendRequest = (options: AxiosRequestConfig) => {\n  const mergedOptions = {\n    method: 'get',\n    withCredentials: true,\n    ...options\n  } as AxiosRequestConfig\n\n  mergedOptions.url = `${process.env.REACT_APP_API_BASE_URL}${options.url}`\n\n  if (mergedOptions.method === 'get' && Object.prototype.hasOwnProperty.call(mergedOptions, 'data')) {\n    mergedOptions.params = options.data\n    delete mergedOptions.data\n  }\n\n  return axios(mergedOptions)\n    .then(res => res.data)\n    .catch(err => {\n      if (err.response.status === 423) {\n        openModal('locker')\n      }\n      throw err\n    })\n}\n\nexport default { sendRequest }\n","import { LockerDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { SecurityCode } from './types'\n\nexport const lock = LockerDomain.createEffect<void, void>().use(() => {\n  return sendRequest({\n    method: 'post',\n    url: '/lock'\n  })\n})\n\nexport const unlock = LockerDomain.createEffect<SecurityCode, void>().use((securityCode: SecurityCode) => {\n  return sendRequest({\n    method: 'post',\n    url: '/unlock',\n    data: { securityCode }\n  })\n})\n\nexport const checkIsAppLocked = LockerDomain.createEvent()\n\nexport const setIsAppLocked = LockerDomain.createEvent<boolean>()\n","import { AuthDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { RegisterPayload, User, LoginPayload, LoginResponse, AuthCheckResponse, SecurityCode } from './types'\n\nexport const register = AuthDomain.effect<RegisterPayload, User>().use((payload) => {\n  return sendRequest({\n    method: 'post',\n    data: {\n      username: payload.username,\n      password: payload.password\n    },\n    url: '/register'\n  })\n})\n\nexport const login = AuthDomain.effect<LoginPayload, LoginResponse>().use((payload) => {\n  return sendRequest({\n    method: 'post',\n    data: {\n      username: payload.username,\n      password: payload.password\n    },\n    url: '/login'\n  })\n})\n\nexport const logout = AuthDomain.effect<void, void>().use(() => {\n  return sendRequest({\n    url: '/logout'\n  }).catch(() => null)\n})\n\nexport const checkAuth = AuthDomain.effect<void, AuthCheckResponse>().use(() => {\n  return sendRequest({\n    url: '/auth'\n  }).catch(() => ({ user: null }))\n})\n\nexport const checkUserSecurityCode = AuthDomain.event()\n\nexport const setUserSecurityCode = AuthDomain.effect<SecurityCode, void>().use((securityCode) => {\n  return sendRequest({\n    method: 'post',\n    url: '/security-code',\n    data: { securityCode }\n  })\n})\n","import { AuthState } from './types'\nimport { AuthDomain } from './domain'\nimport { checkIsAppLocked, setIsAppLocked } from '../locker/events'\nimport { closeModal, openModal } from '../modals/events'\nimport { register, login, logout, checkAuth, checkUserSecurityCode, setUserSecurityCode } from './events'\n\nconst initialState: AuthState = {\n  user: null\n}\n\nexport const $auth = AuthDomain.store<AuthState>(initialState)\n  .on(register.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result\n    }\n    return state\n  })\n  .on(login.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result.user\n    }\n    checkIsAppLocked()\n    return state\n  })\n  .on(logout.done, (state) => {\n    state = {\n      ...state,\n      user: null\n    }\n    return state\n  })\n  .on(checkAuth.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result.user\n    }\n    setIsAppLocked(result.isAppLocked)\n    return state\n  })\n  .on(checkUserSecurityCode, (state) => {\n    if (!state.user) {\n      return state\n    }\n    if (!state.user.hasSecurityCode) {\n      openModal('set_security_code')\n    }\n    return state\n  })\n  .on(setUserSecurityCode, (state) => {\n    closeModal('set_security_code')\n    return state\n  })\n\nexport default $auth\n","import transitionPath from 'router5-transition-path'\nimport { $auth } from '../../store/auth/store'\nimport { checkAuth } from '../../store/auth/events'\nimport { State } from 'router5/dist/types/base'\nimport { Router } from 'router5/dist/types/router'\n\nasync function _checkAuth (data: any) {\n  const user = $auth.getState().user\n  if (!user) {\n    await checkAuth()\n  }\n  return data\n}\n\nexport const sessionMiddleware = (routes: any) => (router: Router) => (toState: State, fromState: State) => {\n  const { toActivate } = transitionPath(toState, fromState)\n  const onActivateHandlers =\n    toActivate\n      .map(segment => routes.find((r: State) => r.name === segment).onActivate)\n      .filter(Boolean)\n\n  return Promise\n    .all(onActivateHandlers.map(callback => callback()))\n    .then(data => {\n      // actions before app mounting\n      return _checkAuth(data)\n    })\n    .then(data => {\n      const routeData = data.reduce((accData: any, rData: any) => Object.assign(accData, rData), {})\n      return { ...toState, data: routeData }\n    })\n}\n\nexport default { sessionMiddleware }\n","import { $auth } from '../../store/auth/store'\nimport routes from '../routes'\nimport { State } from 'router5/dist/types/base'\n\nfunction showOnlyForGuests (): boolean {\n  const user = $auth.getState().user\n  return !user\n}\n\nfunction showOnlyForAuthed (): boolean {\n  const user = $auth.getState().user\n  return !!user\n}\n\nconst canActivate = (routeName: string): boolean => {\n  const foundRoute = routes.find(i => i.name === routeName)\n  const isRouterOnlyForGuests = foundRoute ? !!foundRoute.forGuests : false\n  const isRouterOnlyForAuthed = foundRoute ? !!foundRoute.private : false\n\n  if (isRouterOnlyForGuests) {\n    return showOnlyForGuests()\n  } else if (isRouterOnlyForAuthed) {\n    return showOnlyForAuthed()\n  } else {\n    return true\n  }\n}\n\nexport const accessor = (router: any) => (toState: State, fromState: State, done: any) => {\n  if (!canActivate(toState.name)) {\n    return router.cancel()\n  }\n  done()\n}\n\nexport default { accessor }\n","import createRouter from 'router5'\nimport loggerPlugin from 'router5-plugin-logger'\nimport browserPlugin from 'router5-plugin-browser'\n\n// routes\nimport routes from './routes'\n\n// middlewares\nimport { sessionMiddleware } from './middlewares/session'\nimport { accessor } from './middlewares/accessor'\n\nexport function configureRouter () {\n  const router = createRouter(routes, {\n    defaultRoute: 'home'\n  })\n\n  router.usePlugin(loggerPlugin)\n  router.usePlugin(browserPlugin())\n\n  // middleware\n  router.useMiddleware(sessionMiddleware(routes), accessor)\n\n  return router\n}\n\nexport default { configureRouter }\n","import { MountedState } from './types'\nimport { AppDomain } from './domain'\n\nexport const setMounted = AppDomain.event<MountedState>()\n","import { createDomain } from 'effector'\n\nexport const AppDomain = createDomain()\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import { createStore } from 'effector'\nimport { closeModal, openModal } from '../modals/events'\nimport { checkIsAppLocked, lock, setIsAppLocked, unlock } from './events'\nimport { State } from './types'\n\nconst initialState: State = {\n  isLocked: false\n}\n\nexport const $locker = createStore(initialState)\n  .on(lock.done, state => {\n    state = {\n      ...state,\n      isLocked: true\n    }\n    return state\n  })\n  .on(unlock.done, state => {\n    state = {\n      ...state,\n      isLocked: false\n    }\n    return state\n  })\n  .on(checkIsAppLocked, state => {\n    state.isLocked\n      ? openModal('locker')\n      : closeModal('locker')\n    return state\n  })\n  .on(setIsAppLocked, (state, value) => {\n    state.isLocked = value\n    checkIsAppLocked()\n    return state\n  })\n\nexport default $locker\n","import React from 'react'\nimport { Link } from 'react-router5'\nimport { useStore } from 'effector-react'\nimport { lock } from '../../store/locker/events'\nimport { $auth as authStore } from '../../store/auth/store'\n\nimport './_index.scss'\n\nfunction Header () {\n  const $auth = useStore(authStore)\n  const user = $auth.user\n\n  const lockApp = (e: React.FormEvent) => {\n    e.preventDefault()\n    lock()\n  }\n\n  return (\n    <header className=\"Header Component flex a-center j-between\">\n      <nav>\n        <Link routeName=\"home\">Home</Link>\n        <Link routeName=\"auth\">Auth</Link>\n        <Link routeName=\"profile\">Profile</Link>\n      </nav>\n      <div className=\"flex a-center\">\n        <div>\n          <a href=\"#\" onClick={lockApp}>lock</a>\n        </div>\n        <div>user: {user ? user.username : 'null'}</div>\n      </div>\n    </header>\n  )\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport HeaderComponent from '../components/header'\n\nconst DefaultLayout: React.FC = ({ children }) => {\n  return (\n    <div className=\"layout -default\">\n      <div className=\"container\">\n        <HeaderComponent />\n\n        <main>\n          {children}\n        </main>\n      </div>\n    </div>\n  )\n}\n\nDefaultLayout.propTypes = {\n  children: PropTypes.node\n}\n\nexport default DefaultLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport './_index.scss'\n\nconst SimpleLayout: React.FC = ({ children }) => {\n  return (\n    <div className=\"layout -simple\">\n      <main>\n        <div className=\"container\">\n          {children}\n        </div>\n      </main>\n    </div>\n  )\n}\n\nSimpleLayout.propTypes = {\n  children: PropTypes.node\n}\n\nexport default SimpleLayout\n","import { createDomain } from 'effector'\n\nexport const ItemsDomain = createDomain()\n","import { ItemsDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { ItemId, Item, ItemPayload } from './types'\n\nexport const getItems = ItemsDomain.createEffect<void, Array<Item>>().use(() => {\n  return sendRequest({\n    url: '/items'\n  }).catch(() => [])\n})\n\nexport const getItem = ItemsDomain.createEffect<ItemId, Item>().use(id => {\n  return sendRequest({\n    data: { id },\n    url: '/item'\n  })\n})\n\nexport const createItem = ItemsDomain.createEffect<ItemPayload, Item>().use(payload => {\n  return sendRequest({\n    method: 'post',\n    data: payload,\n    url: '/items'\n  })\n})\n","import { createStore } from 'effector'\nimport { createItem, getItems } from './events'\nimport { State } from './types'\n\nconst initialState: State = []\n\nexport const $items = createStore(initialState)\n  .on(getItems.done, (state, { result }) => {\n    state = result\n    return state\n  })\n  .on(createItem.done, (state, { result }) => {\n    if (result) {\n      state.push(result)\n    }\n    return state\n  })\n\nexport default $items\n","import React from 'react'\nimport { useRouter } from 'react-router5'\nimport { Item as ItemInterface } from '../../store/items/types'\n\ninterface ItemProps {\n  data: ItemInterface\n}\n\nfunction Item ({ data }: ItemProps) {\n  const title = `${data.name} (${data._id})` || data.url || `Item ${data._id}`\n  const router = useRouter()\n\n  const onClick = () => {\n    router.navigate('item', { id: data._id })\n  }\n\n  return (\n    <div className=\"Item Component\" onClick={onClick}>\n      <div>{title}</div>\n    </div>\n  )\n}\n\nexport default Item\n","import React, { useEffect } from 'react'\nimport { useStore } from 'effector-react'\nimport { useRoute } from 'react-router5'\nimport { $items } from '../../store/items/store'\nimport { getItems } from '../../store/items/events'\nimport Item from './item'\n\nfunction Items () {\n  const items = useStore($items)\n  const { router } = useRoute()\n\n  const list = () => items.map(item => {\n    return <Item data={item} key={item._id} />\n  })\n\n  function goToAdd () {\n    router.navigate('add')\n  }\n\n  const onMounted = async () => {\n    await getItems()\n  }\n\n  useEffect(() => {\n    onMounted()\n  }, [])\n\n  return (\n    <div className=\"Items Component\">\n      <div>\n        {list()}\n      </div>\n      <div>\n        <button onClick={goToAdd}>add</button>\n      </div>\n    </div>\n  )\n}\n\nexport default Items\n","import React, { useEffect } from 'react'\nimport { useRouter } from 'react-router5'\nimport { useStore } from 'effector-react'\nimport { $auth } from '../store/auth/store'\n\nimport Items from '../components/items'\n\nfunction HomePage () {\n  const user = useStore($auth).user\n  const router = useRouter()\n\n  useEffect(() => {\n    if (!user) {\n      router.navigate('auth')\n    }\n  }, [user])\n\n  return (\n    <div className=\"page -home\">\n      <div>\n        <div>Items</div>\n        <div>\n          <Items />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React, { useEffect } from 'react'\nimport { $auth } from '../store/auth/store'\nimport { logout as sendLogoutRequest } from '../store/auth/events'\nimport { useRouter } from 'react-router5'\nimport { useStore } from 'effector-react'\n\nfunction ProfilePage () {\n  const router = useRouter()\n  const user = useStore($auth).user\n\n  const redirect = () => {\n    router.navigate('home')\n  }\n\n  const logout = async () => {\n    await sendLogoutRequest()\n    redirect()\n  }\n\n  useEffect(() => {\n    if (!user) {\n      redirect()\n    }\n  }, [user])\n\n  if (user) {\n    return (\n      <div className=\"page -profile\">\n        <div>ProfilePage</div>\n        <div className=\"flex a-center\">\n          <div>name</div>\n          <input type=\"text\" value={user.username} readOnly />\n        </div>\n        <div className=\"flex a-center\">\n          <div>hasSecurityCode</div>\n          <input type=\"checkbox\" checked={user.hasSecurityCode} readOnly />\n        </div>\n        <div>\n          <button onClick={logout}>logout</button>\n        </div>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default ProfilePage\n","/**\n * next tick helper\n * @param cb {function}\n */\nexport const nextTick = (cb: any) => {\n  setTimeout(cb, 0)\n}\n\nexport default {\n  nextTick\n}\n","import React from 'react'\n\ninterface IconOptions extends React.HTMLAttributes<any> {}\n\nfunction InfoIcon (props: IconOptions) {\n  return (\n    <div {...props} className=\"icon -cross\">\n      <svg width=\"18px\" height=\"18px\" viewBox=\"0 0 18 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n          <g transform=\"translate(-410.000000, -395.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n            <g transform=\"translate(121.000000, 380.000000)\">\n              <g id=\"information\" transform=\"translate(289.000000, 15.000000)\">\n                <path d=\"M9,0 C13.9626,0 18,4.03745455 18,9.00005455 C18,13.9626545 13.9626,18 9,18 C4.0374,18 0,13.9626545 0,9.00005455 C0,4.03745455 4.0374,0 9,0 Z M9,7.63636364 C8.54814545,7.63636364 8.18181818,8.00269091 8.18181818,8.45454545 L8.18181818,13.3636364 C8.18181818,13.8154909 8.54814545,14.1818182 9,14.1818182 C9.45185455,14.1818182 9.81818182,13.8154909 9.81818182,13.3636364 L9.81818182,8.45454545 C9.81818182,8.00269091 9.45185455,7.63636364 9,7.63636364 Z M8.99989091,3.81818182 C8.39847273,3.81818182 7.9092,4.30778182 7.9092,4.90958182 C7.9092,5.51083636 8.39847273,6 8.99989091,6 C9.60130909,6 10.0905818,5.51083636 10.0905818,4.90958182 C10.0905818,4.30778182 9.60130909,3.81818182 8.99989091,3.81818182 Z\"></path>\n              </g>\n            </g>\n          </g>\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport default InfoIcon\n","import React, { forwardRef, useEffect, useRef, useState } from 'react'\nimport { nextTick } from '../../../helpers/next-tick'\n\nimport IconInfo from '../../icons/info'\n\nimport './_index.scss'\n\ninterface InputOptions extends React.InputHTMLAttributes<any> {\n  error?: any\n}\n\nconst Input = forwardRef((props: InputOptions, ref) => {\n  if (!ref) {\n    ref = useRef()\n  }\n\n  const [localError, setLocalError] = useState(props.error)\n  const innerRef = useRef(null)\n  const classList = `input -component ${props.error ? '-error' : ''}`\n\n  const focus = () => {\n    nextTick(() => {\n      innerRef.current && (innerRef.current as HTMLInputElement | null)?.focus()\n    })\n  }\n\n  const select = () => {\n    nextTick(() => {\n      innerRef.current && (innerRef.current as HTMLInputElement | null)?.select()\n    })\n  }\n\n  useEffect(() => {\n    // @ts-ignore\n    ref.current = { focus, select }\n    console.log('setting by props', props.error)\n    setLocalError(props.error)\n  }, [props])\n\n  return (\n    <div className={classList}>\n      <div className=\"buttons\">\n        {localError\n          ? <div className=\"icon-error\">\n          <IconInfo title={localError} />\n        </div>\n          : null}\n      </div>\n      <input {...props} ref={innerRef} type={props.type || 'text'} />\n    </div>\n  )\n})\n\nInput.displayName = 'Input'\n\nexport default Input\n","import React from 'react'\n\nimport './_index.scss'\n\nfunction RoundLoader () {\n  return (\n    <div className=\"component -loader-round\">\n      <svg className=\"svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n          <g transform=\"translate(-629.000000, -385.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n            <path d=\"M631.20799,398.4917 C631.37363,398.8603 631.2091,399.2933 630.8405,399.459 C630.4719,399.6246 630.03881,399.4601 629.873162,399.0915 C629.300253,397.8166 629,396.4285 629,395 C629,389.47726 633.47726,385 639,385 C644.5227,385 649,389.47726 649,395 C649,400.5227 644.5227,405 639,405 C636.65339,405 634.42972,404.1881 632.65267,402.7281 C632.34042,402.4715 632.29526,402.0105 632.55179,401.6982 C632.80833,401.386 633.26941,401.3408 633.58166,401.5973 C635.09934,402.8442 636.9955,403.5366 639,403.5366 C643.7145,403.5366 647.5366,399.7145 647.5366,395 C647.5366,390.28549 643.7145,386.46341 639,386.46341 C634.28549,386.46341 630.46341,390.28549 630.46341,395 C630.46341,396.2208 630.71947,397.4046 631.20799,398.4917 Z\" id=\"Path\"></path>\n          </g>\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport default RoundLoader\n","import React, { forwardRef, useEffect, useRef } from 'react'\n\nimport LoaderRound from '../../loader/round'\n\nimport './_index.scss'\n\ninterface ButtonOptions extends React.ButtonHTMLAttributes<any> {\n  fullWidth?: boolean,\n  loading?: boolean\n}\n\nconst Button = forwardRef((props: ButtonOptions, ref) => {\n  if (!ref) {\n    ref = useRef()\n  }\n\n  const classList = `button -component ${props.fullWidth ? '-full-width' : ''} ${props.loading ? '-loading' : ''}`\n  const innerRef = useRef(null)\n  let buttonProps = {} as ButtonOptions\n\n  useEffect(() => {\n    // @ts-ignore\n    ref.current = {}\n\n    buttonProps = { ...props }\n    delete buttonProps.fullWidth\n    delete buttonProps.loading\n  }, [props])\n\n  return (\n    <div className={classList}>\n      <button {...buttonProps} ref={innerRef}>\n        { props.loading\n          ? <div className=\"loader\">\n            <LoaderRound />\n          </div>\n          : props.children }\n      </button>\n    </div>\n  )\n})\n\nButton.displayName = 'Button'\n\nexport default Button\n","import React, { useEffect, useState } from 'react'\nimport { useRouter } from 'react-router5'\nimport { checkUserSecurityCode, login as sendLoginRequest } from '../../../store/auth/events'\nimport { nextTick } from '../../../helpers/next-tick'\n\nimport UIInput from '../../ui/input'\nimport UIButton from '../../ui/button'\n\nimport './_index.scss'\n\ninterface LoginFormOptions {\n  onRegisterShow?: () => void\n}\n\nfunction Index ({ onRegisterShow }: LoginFormOptions) {\n  const [loginUsername, setLoginUsername] = useState('')\n  const [loginPassword, setLoginPassword] = useState('')\n  const [usernameError, setUsernameError] = useState('')\n  const [passwordError, setPasswordError] = useState('')\n\n  const router = useRouter()\n\n  const usernameField = React.createRef()\n  const passwordField = React.createRef()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const login = async () => {\n    setIsLoading(true)\n    const successResponse = await sendLoginRequest({\n      username: loginUsername,\n      password: loginPassword\n    }).then(() => true)\n      .catch(() => {\n        (passwordField.current as any).focus();\n        (passwordField.current as any).select()\n        setPasswordError('Failed to sign in')\n        return false\n      })\n\n    setIsLoading(false)\n\n    if (successResponse) {\n      await router.navigate('home')\n      checkUserSecurityCode()\n    }\n  }\n\n  const validateForm = () => {\n    const res = []\n\n    if (!loginUsername.length) {\n      res.push({\n        field: 'username',\n        message: 'The field cannot be empty'\n      });\n      (usernameField.current as any).focus()\n      return res\n    }\n    if (!loginPassword.length) {\n      res.push({\n        field: 'password',\n        message: 'The field cannot be empty'\n      })\n      if (loginUsername.length) {\n        (passwordField.current as any).focus()\n      }\n    }\n\n    return res\n  }\n\n  // const updateErrors = () => {\n  //   //\n  // }\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    const errorsFound = validateForm()\n\n    if (errorsFound.length) {\n      errorsFound.forEach(error => {\n        switch (error.field) {\n          case 'username':\n            setUsernameError(error.message)\n            break\n          case 'password':\n            setPasswordError(error.message)\n            break\n        }\n      })\n      console.log({\n        username: loginUsername,\n        password: loginPassword\n      })\n      return\n    }\n\n    login()\n  }\n\n  const goToRegister = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (onRegisterShow) {\n      onRegisterShow()\n    }\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      (usernameField.current as any).focus()\n    })\n  }, [])\n\n  return (\n    <div className=\"component -login-form\">\n      <form onSubmit={onSubmit}>\n        <div>\n          <UIInput\n            ref={usernameField}\n            placeholder=\"Username\"\n            error={usernameError}\n            onInput={() => setUsernameError('')}\n            onChange={e => setLoginUsername(e.target.value)}\n            onBlur={e => !e.target.value.length ? setUsernameError('') : null } />\n        </div>\n        <div>\n          <UIInput\n            ref={passwordField}\n            type=\"password\"\n            placeholder=\"Password\"\n            error={passwordError}\n            onInput={() => setPasswordError('')}\n            onChange={e => setLoginPassword(e.target.value)}\n            onBlur={e => !e.target.value.length ? setPasswordError('') : null } />\n        </div>\n\n        <div className=\"button-block\">\n          <UIButton type=\"submit\" loading={isLoading} fullWidth={true}>Sign in</UIButton>\n        </div>\n        <div>\n          <span>or </span>\n          <a href=\"#\" onClick={goToRegister}>create new account</a>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default Index\n","import React, { useEffect, useState } from 'react'\nimport { useRouter } from 'react-router5'\nimport { checkUserSecurityCode, register as sendRegisterRequest } from '../../store/auth/events'\nimport { nextTick } from '../../helpers/next-tick'\n\nimport UIInput from '../ui/input'\nimport UIButton from '../ui/button'\n\ninterface RegisterFormOptions {\n  onLoginShow?: () => void\n}\n\nfunction RegisterForm ({ onLoginShow }: RegisterFormOptions) {\n  const [registerUsername, setRegisterUsername] = useState('')\n  const [registerPassword, setRegisterPassword] = useState('')\n  const [registerEmail, setRegisterEmail] = useState('')\n\n  const router = useRouter()\n  const usernameField = React.createRef()\n\n  const register = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await sendRegisterRequest({\n      username: registerUsername,\n      email: registerEmail,\n      password: registerPassword\n    }).then(async () => {\n      await router.navigate('home')\n      checkUserSecurityCode()\n    })\n  }\n\n  const goToLogin = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (onLoginShow) {\n      onLoginShow()\n    }\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      (usernameField.current as any).focus()\n    })\n  }, [])\n\n  return (\n    <div className=\"component -register-form\">\n      <form onSubmit={register}>\n        <div>\n          <UIInput ref={usernameField} placeholder=\"Username\" onChange={e => setRegisterUsername(e.target.value)} />\n        </div>\n        <div>\n          <UIInput type=\"email\" placeholder=\"Email\" onChange={e => setRegisterEmail(e.target.value)} />\n        </div>\n        <div>\n          <UIInput placeholder=\"Password\" onChange={e => setRegisterPassword(e.target.value)} />\n        </div>\n        <div className=\"button-block\">\n          <UIButton type=\"submit\" fullWidth={true}>Sign up</UIButton>\n        </div>\n        <div>\n          <span>or </span>\n          <a href=\"#\" onClick={goToLogin}>return to login</a>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default RegisterForm\n","import React, { useState } from 'react'\n\nimport LoginForm from '../../components/auth/login-form'\nimport RegisterForm from '../../components/auth/register-form'\n\nimport './_index.scss'\n\nfunction AuthPage () {\n  const [mode, setMode] = useState('login')\n\n  return (\n    <div className=\"page -auth\">\n      <h1>\n        {mode === 'register'\n          ? <span>Let&apos;s create a new account:</span>\n          : <span>Hi, I&apos;m your password manager.</span> }\n      </h1>\n\n      <div className=\"container -narrow\">\n        {mode === 'register'\n          ? <RegisterForm onLoginShow={() => setMode('login')} />\n          : <LoginForm onRegisterShow={() => setMode('register')} /> }\n      </div>\n    </div>\n  )\n}\n\nexport default AuthPage\n","/**\n * is all fields empty helper\n * @param data {object}\n * @param exclude {array}\n * @returns {boolean}\n */\nexport const isAllFieldsEmpty = (data: object, exclude: string[] = []) => {\n  let isFilled = false\n  Object.entries(data).every(pair => {\n    if (exclude.includes(pair[0])) {\n      return true\n    }\n    if (pair[1]) {\n      isFilled = true\n      return false\n    }\n    return true\n  })\n  return !isFilled\n}\n\nexport default {\n  isAllFieldsEmpty\n}\n","import React, { useState } from 'react'\nimport { useRoute } from 'react-router5'\nimport { createItem } from '../store/items/events'\nimport { isAllFieldsEmpty } from '../helpers/validator'\n\nfunction AddItemPage () {\n  const { router } = useRoute()\n  const [name, setName] = useState('')\n  const [url, setUrl] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [note, setNote] = useState('')\n\n  const create = async (e: React.FormEvent) => {\n    e.preventDefault()\n    const item = {\n      group: null,\n      name,\n      url,\n      username,\n      password,\n      note\n    }\n\n    if (isAllFieldsEmpty(item, ['group'])) {\n      alert('Cannot save empty item.')\n    } else {\n      const res = await createItem(item)\n      router.navigate('item', { id: res._id })\n    }\n  }\n\n  return (\n    <div className=\"Page Home\">\n      <div>Add newItem:</div>\n      <form onSubmit={create}>\n        <div>\n          <div>name</div>\n          <input type=\"text\" name=\"name\" value={name} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}/>\n        </div>\n        <div>\n          <div>url</div>\n          <input type=\"text\" name=\"url\" value={url} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUrl(e.target.value)}/>\n        </div>\n        <div>\n          <div>username</div>\n          <input type=\"text\" name=\"username\" value={username} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUsername(e.target.value)}/>\n        </div>\n        <div>\n          <div>password</div>\n          <input type=\"text\" name=\"password\" value={password} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setPassword(e.target.value)}/>\n        </div>\n        <div>\n          <div>note</div>\n          <textarea name=\"note\" value={note} onInput={(e: React.ChangeEvent<HTMLTextAreaElement>) => setNote(e.target.value)}/>\n        </div>\n        <div>\n          <button type=\"submit\">create</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default AddItemPage\n","import React, { useEffect, useState } from 'react'\nimport { useRoute } from 'react-router5'\nimport { getItem } from '../store/items/events'\nimport { Item } from '../store/items/types'\n\nfunction ItemPage () {\n  // @ts-ignore // null as initial state\n  const [data, setData] = useState<Item>(null)\n  const { route, router } = useRoute()\n\n  useEffect(() => {\n    async function _getData () {\n      getItem(route.params.id).then(res => {\n        setData(res)\n      }).catch(() => router.navigate('home'))\n    }\n    _getData()\n    return () => {}\n  }, [route.params.id])\n\n  return (\n    <div className=\"Page Profile\">\n      <div>ItemPage</div>\n      { data\n        ? <div>\n          <div>\n            <div>name</div>\n            <input type=\"text\" value={data.name} readOnly />\n          </div>\n          <div>\n            <div>url</div>\n            <input type=\"text\" value={data.url} readOnly />\n          </div>\n          <div>\n            <div>username</div>\n            <input type=\"text\" value={data.username} readOnly />\n          </div>\n          <div>\n            <div>password</div>\n            <input type=\"text\" value={data.password} readOnly />\n          </div>\n          <div>\n            <div>note</div>\n            <textarea value={data.note} readOnly />\n          </div>\n        </div>\n        : null }\n    </div>\n  )\n}\n\nexport default ItemPage\n","import React from 'react'\n\nfunction NotFound () {\n  return (\n    <div className=\"page -not-found\">\n      <div>404</div>\n    </div>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport RoundLoader from '../round'\n\nimport './_index.scss'\n\nfunction Loader () {\n  return (\n    <div className=\"component -page-loader flex center\">\n      <RoundLoader />\n    </div>\n  )\n}\n\nexport default Loader\n","import { createStore } from 'effector'\nimport { closeAllModals, closeLastModal, closeModal, openModal } from './events'\nimport { State } from './types'\n\nconst initialState: State = []\n\nexport const $modals = createStore<State>(initialState)\n  .on(openModal, (state, id) => {\n    const set = new Set([...state, ...[id]])\n    state = Array.from(set) as State\n    return state\n  })\n  .on(closeModal, (state, id) => {\n    state = state.filter((i) => i !== id)\n    return state\n  })\n  .on(closeLastModal, state => {\n    state = state.slice(0, 1)\n    return state\n  })\n  .on(closeAllModals, () => [])\n\nexport default $modals\n","import React from 'react'\n\nfunction CrossIcon () {\n  return (\n    <div className=\"icon -cross\">\n      <div>x</div>\n    </div>\n  )\n}\n\nexport default CrossIcon\n","import React, { useEffect, useState } from 'react'\nimport { useStore } from 'effector-react'\nimport { $modals } from '../../../store/modals/store'\nimport { closeModal } from '../../../store/modals/events'\nimport { ModalName } from '../../../store/modals/types'\nimport CrossIcon from '../../icons/cross'\nimport PropTypes from 'prop-types'\n\nimport './_index.scss'\n\ninterface ModalWrapperProps {\n  id: ModalName,\n  children?: any,\n  closable?: boolean,\n  heading?: any\n}\n\nfunction ModalWrapper ({ id, children, closable = true, heading }: ModalWrapperProps) {\n  const modals = useStore($modals)\n  const [show, setShow] = useState(false)\n\n  useEffect(() => {\n    const unwatch = $modals.watch(modals => {\n      setShow(modals.includes(id))\n    })\n    return () => {\n      unwatch()\n    }\n  }, [modals])\n\n  const close = () => {\n    if (closable) {\n      closeModal(id)\n    }\n  }\n\n  const onParentClick = (e: React.MouseEvent) => {\n    const target = e.target as Element\n    if (target.classList.contains('Modal') && target.classList.contains('Component')) {\n      close()\n    }\n  }\n\n  if (show) {\n    return (\n      <div className=\"modal component\" onClick={onParentClick}>\n        <dialog open className=\"dialog\">\n          {closable && <div className=\"close\" onClick={close}>\n            <CrossIcon/>\n          </div>}\n          <div className=\"head\">{heading}</div>\n          <div className=\"body\">{children}</div>\n        </dialog>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nModalWrapper.propTypes = {\n  id: PropTypes.string,\n  children: PropTypes.any,\n  closable: PropTypes.bool,\n  heading: PropTypes.any\n}\n\nexport default ModalWrapper\n","import React, { useEffect, useState } from 'react'\nimport ModalWrapper from './wrapper'\nimport { logout, setUserSecurityCode } from '../../store/auth/events'\nimport { closeModal } from '../../store/modals/events'\nimport { nextTick } from '../../helpers/next-tick'\n\nfunction SetSecurityCodeModal () {\n  const id = 'set_security_code'\n  const [code, setCode] = useState('')\n\n  let codeField = null as HTMLInputElement | null\n  const setCodeFieldRef = (element: HTMLInputElement) => {\n    codeField = element\n  }\n\n  const _logout = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await logout()\n    closeModal(id)\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await setUserSecurityCode(code)\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      codeField?.focus()\n    })\n  }, [codeField])\n\n  return (\n    <ModalWrapper id={id} closable={false}>\n      <form onSubmit={onSubmit}>\n        <div>Set your security code:</div>\n        <div>\n          <input type=\"text\" ref={setCodeFieldRef} value={code} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n        </div>\n        <div>\n          <button type=\"submit\">Set</button>\n        </div>\n        <div>Do not forget your secret code!</div>\n      </form>\n\n      <div>\n        <a href=\"#\" onClick={_logout}>logout</a>\n      </div>\n    </ModalWrapper>\n  )\n}\n\nexport default SetSecurityCodeModal\n","import React, { useEffect, useState } from 'react'\nimport { nextTick } from '../../helpers/next-tick'\nimport { logout } from '../../store/auth/events'\nimport { closeModal } from '../../store/modals/events'\nimport { unlock } from '../../store/locker/events'\nimport ModalWrapper from './wrapper'\n\nfunction LockerModal () {\n  const id = 'locker'\n  const [code, setCode] = useState('')\n\n  let codeField = null as HTMLInputElement | null\n  const setCodeFieldRef = (element: HTMLInputElement) => {\n    codeField = element\n  }\n\n  const _logout = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await logout()\n    closeModal(id)\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await unlock(code)\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      codeField?.focus()\n    })\n  }, [codeField])\n\n  return (\n    <ModalWrapper id={id} closable={false}>\n      <form onSubmit={onSubmit}>\n        <div>App was locked.</div>\n        <div>Enter your security code to unlock:</div>\n        <div>\n          <input type=\"text\" ref={setCodeFieldRef} value={code} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n        </div>\n        <div>\n          <button type=\"submit\">Unlock</button>\n        </div>\n      </form>\n\n      <div>\n        <a href=\"#\" onClick={_logout}>logout</a>\n      </div>\n    </ModalWrapper>\n  )\n}\n\nexport default LockerModal\n","import React, { useEffect, useState } from 'react'\nimport { $modals } from '../../../store/modals/store'\n\nimport SetSecurityCodeModal from '../set-security-code'\nimport LockerModal from '../locker'\n\nimport './_index.scss'\n\nfunction ModalController () {\n  const [show, setShow] = useState(false)\n\n  useEffect(() => {\n    const unwatch = $modals.watch(modals => {\n      setShow(!!modals.length)\n    })\n    return () => {\n      unwatch()\n    }\n  })\n\n  return (\n    <div className={`Modal Controller ${show ? '-active' : ''}`}>\n      <SetSecurityCodeModal />\n      <LockerModal />\n    </div>\n  )\n}\n\nexport default ModalController\n","import React, { useEffect } from 'react'\nimport { useRoute } from 'react-router5'\nimport { useStore } from 'effector-react'\nimport { setMounted } from './store/app/events'\nimport { checkUserSecurityCode } from './store/auth/events'\nimport { $locker } from './store/locker/store'\nimport { checkIsAppLocked } from './store/locker/events'\n\n// layouts\nimport DefaultLayout from './layouts/default'\nimport SimpleLayout from './layouts/simple'\n\n// App pages\nimport HomePage from './pages/home'\nimport ProfilePage from './pages/profile'\nimport AuthPage from './pages/auth'\nimport AddItemPage from './pages/add-item'\nimport ItemPage from './pages/item'\nimport NotFound from './pages/not-found'\n\n// Layout components\nimport Loader from './components/loader/page-loader'\nimport ModalController from './components/modals/controller'\n\nfunction App () {\n  const { route } = useRoute()\n  const locker = useStore($locker)\n\n  useEffect(() => {\n    console.log('[app] mounted')\n    const unwatchMounted = setMounted.watch(mounted => {\n      if (mounted) {\n        /**\n         * app mounted after loader\n         */\n        checkUserSecurityCode()\n      }\n    })\n    return () => {\n      unwatchMounted()\n    }\n  }, [])\n\n  useEffect(() => {\n    checkIsAppLocked()\n  }, [locker])\n\n  function Switch () {\n    switch (route.name) {\n      case 'home':\n        return <DefaultLayout><HomePage /></DefaultLayout>\n      case 'auth':\n        return <SimpleLayout><AuthPage /></SimpleLayout>\n      case 'profile':\n        return <DefaultLayout><ProfilePage /></DefaultLayout>\n      case 'add':\n        return <DefaultLayout><AddItemPage /></DefaultLayout>\n      case 'item':\n        return <DefaultLayout><ItemPage /></DefaultLayout>\n      default:\n        return <SimpleLayout><NotFound /></SimpleLayout>\n    }\n  }\n\n  if (route) {\n    return (\n      <div className=\"app\">\n        <Switch />\n        <ModalController />\n      </div>\n    )\n  } else {\n    return (\n      <Loader />\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { RouterProvider } from 'react-router5'\nimport { configureRouter as createRouter } from './router'\nimport { setMounted } from './store/app/events'\nimport reportWebVitals from './report-web-vitals'\nimport App from './app'\n\nimport './assets/scss/index.scss'\n\nconst router = createRouter()\n\nReactDOM.render(\n  <RouterProvider router={router}>\n    <App />\n  </RouterProvider>,\n  document.getElementById('root')\n)\n\nrouter.start(() => {\n  setMounted(true)\n})\n\n// If you want to start measuring performance in your app, pass a function.\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log)\n"],"sourceRoot":""}