{"version":3,"sources":["store/auth/domain.ts","store/locker/domain.ts","api/index.ts","store/locker/events.ts","store/modals/domain.ts","store/modals/events.ts","store/auth/events.ts","store/auth/store.ts","router/routes.ts","router/middlewares/session.ts","router/middlewares/accessor.ts","store/locker/store.ts","router/middlewares/locker.ts","router/index.ts","store/app/domain.ts","store/app/events.ts","components/loader/round/index.tsx","components/ui/button/index.tsx","components/icons/lock/index.tsx","components/icons/add.tsx","components/header/index.tsx","layouts/default.tsx","layouts/simple/index.tsx","helpers/next-tick.ts","store/items/domain.ts","store/items/events.ts","store/items/store.ts","store/app/store.ts","components/icons/info.tsx","components/ui/input/index.tsx","components/icons/eye.tsx","components/ui/item-field/index.tsx","components/item/index.tsx","components/items/index.tsx","components/icons/search.tsx","components/icons/cross.tsx","components/search-bar/index.tsx","pages/home.tsx","pages/profile.tsx","components/auth/login-form/index.tsx","components/auth/register-form.tsx","pages/auth/index.tsx","pages/unlock/index.tsx","helpers/validator.ts","pages/add-item.tsx","pages/item.tsx","pages/not-found.tsx","components/loader/page-loader/index.tsx","store/modals/store.ts","components/modals/wrapper/index.tsx","components/modals/set-security-code.tsx","components/modals/controller/index.tsx","app.tsx","index.tsx"],"names":["AuthDomain","createDomain","LockerDomain","sendRequest","options","mergedOptions","method","withCredentials","url","process","Object","prototype","hasOwnProperty","call","params","data","axios","then","res","catch","err","response","status","setIsAppLocked","lock","createEffect","use","unlock","securityCode","checkIsAppLocked","createEvent","ModalsDomain","openModal","closeModal","closeLastModal","closeAllModals","register","effect","payload","username","password","login","logout","checkAuth","user","checkUserSecurityCode","event","setUserSecurityCode","$auth","store","on","done","state","result","isAppLocked","hasSecurityCode","name","path","private","forGuests","_checkAuth","a","getState","session","router","toState","fromState","onActivateHandlers","transitionPath","toActivate","map","segment","routes","find","r","onActivate","filter","Boolean","Promise","all","callback","routeData","reduce","accData","rData","assign","canActivate","routeName","foundRoute","i","isRouterOnlyForGuests","isRouterOnlyForAuthed","accessor","navigate","$locker","createStore","isLocked","lastPath","routerState","value","locker","configureRouter","createRouter","usePlugin","loggerPlugin","browserPlugin","useMiddleware","AppDomain","setMounted","toggleMasonryItem","itemsFiltered","RoundLoader","className","width","height","viewBox","version","xmlns","stroke","strokeWidth","fill","fillRule","transform","d","id","Button","forwardRef","props","ref","useRef","useState","buttonProps","setButtonProps","classList","theme","size","fullWidth","loading","innerRef","useEffect","current","fieldProps","update","children","displayName","IconLock","IconAdd","Header","href","target","rel","onClick","e","preventDefault","DefaultLayout","SimpleLayout","nextTick","cb","setTimeout","ItemsDomain","getItems","getItem","createItem","$items","push","$app","mounted","InfoIcon","Input","inputProps","setInputProps","error","localError","setLocalError","iconError","React","focus","select","obj","beforeInput","tippy","placement","content","onTooltipClick","type","onInput","EyeIcon","ItemField","fieldType","setFieldType","isPasswordVisible","setIsPasswordVisible","Math","random","toFixed","slice","fieldRef","tooltip","navigator","clipboard","writeText","show","hide","trigger","animation","duration","Index","mode","localMode","setLocalMode","subtitle","note","title","src","alt","readOnly","Items","items","useStore","msnry","list","arr","searchQuery","item","includes","length","_id","createMasonry","gridElement","document","querySelector","Masonry","itemSelector","columnWidth","gutter","appended","reloadItems","layout","updateMasonry","reinitMasonry","destroy","onMounted","onToggleMasonryItem","off","SearchIcon","CrossIcon","SearchBar","_timeout","_setTimeout","query","setQuery","filterItems","onChange","onKeyUp","watchFocus","activeElement","contains","parentElement","test","key","onFieldKeyUp","keyCode","clearTimeout","addEventListener","field","removeEventListener","placeholder","HomePage","setSearchQuery","searchField","createRef","ProfilePage","useRouter","sendLogoutRequest","checked","onRegisterShow","loginUsername","setLoginUsername","loginPassword","setLoginPassword","usernameError","setUsernameError","passwordError","setPasswordError","usernameField","passwordField","isLoading","setIsLoading","sendLoginRequest","successResponse","onSubmit","errorsFound","message","validateForm","forEach","console","log","onBlur","RegisterForm","onLoginShow","setUsername","setPassword","sendRegisterRequest","AuthPage","setMode","UnlockPage","_loading","_setLoading","code","setCode","codeFieldError","setCodeFieldError","codeField","_logout","isAllFieldsEmpty","exclude","isFilled","entries","every","pair","AddItemPage","useRoute","setName","setUrl","setNote","create","group","alert","ItemPage","setData","route","_getData","NotFound","Loader","$modals","set","Set","Array","from","ModalWrapper","undefined","closable","_mounted","_setMounted","modals","setShow","unwatch","watch","onOpen","onClose","close","open","heading","SetSecurityCodeModal","element","ModalController","App","Switch","unwatchMounted","ReactDOM","render","getElementById","start"],"mappings":"ooBAEaA,EAAaC,cCAbC,EAAeD,c,iBCCfE,EAAc,SAACC,GAC1B,IAAMC,EAAa,aACjBC,OAAQ,MACRC,iBAAiB,GACdH,GAUL,OAPAC,EAAcG,IAAd,UAAuBC,uCAAvB,OAA4DL,EAAQI,KAEvC,QAAzBH,EAAcC,QAAoBI,OAAOC,UAAUC,eAAeC,KAAKR,EAAe,UACxFA,EAAcS,OAASV,EAAQW,YACxBV,EAAcU,MAGhBC,IAAMX,GACVY,MAAK,SAAAC,GAAG,OAAIA,EAAIH,QAChBI,OAAM,SAAAC,GAAQ,IAAD,EAIZ,MAH8B,OAAvB,OAAHA,QAAG,IAAHA,GAAA,UAAAA,EAAKC,gBAAL,eAAeC,SACjBC,GAAe,GAEXH,MCnBCI,EAAOtB,EAAauB,eAA2BC,KAAI,WAC9D,OAAOvB,EAAY,CACjBG,OAAQ,OACRE,IAAK,aAIImB,EAASzB,EAAauB,eAAmCC,KAAI,SAACE,GACzE,OAAOzB,EAAY,CACjBG,OAAQ,OACRE,IAAK,UACLO,KAAM,CAAEa,qBAICC,EAAmB3B,EAAa4B,cAEhCP,EAAiBrB,EAAa4B,cCnB9BC,EAAe9B,cCCf+B,EAAYD,EAAaD,YAAuB,cAEhDG,EAAaF,EAAaD,YAAuB,eAEjDI,EAAiBH,EAAaD,YAAY,oBAE1CK,EAAiBJ,EAAaD,YAAY,oBCL1CM,EAAWpC,EAAWqC,SAAgCX,KAAI,SAACY,GACtE,OAAOnC,EAAY,CACjBG,OAAQ,OACRS,KAAM,CACJwB,SAAUD,EAAQC,SAClBC,SAAUF,EAAQE,UAEpBhC,IAAK,iBAIIiC,EAAQzC,EAAWqC,SAAsCX,KAAI,SAACY,GACzE,OAAOnC,EAAY,CACjBG,OAAQ,OACRS,KAAM,CACJwB,SAAUD,EAAQC,SAClBC,SAAUF,EAAQE,UAEpBhC,IAAK,cAIIkC,EAAS1C,EAAWqC,SAAqBX,KAAI,WACxD,OAAOvB,EAAY,CACjBK,IAAK,eAIImC,EAAY3C,EAAWqC,SAAkCX,KAAI,WACxE,OAAOvB,EAAY,CACjBK,IAAK,UACJW,OAAM,iBAAO,CAAEyB,KAAM,YAGbC,EAAwB7C,EAAW8C,QAEnCC,EAAsB/C,EAAWqC,SAA6BX,KAAI,SAACE,GAC9E,OAAOzB,EAAY,CACjBG,OAAQ,OACRE,IAAK,iBACLO,KAAM,CAAEa,qBClCCoB,EAAQhD,EAAWiD,MAJA,CAC9BL,KAAM,OAILM,GAAGd,EAASe,MAAM,SAACC,EAAD,GAAwB,IAAdC,EAAa,EAAbA,OAK3B,OAJAD,EAAK,2BACAA,GADA,IAEHR,KAAMS,OAITH,GAAGT,EAAMU,MAAM,SAACC,EAAD,GAAwB,IAAdC,EAAa,EAAbA,OAMxB,OALAD,EAAK,2BACAA,GADA,IAEHR,KAAMS,EAAOT,OAEff,IACOuB,KAERF,GAAGR,EAAOS,MAAM,SAACC,GAKhB,OAJAA,EAAK,2BACAA,GADA,IAEHR,KAAM,UAITM,GAAGP,EAAUQ,MAAM,SAACC,EAAD,GAAwB,IAAdC,EAAa,EAAbA,OAM5B,OALAD,EAAK,2BACAA,GADA,IAEHR,KAAMS,EAAOT,OAEfrB,EAAe8B,EAAOC,aACfF,KAERF,GAAGL,GAAuB,SAACO,GAE1B,OADAA,EAAMR,OAASQ,EAAMR,KAAKW,iBAAmBvB,EAAU,qBAChDoB,KAERF,GAAGH,GAAqB,SAACK,GAExB,OADAnB,EAAW,qBACJmB,KC/CI,GACb,CACEI,KAAM,OACNC,KAAM,IACNC,SAAS,GAEX,CACEF,KAAM,OACNC,KAAM,QACNE,WAAW,GAEb,CACEH,KAAM,SACNC,KAAM,UACNC,SAAS,GAEX,CACEF,KAAM,OACNC,KAAM,YACNC,SAAS,GAEX,CACEF,KAAM,UACNC,KAAM,WACNC,SAAS,GAEX,CACEF,KAAM,MACNC,KAAM,OACNC,SAAS,GAEX,CACEF,KAAM,MACNC,KAAM,S,SCvBKG,I,2EAAf,sBAAAC,EAAA,yDACeb,EAAMc,WAAWlB,KADhC,gCAIUD,IAJV,4C,sBAkBO,IAqBQoB,EArBQ,SAACC,GAAD,OAAoB,SAACC,EAAgBC,GAAsB,IAE1EC,EADiBC,YAAeH,EAASC,GAAvCG,WAGHC,KAAI,SAAAC,GAAO,OAAKC,EAAeC,MAAK,SAACC,GAAD,OAAcA,EAAElB,OAASe,KAASI,cACtEC,OAAOC,SAEZ,OAAOC,QACJC,IAAIZ,EAAmBG,KAAI,SAAAU,GAAQ,OAAIA,QAEvC/D,KAHI,uCAGC,WAAMF,GAAN,SAAA8C,EAAA,sEACED,IADF,gCAGG7C,GAHH,2CAHD,uDAQJE,MAAK,SAAAF,GACJ,IAAMkE,EAAYlE,EAAKmE,QAAO,SAACC,EAAcC,GAAf,OAA8B1E,OAAO2E,OAAOF,EAASC,KAAQ,IAC3F,OAAO,2BAAKnB,GAAZ,IAAqBlD,KAAMkE,SCjCjC,IAAMK,EAAc,SAACC,GACnB,IAAMC,EAAahB,EAAOC,MAAK,SAAAgB,GAAC,OAAIA,EAAEjC,OAAS+B,KACzCG,IAAwBF,KAAeA,EAAW7B,UAClDgC,IAAwBH,KAAeA,EAAW9B,QAExD,OAAIgC,GAZI1C,EAAMc,WAAWlB,MAcd+C,KAVF3C,EAAMc,WAAWlB,MAyBbgD,EARS,SAAC5B,GAAD,OAAiB,SAACC,EAAgBC,EAAkBf,GAC1E,IAAKmC,EAAYrB,EAAQT,MAEvB,OAAOQ,EAAO6B,SAAS7C,EAAMc,WAAWlB,KAAO,OAAS,QAE1DO,MCpBW2C,EAAUC,YALK,CAC1BC,UAAU,EACVC,SAAU,OAIT/C,GAAG1B,EAAK2B,MAAM,SAAAC,GAKb,OAJAA,EAAK,2BACAA,GADA,IAEH4C,UAAU,OAIb9C,GAAGvB,EAAOwB,MAAM,SAAAC,GAKf,OAJAA,EAAK,2BACAA,GADA,IAEH4C,UAAU,OAIb9C,GAAGrB,GAAkB,SAAAuB,GACpB,IAAM8C,EAAclC,GAAOF,WAY3B,QAXmBd,EAAMc,WAAWlB,MAEpBsD,IACV9C,EAAM4C,UAAiC,WAArBE,EAAY1C,MAChCQ,GAAO6B,SAAS,UAEbzC,EAAM4C,UAAiC,WAArBE,EAAY1C,MACjCQ,GAAO6B,SAAS,SAIbzC,KAERF,GAAG3B,GAAgB,SAAC6B,EAAO+C,GAE1B,OADAtE,IACO,2BACFuB,GADL,IAEE4C,SAAUG,OCjCDC,EATO,SAACpC,GAAD,OAAiB,SAACC,EAAgBC,EAAkBf,GAGxE,GAFiB2C,EAAQhC,WAAWkC,UAEH,WAAjB/B,EAAQT,KACtB,OAAOQ,EAAO6B,SAAS,UAEzB1C,MCGK,SAASkD,IACd,IAAMrC,EAASsC,YAAa9B,EAAQ,IAQpC,OANAR,EAAOuC,UAAUC,KACjBxC,EAAOuC,UAAUE,eAGjBzC,EAAO0C,cAAc3C,EAAS6B,EAAUQ,GAEjCpC,EAGM,ICtBF2C,EAAY1G,cCCZ2G,EAAaD,EAAU7D,QAEvB+D,EAAoBF,EAAU7D,QAE9BgE,EAAgBH,EAAU7D,Q,8BCWxBiE,OAdf,WACE,OACE,qBAAKC,UAAU,0BAAf,SACE,qBAAKA,UAAU,MAAMC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAAxF,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,sCAAsCF,KAAK,eAAeC,SAAS,UAAhF,SACE,sBAAME,EAAE,ktBAAktBC,GAAG,kBCGnuBC,I,MAASC,sBAAW,SAACC,EAAsBC,GAC1CA,IACHA,EAAMC,oBAF+C,MAKjBC,mBAAS,IALQ,mBAKhDC,EALgD,KAKnCC,EALmC,KAMjDC,EAAS,mCAA+BN,EAAMO,OAAS,UAA9C,kBAAiEP,EAAMQ,MAAQ,UAA/E,YAA4FR,EAAMS,UAAY,cAAgB,GAA9H,YAAoIT,EAAMU,QAAU,WAAa,IAC1KC,EAAWT,iBAAO,MAmBxB,OAJAU,qBAAU,YAbK,WAEbX,EAAIY,QAAU,GAGd,IAAMC,EAAU,eAAQd,UACjBc,EAAWL,iBACXK,EAAWJ,eACXI,EAAWN,YACXM,EAAWP,MAClBF,EAAeS,GAIfC,KACC,CAACf,IAGF,qBAAKf,UAAWqB,EAAhB,SACE,kDAAYF,GAAZ,IAAyBH,IAAKU,EAA9B,SACIX,EAAMU,QACJ,qBAAKzB,UAAU,SAAf,SACA,cAAC,GAAD,MAEAe,EAAMgB,kBAMlBlB,GAAOmB,YAAc,SAENnB,U,MCnCAoB,OAff,WACE,OACE,qBAAKjC,UAAU,aAAaC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAA/F,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,qCAAqCF,KAAK,eAAeC,SAAS,UAA/E,SACE,oBAAGC,UAAU,mCAAb,UACE,sBAAMC,EAAE,++BAA++BC,GAAG,eAC1/B,sBAAMD,EAAE,qdAAqdC,GAAG,yBCS7dsB,OAlBf,WACE,OACE,qBAAKlC,UAAU,YAAYC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAA9F,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,sCAAsCF,KAAK,eAAeC,SAAS,UAAhF,SACE,mBAAGC,UAAU,mCAAb,SACE,mBAAGA,UAAU,kCAAb,SACE,mBAAGA,UAAU,gCAAb,SACE,sBAAMC,EAAE,y3BAAy3BC,GAAG,wB,MC8Br4BuB,OA9Bf,WAME,OACE,yBAAQnC,UAAU,4CAAlB,UACE,gCACE,cAAC,IAAD,CAAMzB,UAAU,OAAhB,kBACA,cAAC,IAAD,CAAMA,UAAU,UAAhB,qBAEA,mBAAG6D,KAAK,sDAAsDC,OAAO,SAASC,IAAI,aAAlF,uBAEF,sBAAKtC,UAAU,sBAAf,UACE,eAAC,GAAD,CAAUuB,KAAK,QAAQD,MAAM,QAAQiB,QAd3B,SAACC,GACfA,EAAEC,iBACFjI,KAYI,UACE,cAAC,GAAD,IACA,+CAEF,cAAC,IAAD,CAAM+D,UAAU,MAAhB,SACE,eAAC,GAAD,CAAUgD,KAAK,QAAf,UACE,cAAC,GAAD,IACA,wDCZGmB,GAfiB,SAAC,GAAkB,IAAhBX,EAAe,EAAfA,SACjC,OACE,qBAAK/B,UAAU,kBAAf,SACE,sBAAKA,UAAU,YAAf,UACE,cAAC,GAAD,IACA,+BAAO+B,UCWAY,I,MAhBgB,SAAC,GAAkB,IAAhBZ,EAAe,EAAfA,SAChC,OACE,qBAAK/B,UAAU,iBAAf,SACE,+BACE,qBAAKA,UAAU,YAAf,SACG+B,UCNEa,GAAW,SAACC,GACvBC,WAAWD,EAAI,I,oBCHJE,GAAc9J,cCEd+J,GAAWD,GAAYtI,eAAkCC,KAAI,WACxE,OAAOvB,EAAY,CACjBK,IAAK,WACJW,OAAM,iBAAM,SAGJ8I,GAAUF,GAAYtI,eAA6BC,KAAI,SAAAkG,GAClE,OAAOzH,EAAY,CACjBY,KAAM,CAAE6G,MACRpH,IAAK,aAII0J,GAAaH,GAAYtI,eAAkCC,KAAI,SAAAY,GAC1E,OAAOnC,EAAY,CACjBG,OAAQ,OACRS,KAAMuB,EACN9B,IAAK,cCfI2J,GAASpE,YAFM,IAGzB7C,GAAG8G,GAAS7G,MAAM,SAACC,EAAD,GAEjB,OAFwC,EAAbC,UAI5BH,GAAGgH,GAAW/G,MAAM,SAACC,EAAD,GAAwB,IAAdC,EAAa,EAAbA,OAI7B,OAHIA,GACFD,EAAMgH,KAAK/G,GAEND,KCPEiH,GAAO1D,EAAU1D,MAJC,CAC7BqH,SAAS,IAIRpH,GAAG0D,GAAY,SAACxD,EAAO+C,GAEtB,OADA/C,EAAMkH,QAAUnE,EACT/C,K,SCWImH,OAlBf,SAAmBxC,GACjB,OACE,+CAASA,GAAT,IAAgBf,UAAU,cAA1B,SACE,qBAAKC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAAxE,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,sCAAsCF,KAAK,eAAeC,SAAS,UAAhF,SACE,mBAAGC,UAAU,oCAAb,SACE,mBAAGE,GAAG,cAAcF,UAAU,mCAA9B,SACE,sBAAMC,EAAE,qtBCGlB6C,I,MAAQ1C,sBAAW,SAACC,EAAqBC,GACxCA,IACHA,EAAMC,oBAFkD,MAKtBC,mBAAuB,CACzD/B,MAAO,KANiD,mBAKnDsE,EALmD,KAKvCC,EALuC,OAQtBxC,mBAASH,EAAM4C,OARO,mBAQnDC,EARmD,KAQvCC,EARuC,KASpDnC,EAAWT,iBAAO,MAClB6C,EAAYC,IAAM9C,OAAyB,MAC3CI,EAAS,kCAA8BN,EAAMO,OAAS,UAA7C,YAA0DP,EAAM4C,MAAQ,SAAW,IAE5FK,EAAQ,WACZpB,IAAS,WAAO,IAAD,EACblB,EAASE,UAAT,UAAqBF,EAASE,eAA9B,OAAoB,EAA+CoC,aAIjEC,EAAS,WACbrB,IAAS,WAAO,IAAD,EACblB,EAASE,UAAT,UAAqBF,EAASE,eAA9B,OAAoB,EAA+CqC,cAoBjEnC,EAAS,WACb,IAAMoC,EAAG,eAAQnD,UACVmD,EAAIC,YACXT,EAAcQ,IAiChB,OA9BAvC,qBAAU,WACJiC,GACEE,EAAUlC,SACZwC,aAAMN,EAAUlC,QAAS,CACvByC,UAAW,UACXC,QAASV,MAId,CAACA,IAEJjC,qBAAU,WACRkC,EAAc9C,EAAM4C,OACpB7B,MACC,IAEHH,qBAAU,WACRX,EAAIY,QAAU,CAAEoC,QAAOC,YACtB,CAACjD,IAEJW,qBAAU,WAERG,MAEC,CAACf,IAEJY,qBAAU,WACRkC,EAAc9C,EAAM4C,SACnB,CAAC5C,EAAM4C,QAGR,sBAAK3D,UAAWqB,EAAhB,UACE,qBAAKrB,UAAU,UAAf,SACG4D,EACG,qBAAK5C,IAAK8C,EAAW9D,UAAU,aAAauC,QAAS,SAAAC,GAAC,OAxDzC,SAACA,GACtBA,EAAEC,iBACFuB,IAsDkEO,CAAe/B,IAAzE,SACF,cAAC,GAAD,MAEE,OAEN,iDACMiB,GADN,IAEEzC,IAAKU,EACL8C,KAAMzD,EAAMyD,MAAQ,OACpBC,QAAS,SAACjC,GAAD,OA5DC,SAACA,GACXzB,EAAMoD,aACRpD,EAAMoD,YAAY3B,GAGhBzB,EAAM0D,SACR1D,EAAM0D,QAAQjC,GAEhBqB,EAAc,IAoDMY,CAAQjC,cAKhCgB,GAAMxB,YAAc,QAELwB,UC/FAkB,OAff,WACE,OACE,qBAAK1E,UAAU,YAAYC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAA9F,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,sCAAsCF,KAAK,eAAeC,SAAS,UAAhF,SACE,oBAAGC,UAAU,oCAAb,UACE,sBAAMC,EAAE,+MAA+MC,GAAG,SAC1N,sBAAMD,EAAE,qZAAqZC,GAAG,oB,MC2E7Z+D,OAxEf,SAAoB5D,GAAwB,IAAD,EACPG,mBAASH,EAAMyD,MADR,mBAClCI,EADkC,KACvBC,EADuB,OAES3D,oBAAS,GAFlB,mBAElC4D,EAFkC,KAEfC,EAFe,KAGnCnE,EAAKoE,KAAKC,SAASC,QAAQ,IAAIC,MAAM,GACrCC,EAAWrB,IAAM9C,SACnBoE,EAAU,KA2BR9C,EAAU,SAACC,GACfA,EAAEC,iBAzBD2C,EAASxD,QAAgBoC,QACzBoB,EAASxD,QAAgBqC,SAc1BqB,UAAUC,UAAUC,UAAUzE,EAAM5B,OACpC2D,YAAW,WAAO,IAAD,EACR,QAAP,EAAAuC,SAAA,SAASI,SACR,KACH3C,YAAW,WAAO,IAAD,EACR,QAAP,EAAAuC,SAAA,SAASK,SACR,OAqBL,OAZA/D,qBAAU,WASR0D,GARAA,EAAUjB,aAAM,eAAD,OAAgBxD,GAAM,CACnC+E,QAAS,SACTrB,QAAS,SACTD,UAAW,OACXuB,UAAW,qBACXtE,MAAO,QACPuE,SAAU,OAEM,KACjB,IAGD,qBAAK7F,UAAU,wBAAf,SACE,sBAAKA,UAAU,sBAAf,UACE,qBAAKA,UAAU,QAAQuC,QAASA,EAAhC,SACGxB,EAAMvE,OAGT,sBAAKwD,UAAU,QAAf,UACE,qBAAKA,UAAU,QAAf,SACkB,aAAfe,EAAMvE,MAAuB,qBAAK+F,QA/CZ,WAC3BuC,GACFC,GAAqB,GACrBF,EAAa,cAEbE,GAAqB,GACrBF,EAAa,UAyCuB,SAC5B,cAAC,GAAD,QAGJ,qBAAKjE,GAAE,qBAAgBA,GAAvB,SACE,cAAC,GAAD,yBAASI,IAAKoE,GAAcrE,GAA5B,IAAmCyD,KAAMI,EAAWtD,MAAM,QAAQiB,QAASA,gB,MCMxEuD,OAnEf,YAA4C,IAA1B/L,EAAyB,EAAzBA,KAAMgM,EAAmB,EAAnBA,KAAmB,EACP7E,mBAAS,WADF,mBAClC8E,EADkC,KACvBC,EADuB,KAEnCC,EAAWnM,EAAKwB,UAAYxB,EAAKP,KAAOO,EAAKoM,MAAQ,GACrDC,EAAQrM,EAAKyC,MAAQ0J,EAUrB3D,EAAU,WAGV0D,EADU,SAAdD,EACiB,UACA,QAEjBnG,KAOF,OAJA8B,qBAAU,WACRsE,EAAaF,KACZ,CAACA,IAEc,SAAdC,EAEA,sBAAKhG,UAAS,gCAA2BgG,GAAzC,UACE,sBAAKhG,UAAU,oBAAoBuC,QAASA,EAA5C,UACE,qBAAKvC,UAAU,QAAf,SACE,qBAAKqG,IAAI,GAAGC,IAAI,OAElB,sBAAKtG,UAAU,UAAf,UACE,qBAAKA,UAAU,QAAf,SAAwBoG,IACxB,qBAAKpG,UAAU,WAAf,SACGjG,EAAKP,IACF,mBAAG4I,KAAMrI,EAAKP,IAAK6I,OAAO,SAASC,IAAI,aAAvC,SAAqDvI,EAAKP,MAC1D,8BAAM0M,YAKhB,sBAAKlG,UAAU,SAAf,UACGjG,EAAKwB,UAAY,cAAC,GAAD,CAAWiB,KAAK,WAAW2C,MAAOpF,EAAKwB,SAAUgL,UAAU,IAC5ExM,EAAKyB,UAAY,cAAC,GAAD,CAAWgB,KAAK,WAAWgI,KAAK,WAAWrF,MAAOpF,EAAKyB,SAAU+K,UAAU,IAC5FxM,EAAKoM,MAAQ,cAAC,GAAD,CAAW3J,KAAK,OAAO2C,MAAOpF,EAAKoM,KAAMI,UAAU,UAMrE,qBAAKvG,UAAS,gCAA2BgG,GAAazD,QAASA,EAA/D,SACE,sBAAKvC,UAAU,oBAAf,UACE,qBAAKA,UAAU,QAAf,SACE,qBAAKqG,IAAI,GAAGC,IAAI,OAElB,sBAAKtG,UAAU,UAAf,UACE,qBAAKA,UAAU,QAAf,SAAwBoG,IACxB,qBAAKpG,UAAU,WAAf,SAA2BkG,a,MCwBxBM,OAhFf,SAAgBzF,GACd,IAAM0F,EAAQC,YAASvD,IACnBwD,EAAQ,KAENC,EAAO,WACX,IAAIC,EAAMJ,EAOV,OANI1F,EAAM+F,cACRD,EAAMJ,EAAM7I,QAAO,SAAAmJ,GAEjB,MADS,UAAMA,EAAKvK,KAAX,YAAmBuK,EAAKvN,IAAxB,YAA+BuN,EAAKxL,SAApC,YAAgDwL,EAAKZ,MACnDa,SAASjG,EAAM+F,iBAGvBD,EAAIvJ,KAAI,SAAAyJ,GACb,OAAO,cAAC,GAAD,CAAMhN,KAAMgN,EAAMhB,KAAMc,EAAII,OAAS,EAAI,OAAS,WAAgBF,EAAKG,SAI5EC,EAAgB,WACpB,IAAMC,EAAcC,SAASC,cAAc,qBACtCF,KAGLT,EAAQ,IAAIY,KAAQH,EAAa,CAC/BI,aAAc,SACdC,YAAa,IACbC,OAAQ,MAEJC,SAASP,GACfxE,IAAS,WACP+D,EAAMiB,cACNjB,EAAMkB,cAIJC,EAAgB,WACpBlF,IAAS,WACP+D,GAASA,EAAMiB,cACfjB,GAASA,EAAMkB,aAIbE,EAAgB,WACpBpB,GAASA,EAAMqB,UACfb,KAGIc,EAAS,uCAAG,sBAAApL,EAAA,sEACVmG,KADU,OAEhBmE,IAFgB,2CAAH,qDAKTe,EAAsB,SAAC9L,GAE3B,OADA0L,IACO1L,GAkBT,OAfAuF,qBAAU,WAKR,OAJAsG,IAEA5E,GAAKnH,GAAG4D,EAAeiI,GACvB1E,GAAKnH,GAAG2D,EAAmBqI,GACpB,WACL7E,GAAK8E,IAAIrI,GACTuD,GAAK8E,IAAItI,MAEV,IAEH8B,qBAAU,WACRmG,MACC,CAAClB,EAAM7F,IAGR,qBAAKf,UAAU,uBAAf,SACE,qBAAKA,UAAU,OAAf,SACG4G,SC1EMwB,OAhBf,WACE,OACE,qBAAKpI,UAAU,eAAeC,MAAM,OAAOC,OAAO,OAAOC,QAAQ,YAAYC,QAAQ,MAAMC,MAAM,6BAAjG,SACE,mBAAGC,OAAO,OAAOC,YAAY,IAAIC,KAAK,OAAOC,SAAS,UAAtD,SACE,mBAAGC,UAAU,sCAAsCF,KAAK,eAAeC,SAAS,UAAhF,SACE,mBAAGC,UAAU,oCAAb,SACE,mBAAGA,UAAU,iCAAb,SACE,sBAAMC,EAAE,ozBAAozBC,GAAG,qBCC9zByH,OARf,WACE,OACE,qBAAKrI,UAAU,cAAcC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYK,KAAK,OAAOH,MAAM,6BAA1F,SACE,sBAAMM,EAAE,uNAAuNH,KAAK,oBCSpO8H,I,MAAYxH,sBAAW,SAACC,EAAyBC,GACrD,IADkE,EAElCE,mBAAc,MAFoB,mBAE3DqH,EAF2D,KAEjDC,EAFiD,OAGxCtH,mBAAS,IAH+B,mBAG3DuH,EAH2D,KAGpDC,EAHoD,KAI5DhH,EAAWT,iBAAO,MAElB0H,EAAc,WACd5H,EAAM6H,WACR7H,EAAM6H,SAASH,GACf3I,MAWE+I,EAAU,SAACrG,GAGf,IAFA,IAAIsG,GAAa,EACbzG,EAASgF,SAAS0B,cACf1G,GAAQ,CACb,GAAIA,EAAOhB,UAAU2H,SAAS,eAG5B,OAFAF,GAAa,OACbzG,EAAS,MAGXA,EAASA,EAAO4G,cAGdH,GAAc,KAAKI,KAAK1G,EAAE2G,MAAyB,IAAjB3G,EAAE2G,IAAIlC,SACrCwB,EAAMxB,QACTyB,EAASlG,EAAE2G,KAEbvG,IAAS,WAAO,IAAD,EACb,QAAC,EAAAlB,EAASE,eAAV,SAA2BoC,aAK3BoF,EAAe,SAAC5G,GACF,KAAdA,EAAE6G,SACJX,EAAS,KAiCb,OA7BA/G,qBAAU,WACR2H,aAAaf,GACbC,EAAY,MAEZC,EACID,EAAY1F,WAAW6F,EApDf,MAqDRA,MACH,CAACF,IAEJ9G,qBAAU,WAAO,IAAD,EACdX,EAAIY,QAAU,CACZoC,MAAK,UAAGtC,EAASE,eAAZ,aAAE,EAA2BoC,SAEnC,CAAChD,IAEJW,qBAAU,WAER0F,SAASkC,iBAAiB,QAASV,GACnC,IAAMW,EAAQnC,SAASC,cAAc,gCAGrC,OADAkC,EAAMD,iBAAiB,QAASH,GACzB,WAEL/B,SAASoC,oBAAoB,QAASZ,GAEtCW,EAAMC,oBAAoB,QAASL,MAEpC,IAGD,sBAAKpJ,UAAU,wBAAf,UACE,qBAAKA,UAAU,0BAAf,SACGyI,EACG,qBAAKzI,UAAU,oBAAoBuC,QApE/B,WACZmG,EAAS,IACT9F,IAAS,WAAO,IAAD,EACb,QAAC,EAAAlB,EAASE,eAAV,SAA2BoC,YAiErB,SACA,cAAC,GAAD,MAEA,cAAC,GAAD,MAGN,cAAC,GAAD,CACEhD,IAAKU,EACLvC,MAAOsJ,EACPnH,MAAM,QACNoI,YAAY,4BACZjF,QAAS,SAACjC,GAAD,OAA4CkG,EAASlG,EAAEH,OAAOlD,iBAK/EmJ,GAAUtG,YAAc,YAETsG,UC9EAqB,OA7Bf,WAAsB,IAAD,EACmBzI,mBAAS,IAD5B,mBACZ4F,EADY,KACC8C,EADD,KAEbC,EAAc9F,IAAM+F,YAS1B,OAPAnI,qBAAU,WAIR,OAHAiB,IAAS,WAAO,IAAD,EACb,QAAC,EAAAiH,EAAYjI,eAAb,SAA8BoC,WAEzB,eACN,IAGD,qBAAKhE,UAAU,aAAf,SACE,gCACE,sBAAKA,UAAU,0BAAf,UACE,8BACE,cAAC,GAAD,CAAWgB,IAAK6I,EAAajB,SAAU,SAACH,GAAD,OAAmBmB,EAAenB,QAE3E,sDAGF,8BACE,cAAC,GAAD,CAAO3B,YAAaA,YCSfiD,OA/Bf,WACE,IAAM/M,EAASgN,cACTpO,EAAO8K,YAAS1K,GAAOJ,KAEvBF,EAAM,uCAAG,sBAAAmB,EAAA,sEACPoN,IADO,OAEbjN,EAAO6B,SAAS,QAFH,2CAAH,qDAKZ,OAAIjD,EAEA,sBAAKoE,UAAU,gBAAf,UACE,8CACA,sBAAKA,UAAU,gBAAf,UACE,uCACA,uBAAOwE,KAAK,OAAOrF,MAAOvD,EAAKL,SAAUgL,UAAQ,OAEnD,sBAAKvG,UAAU,gBAAf,UACE,kDACA,uBAAOwE,KAAK,WAAW0F,QAAStO,EAAKW,gBAAiBgK,UAAQ,OAEhE,8BACE,wBAAQhE,QAAS7G,EAAjB,yBAKC,M,MCiHIoK,OApIf,YAAuD,IAArCqE,EAAoC,EAApCA,eAAoC,EACVjJ,mBAAS,IADC,mBAC7CkJ,EAD6C,KAC9BC,EAD8B,OAEVnJ,mBAAS,IAFC,mBAE7CoJ,EAF6C,KAE9BC,EAF8B,OAGVrJ,mBAAS,IAHC,mBAG7CsJ,EAH6C,KAG9BC,EAH8B,OAIVvJ,mBAAS,IAJC,mBAI7CwJ,EAJ6C,KAI9BC,EAJ8B,KAM9C3N,EAASgN,cAETY,EAAgB7G,IAAM+F,YACtBe,EAAgB9G,IAAM+F,YATwB,EAUlB5I,oBAAS,GAVS,mBAU7C4J,EAV6C,KAUlCC,EAVkC,KAY9CtP,EAAK,uCAAG,4BAAAoB,EAAA,6DACZkO,GAAa,GADD,SAEkBC,EAAiB,CAC7CzP,SAAU6O,EACV5O,SAAU8O,IACTrQ,MAAK,kBAAM,KACXE,OAAM,WAIL,OAHC0Q,EAAcjJ,QAAgBoC,QAC9B6G,EAAcjJ,QAAgBqC,SAC/B0G,EAAiB,sBACV,KAVC,UAENM,EAFM,OAaZF,GAAa,IAETE,EAfQ,gCAgBJjO,EAAO6B,SAAS,QAhBZ,OAiBVhD,IAjBU,2CAAH,qDAmFX,OANA8F,qBAAU,WACRiB,IAAS,WACNgI,EAAchJ,QAAgBoC,aAEhC,IAGD,qBAAKhE,UAAU,wBAAf,SACE,uBAAMkL,SAxCO,SAAC1I,GAChBA,EAAEC,iBACF,IAAM0I,EA1Ba,WACnB,IAAMjR,EAAM,GAEZ,OAAKkQ,EAAcnD,QAQdqD,EAAcrD,SACjB/M,EAAIkJ,KAAK,CACPoG,MAAO,WACP4B,QAAS,2BAEPhB,EAAcnD,QACf4D,EAAcjJ,QAAgBoC,SAI5B9J,IAjBLA,EAAIkJ,KAAK,CACPoG,MAAO,WACP4B,QAAS,2BAEVR,EAAchJ,QAAgBoC,QACxB9J,GAiBWmR,GAEpB,GAAIF,EAAYlE,OAed,OAdAkE,EAAYG,SAAQ,SAAA3H,GAClB,OAAQA,EAAM6F,OACZ,IAAK,WACHiB,EAAiB9G,EAAMyH,SACvB,MACF,IAAK,WACHT,EAAiBhH,EAAMyH,kBAI7BG,QAAQC,IAAI,CACVjQ,SAAU6O,EACV5O,SAAU8O,IAKd7O,KAkBE,UACE,8BACE,cAAC,GAAD,CACEuF,IAAK4J,EACLlB,YAAY,WACZvK,MAAOiL,EACPzG,MAAO6G,EACP/F,QAAS,kBAAMgG,EAAiB,KAChC7B,SAAU,SAAApG,GAAC,OAAI6H,EAAiB7H,EAAEH,OAAOlD,QACzCsM,OAAQ,SAAAjJ,GAAC,OAAKA,EAAEH,OAAOlD,MAAM8H,OAAgC,KAAvBwD,EAAiB,SAE3D,8BACE,cAAC,GAAD,CACEzJ,IAAK6J,EACLrG,KAAK,WACLkF,YAAY,WACZvK,MAAOmL,EACP3G,MAAO+G,EACPjG,QAAS,kBAAMkG,EAAiB,KAChC/B,SAAU,SAAApG,GAAC,OAAI+H,EAAiB/H,EAAEH,OAAOlD,QACzCsM,OAAQ,SAAAjJ,GAAC,OAAKA,EAAEH,OAAOlD,MAAM8H,OAAgC,KAAvB0D,EAAiB,SAG3D,qBAAK3K,UAAU,eAAf,SACE,cAAC,GAAD,CAAUwE,KAAK,SAAS/C,QAASqJ,EAAWtJ,WAAW,EAAvD,uBAEF,gCACE,uCACA,mBAAGY,KAAK,IAAIG,QA3CC,SAACC,GACpBA,EAAEC,iBACE0H,GACFA,KAwCI,yCCOKuB,OAlIf,YAA8D,IAArCC,EAAoC,EAApCA,YACjB3O,EAASgN,cAD4C,EAE3B9I,mBAAS,IAFkB,mBAEpD3F,EAFoD,KAE1CqQ,EAF0C,OAG3B1K,mBAAS,IAHkB,mBAGpD1F,EAHoD,KAG1CqQ,EAH0C,OAIjB3K,mBAAS,IAJQ,mBAIpDsJ,EAJoD,KAIrCC,EAJqC,OAKjBvJ,mBAAS,IALQ,mBAKpDwJ,EALoD,KAKrCC,EALqC,OAMzBzJ,oBAAS,GANgB,mBAMpD4J,EANoD,KAMzCC,EANyC,KAOrDF,EAAgB9G,IAAM+F,YACtBc,EAAgB7G,IAAM+F,YAEtB1O,EAAQ,uCAAG,4BAAAyB,EAAA,6DACfkO,GAAa,GADE,SAEee,EAAoB,CAChDvQ,SAAUA,EACVC,SAAUA,IACTvB,MAAK,kBAAM,KACXE,OAAM,SAACC,GAAoB,IAAD,EAIzB,OAHCwQ,EAAchJ,QAAgBoC,QAC9B4G,EAAchJ,QAAgBqC,SAC/BwG,EAAgB,UAACrQ,EAAIC,gBAAL,aAAC,EAAcN,KAAKqR,UAC7B,KAVI,UAETH,EAFS,OAafF,GAAa,IAETE,EAfW,gCAgBPjO,EAAO6B,SAAS,QAhBT,OAiBbhD,IAjBa,2CAAH,qDAmFd,OANA8F,qBAAU,WACRiB,IAAS,WACNgI,EAAchJ,QAAgBoC,aAEhC,IAGD,qBAAKhE,UAAU,2BAAf,SACE,uBAAMkL,SAjCO,SAAC1I,GAChBA,EAAEC,iBACF,IAAM0I,EA1Ba,WACnB,IAAMjR,EAAM,GAEZ,OAAKqB,EAAS0L,QAQTzL,EAASyL,SACZ/M,EAAIkJ,KAAK,CACPoG,MAAO,WACP4B,QAAS,2BAEP7P,EAAS0L,QACV4D,EAAcjJ,QAAgBoC,SAI5B9J,IAjBLA,EAAIkJ,KAAK,CACPoG,MAAO,WACP4B,QAAS,2BAEVR,EAAchJ,QAAgBoC,QACxB9J,GAiBWmR,GAEpB,GAAIF,EAAYlE,OAed,OAdAkE,EAAYG,SAAQ,SAAA3H,GAClB,OAAQA,EAAM6F,OACZ,IAAK,WACHiB,EAAiB9G,EAAMyH,SACvB,MACF,IAAK,WACHT,EAAiBhH,EAAMyH,kBAI7BG,QAAQC,IAAI,CACVjQ,SAAUA,EACVC,SAAUA,IAKdJ,KAWE,UACE,8BACE,cAAC,GAAD,CACE4F,IAAK4J,EACLlB,YAAY,WACZvK,MAAO5D,EACPoI,MAAO6G,EACP/F,QAAS,kBAAMgG,EAAiB,KAChC7B,SAAU,SAAApG,GAAC,OAAIoJ,EAAYpJ,EAAEH,OAAOlD,QACpCsM,OAAQ,SAAAjJ,GAAC,OAAKA,EAAEH,OAAOlD,MAAM8H,OAAgC,KAAvBwD,EAAiB,SAE3D,8BACE,cAAC,GAAD,CACEzJ,IAAK6J,EACLrG,KAAK,WACLkF,YAAY,WACZvK,MAAO3D,EACPmI,MAAO+G,EACPjG,QAAS,kBAAMkG,EAAiB,KAChC/B,SAAU,SAAApG,GAAC,OAAIqJ,EAAYrJ,EAAEH,OAAOlD,QACpCsM,OAAQ,SAAAjJ,GAAC,OAAKA,EAAEH,OAAOlD,MAAM8H,OAAgC,KAAvB0D,EAAiB,SAG3D,qBAAK3K,UAAU,eAAf,SACE,cAAC,GAAD,CAAUwE,KAAK,SAAS/C,QAASqJ,EAAWtJ,WAAW,EAAvD,uBAEF,gCACE,uCACA,mBAAGY,KAAK,IAAIG,QA5FF,SAACC,GACjBA,EAAEC,iBACEkJ,GACFA,KAyFI,sC,MChHKI,OApBf,WAAsB,IAAD,EACK7K,mBAAS,SADd,mBACZ6E,EADY,KACNiG,EADM,KAGnB,OACE,sBAAKhM,UAAU,aAAf,UACE,6BACY,aAAT+F,EACG,+DACA,oEAGN,qBAAK/F,UAAU,oBAAf,SACY,aAAT+F,EACG,cAAC,GAAD,CAAc4F,YAAa,kBAAMK,EAAQ,YACzC,cAAC,GAAD,CAAW7B,eAAgB,kBAAM6B,EAAQ,qB,MCgEtCC,OAxEf,WAAwB,IAAD,EACW/K,oBAAS,GADpB,mBACdgL,EADc,KACJC,EADI,OAEGjL,mBAAS,IAFZ,mBAEdkL,EAFc,KAERC,EAFQ,OAGuBnL,mBAAS,IAHhC,mBAGdoL,EAHc,KAGEC,EAHF,KAIf3Q,EAAO8K,YAAS1K,GAAOJ,KACvBoB,EAASgN,cACTwC,EAAYzI,IAAM+F,YAElBpO,EAAM,uCAAG,WAAO8G,GAAP,SAAA3F,EAAA,6DACb2F,EAAEC,iBADW,SAEPgK,IAFO,OAGbzP,EAAO6B,SAAS,QAHH,2CAAH,sDAMNqM,EAAQ,uCAAG,WAAO1I,GAAP,SAAA3F,EAAA,yDACf2F,EAAEC,iBAEG2J,EAAKnF,OAHK,uBAIbsF,EAAkB,0BAClB3J,IAAS,WAAO,IAAD,EACb,QAAC,EAAA4J,EAAU5K,eAAX,SAA4BoC,WANjB,iCAWfmI,GAAY,GAXG,SAYTxR,EAAOyR,GAAMjS,OAAM,SAAAqI,GACvB+J,EAAkB,IAClBA,EAAkB/J,EAAEnI,SAASN,KAAKqR,SAClCxI,IAAS,WAAO,IAAD,EACb,QAAC,EAAA4J,EAAU5K,eAAX,SAA4BoC,cAhBjB,OAoBfmI,GAAY,GApBG,2CAAH,sDA8Bd,OAPAxK,qBAAU,WAIR,OAHAiB,IAAS,WAAO,IAAD,EACb,QAAC,EAAA4J,EAAU5K,eAAX,SAA4BoC,WAEvB,eACN,IAGD,sBAAKhE,UAAU,eAAf,UACE,gDAEA,sBAAKA,UAAU,qBAAf,UACE,8EAEA,uBAAMA,UAAU,cAAckL,SAAUA,EAAxC,UACE,8BACE,cAAC,GAAD,CAASlK,IAAKwL,EAAWhI,KAAK,WAAWb,MAAO2I,EAAgB5C,YAAY,qBAAqBvK,MAAOiN,EAAM3H,QAAS,SAACjC,GAAD,OAA4C6J,EAAQ7J,EAAEH,OAAOlD,YAEtL,8BACE,cAAC,GAAD,CAAUqF,KAAK,SAAS/C,QAASyK,EAAU1K,WAAW,EAAtD,yBAIJ,sBAAKxB,UAAU,uBAAf,UACE,oDACA,qBAAKA,UAAU,OAAf,gBAAuBpE,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAML,WAC7B,wCACA,mBAAG6G,KAAK,IAAIG,QAAS7G,EAArB,oBACA,8CCxEGgR,GAAmB,SAAC3S,GAA0C,IAA5B4S,EAA2B,uDAAP,GAC7DC,GAAW,EAWf,OAVAlT,OAAOmT,QAAQ9S,GAAM+S,OAAM,SAAAC,GACzB,QAAIJ,EAAQ3F,SAAS+F,EAAK,OAGtBA,EAAK,KACPH,GAAW,GACJ,QAIHA,GC8CKI,OA3Df,WAAyB,IACfhQ,EAAWiQ,cAAXjQ,OADc,EAEEkE,mBAAS,IAFX,mBAEf1E,EAFe,KAET0Q,EAFS,OAGAhM,mBAAS,IAHT,mBAGf1H,EAHe,KAGV2T,EAHU,OAIUjM,mBAAS,IAJnB,mBAIf3F,EAJe,KAILqQ,EAJK,OAKU1K,mBAAS,IALnB,mBAKf1F,EALe,KAKLqQ,EALK,OAME3K,mBAAS,IANX,mBAMfiF,EANe,KAMTiH,EANS,KAQhBC,EAAM,uCAAG,WAAO7K,GAAP,iBAAA3F,EAAA,yDACb2F,EAAEC,kBAUEiK,GATE3F,EAAO,CACXuG,MAAO,KACP9Q,OACAhD,MACA+B,WACAC,WACA2K,QAGyB,CAAC,UAXf,gBAYXoH,MAAM,2BAZK,uCAcOrK,GAAW6D,GAdlB,OAcL7M,EAdK,OAeX8C,EAAO6B,SAAS,OAAQ,CAAE+B,GAAI1G,EAAIgN,MAfvB,4CAAH,sDAmBZ,OACE,sBAAKlH,UAAU,YAAf,UACE,+CACA,uBAAMkL,SAAUmC,EAAhB,UACE,gCACE,uCACA,uBAAO7I,KAAK,OAAOhI,KAAK,OAAO2C,MAAO3C,EAAMiI,QAAS,SAACjC,GAAD,OAA4C0K,EAAQ1K,EAAEH,OAAOlD,aAEpH,gCACE,sCACA,uBAAOqF,KAAK,OAAOhI,KAAK,MAAM2C,MAAO3F,EAAKiL,QAAS,SAACjC,GAAD,OAA4C2K,EAAO3K,EAAEH,OAAOlD,aAEjH,gCACE,2CACA,uBAAOqF,KAAK,OAAOhI,KAAK,WAAW2C,MAAO5D,EAAUkJ,QAAS,SAACjC,GAAD,OAA4CoJ,EAAYpJ,EAAEH,OAAOlD,aAEhI,gCACE,2CACA,uBAAOqF,KAAK,OAAOhI,KAAK,WAAW2C,MAAO3D,EAAUiJ,QAAS,SAACjC,GAAD,OAA4CqJ,EAAYrJ,EAAEH,OAAOlD,aAEhI,gCACE,uCACA,0BAAU3C,KAAK,OAAO2C,MAAOgH,EAAM1B,QAAS,SAACjC,GAAD,OAA+C4K,EAAQ5K,EAAEH,OAAOlD,aAE9G,8BACE,wBAAQqF,KAAK,SAAb,6BCNKgJ,OA9Cf,WAAqB,MAEKtM,mBAAe,MAFpB,mBAEZnH,EAFY,KAEN0T,EAFM,OAGOR,cAAlBS,EAHW,EAGXA,MAAO1Q,EAHI,EAGJA,OAYf,OAVA2E,qBAAU,WAAM,4CACd,sBAAA9E,EAAA,sDACEoG,GAAQyK,EAAM5T,OAAO8G,IAAI3G,MAAK,SAAAC,GAC5BuT,EAAQvT,MACPC,OAAM,kBAAM6C,EAAO6B,SAAS,WAHjC,4CADc,sBAOd,OAPe,WAAD,wBAMd8O,GACO,eACN,CAACD,EAAM5T,OAAO8G,KAGf,sBAAKZ,UAAU,eAAf,UACE,2CACEjG,EACE,gCACA,gCACE,uCACA,uBAAOyK,KAAK,OAAOrF,MAAOpF,EAAKyC,KAAM+J,UAAQ,OAE/C,gCACE,sCACA,uBAAO/B,KAAK,OAAOrF,MAAOpF,EAAKP,IAAK+M,UAAQ,OAE9C,gCACE,2CACA,uBAAO/B,KAAK,OAAOrF,MAAOpF,EAAKwB,SAAUgL,UAAQ,OAEnD,gCACE,2CACA,uBAAO/B,KAAK,OAAOrF,MAAOpF,EAAKyB,SAAU+K,UAAQ,OAEnD,gCACE,uCACA,0BAAUpH,MAAOpF,EAAKoM,KAAMI,UAAQ,UAGtC,SCpCKqH,OARf,WACE,OACE,qBAAK5N,UAAU,kBAAf,SACE,yC,MCQS6N,OARf,WACE,OACE,qBAAK7N,UAAU,qCAAf,SACE,cAAC,GAAD,O,QCFO8N,GAAU/O,YAFK,IAGzB7C,GAAGlB,GAAW,SAACoB,EAAOwE,GACrB,IAAMmN,EAAM,IAAIC,IAAJ,uBAAY5R,GAAU,CAACwE,KAEnC,OADAxE,EAAQ6R,MAAMC,KAAKH,MAGpB7R,GAAGjB,GAAY,SAACmB,EAAOwE,GAEtB,OADAxE,EAAQA,EAAMwB,QAAO,SAACa,GAAD,OAAOA,IAAMmC,QAGnC1E,GAAGhB,GAAgB,SAAAkB,GAElB,OADAA,EAAQA,EAAM+I,MAAM,EAAG,MAGxBjJ,GAAGf,GAAgB,iBAAM,M,MCyEbgT,OAzEf,SAAuBpN,QACEqN,IAAnBrN,EAAMsN,WACRtN,EAAMsN,UAAW,GAF4B,MAKfnN,oBAAS,GALM,mBAKxCoN,EALwC,KAK9BC,EAL8B,KAMzCC,EAAS9H,YAASoH,IANuB,EAOvB5M,oBAAS,GAPc,mBAOxCuE,EAPwC,KAOlCgJ,EAPkC,KAQzCpN,EAAS,2BAAuBN,EAAMH,GAA7B,kBAAyCG,EAAMQ,MAAQ,WAEtEI,qBAAU,WACR4M,GAAY,KACX,IAEH5M,qBAAU,WACR,IAAM+M,EAAUZ,GAAQa,OAAM,SAAAH,GAC5BC,EAAQD,EAAOxH,SAASjG,EAAMH,QAEhC,OAAO,WACL8N,OAED,CAACF,IAEJ7M,qBAAU,WACJ2M,IACE7I,GAAQ1E,EAAM6N,QAChB7N,EAAM6N,UAEHnJ,GAAQ1E,EAAM8N,SACjB9N,EAAM8N,aAGT,CAACpJ,IAEJ,IAAMqJ,EAAQ,WACR/N,EAAMsN,UACRpT,EAAW8F,EAAMH,KAWrB,OAAI6E,EAEA,qBAAKzF,UAAWqB,EAAWkB,QATT,SAACC,GACrB,IAAMH,EAASG,EAAEH,OACbA,EAAOhB,UAAU2H,SAAS,UAAY3G,EAAOhB,UAAU2H,SAAS,cAClE8F,KAMA,SACE,yBAAQC,MAAI,EAAC/O,UAAU,SAAvB,UACGe,EAAMsN,UAAY,qBAAKrO,UAAU,QAAQuC,QAASuM,EAAhC,SACjB,cAAC,GAAD,MAEF,qBAAK9O,UAAU,OAAf,SACE,qBAAKA,UAAU,iBAAf,SAAiCe,EAAMiO,YAEzC,qBAAKhP,UAAU,OAAf,SAAuBe,EAAMgB,gBAK5B,MC9BIkN,OA9Cf,WACE,IAAMrO,EAAK,oBADoB,EAEPM,mBAAS,IAFF,mBAExBkL,EAFwB,KAElBC,EAFkB,KAI3BG,EAAY,KAKVC,EAAO,uCAAG,WAAOjK,GAAP,SAAA3F,EAAA,6DACd2F,EAAEC,iBADY,SAER/G,IAFQ,OAGdT,EAAW2F,GAHG,2CAAH,sDAMPsK,EAAQ,uCAAG,WAAO1I,GAAP,SAAA3F,EAAA,6DACf2F,EAAEC,iBADa,SAET1G,EAAoBqQ,GAFX,2CAAH,sDAWd,OANAzK,qBAAU,WACRiB,IAAS,WAAO,IAAD,EACJ,QAAT,EAAA4J,SAAA,SAAWxI,aAEZ,CAACwI,IAGF,eAAC,GAAD,CAAc5L,GAAIA,EAAIyN,UAAU,EAAhC,UACE,uBAAMnD,SAAUA,EAAhB,UACE,0DACA,8BACE,uBAAO1G,KAAK,OAAOxD,IA1BH,SAACkO,GACvB1C,EAAY0C,GAyBmC/P,MAAOiN,EAAM3H,QAAS,SAACjC,GAAD,OAA4C6J,EAAQ7J,EAAEH,OAAOlD,YAE9H,8BACE,wBAAQqF,KAAK,SAAb,mBAEF,qEAGF,8BACE,mBAAGpC,KAAK,IAAIG,QAASkK,EAArB,0B,MCpBO0C,OAnBf,WAA6B,IAAD,EACFjO,oBAAS,GADP,mBACnBuE,EADmB,KACbgJ,EADa,KAY1B,OATA9M,qBAAU,WACR,IAAM+M,EAAUZ,GAAQa,OAAM,SAAAH,GAC5BC,IAAUD,EAAOvH,WAEnB,OAAO,WACLyH,QAKF,qBAAK1O,UAAS,2BAAsByF,EAAO,UAAY,IAAvD,SACE,cAAC,GAAD,OC2DS2J,OAvDf,WAAiB,IACP1B,EAAUT,cAAVS,MACFtO,EAASsH,YAAS5H,GAoBxB,SAASuQ,IACP,OAAQ3B,EAAMlR,MACZ,IAAK,OACH,OAAO,cAAC,GAAD,UAAe,cAAC,GAAD,MACxB,IAAK,OACH,OAAO,cAAC,GAAD,UAAc,cAAC,GAAD,MACvB,IAAK,SACH,OAAO,cAAC,GAAD,UAAc,cAAC,GAAD,MACvB,IAAK,UACH,OAAO,cAAC,GAAD,UAAe,cAAC,GAAD,MACxB,IAAK,MACH,OAAO,cAAC,GAAD,UAAe,cAAC,GAAD,MACxB,IAAK,OACH,OAAO,cAAC,GAAD,UAAe,cAAC,GAAD,MACxB,QACE,OAAO,cAAC,GAAD,UAAc,cAAC,GAAD,OAI3B,OArCAmF,qBAAU,WACR,IAAM2N,EAAiB1P,EAAW+O,OAAM,SAAArL,GAClCA,GAIFzH,OAGJ,OAAO,WACLyT,OAED,IAEH3N,qBAAU,WACR9G,MACC,CAACuE,IAqBAsO,EAEA,sBAAK1N,UAAU,MAAf,UACE,cAACqP,EAAD,IACA,cAAC,GAAD,OAKF,cAAC,GAAD,KChEOrS,I,MAASsC,KAEtBiQ,IAASC,OACP,cAAC,IAAD,CAAgBxS,OAAQA,GAAxB,SACE,cAAC,GAAD,MAEFqK,SAASoI,eAAe,SAG1BzS,GAAO0S,OAAM,WACX9P,GAAW,Q","file":"static/js/main.9be6d1fd.chunk.js","sourcesContent":["import { createDomain } from 'effector'\n\nexport const AuthDomain = createDomain()\n","import { createDomain } from 'effector'\n\nexport const LockerDomain = createDomain()\n","import axios, { AxiosRequestConfig } from 'axios'\nimport { setIsAppLocked } from '../store/locker/events'\n\nexport const sendRequest = (options: AxiosRequestConfig) => {\n  const mergedOptions = {\n    method: 'get',\n    withCredentials: true,\n    ...options\n  } as AxiosRequestConfig\n\n  mergedOptions.url = `${process.env.REACT_APP_API_BASE_URL}${options.url}`\n\n  if (mergedOptions.method === 'get' && Object.prototype.hasOwnProperty.call(mergedOptions, 'data')) {\n    mergedOptions.params = options.data\n    delete mergedOptions.data\n  }\n\n  return axios(mergedOptions)\n    .then(res => res.data)\n    .catch(err => {\n      if (err?.response?.status === 423) {\n        setIsAppLocked(true)\n      }\n      throw err\n    })\n}\n\nexport default { sendRequest }\n","import { LockerDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { SecurityCode } from './types'\n\nexport const lock = LockerDomain.createEffect<void, void>().use(() => {\n  return sendRequest({\n    method: 'post',\n    url: '/lock'\n  })\n})\n\nexport const unlock = LockerDomain.createEffect<SecurityCode, void>().use((securityCode: SecurityCode) => {\n  return sendRequest({\n    method: 'post',\n    url: '/unlock',\n    data: { securityCode }\n  })\n})\n\nexport const checkIsAppLocked = LockerDomain.createEvent()\n\nexport const setIsAppLocked = LockerDomain.createEvent<boolean>()\n","import { createDomain } from 'effector'\n\nexport const ModalsDomain = createDomain()\n","import { ModalsDomain } from './domain'\nimport { ModalName } from './types'\n\nexport const openModal = ModalsDomain.createEvent<ModalName>('open modal')\n\nexport const closeModal = ModalsDomain.createEvent<ModalName>('close modal')\n\nexport const closeLastModal = ModalsDomain.createEvent('close last modal')\n\nexport const closeAllModals = ModalsDomain.createEvent('close all modals')\n","import { AuthDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { RegisterPayload, User, LoginPayload, LoginResponse, AuthCheckResponse, SecurityCode } from './types'\n\nexport const register = AuthDomain.effect<RegisterPayload, User>().use((payload) => {\n  return sendRequest({\n    method: 'post',\n    data: {\n      username: payload.username,\n      password: payload.password\n    },\n    url: '/register'\n  })\n})\n\nexport const login = AuthDomain.effect<LoginPayload, LoginResponse>().use((payload) => {\n  return sendRequest({\n    method: 'post',\n    data: {\n      username: payload.username,\n      password: payload.password\n    },\n    url: '/login'\n  })\n})\n\nexport const logout = AuthDomain.effect<void, void>().use(() => {\n  return sendRequest({\n    url: '/logout'\n  })\n})\n\nexport const checkAuth = AuthDomain.effect<void, AuthCheckResponse>().use(() => {\n  return sendRequest({\n    url: '/auth'\n  }).catch(() => ({ user: null }))\n})\n\nexport const checkUserSecurityCode = AuthDomain.event()\n\nexport const setUserSecurityCode = AuthDomain.effect<SecurityCode, void>().use((securityCode) => {\n  return sendRequest({\n    method: 'post',\n    url: '/security-code',\n    data: { securityCode }\n  })\n})\n","import { AuthState } from './types'\nimport { AuthDomain } from './domain'\nimport { checkIsAppLocked, setIsAppLocked } from '../locker/events'\nimport { closeModal, openModal } from '../modals/events'\nimport { register, login, logout, checkAuth, checkUserSecurityCode, setUserSecurityCode } from './events'\n\nconst initialState: AuthState = {\n  user: null\n}\n\nexport const $auth = AuthDomain.store<AuthState>(initialState)\n  .on(register.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result\n    }\n    return state\n  })\n  .on(login.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result.user\n    }\n    checkIsAppLocked()\n    return state\n  })\n  .on(logout.done, (state) => {\n    state = {\n      ...state,\n      user: null\n    }\n    return state\n  })\n  .on(checkAuth.done, (state, { result }) => {\n    state = {\n      ...state,\n      user: result.user\n    }\n    setIsAppLocked(result.isAppLocked)\n    return state\n  })\n  .on(checkUserSecurityCode, (state) => {\n    state.user && !state.user.hasSecurityCode && openModal('set_security_code')\n    return state\n  })\n  .on(setUserSecurityCode, (state) => {\n    closeModal('set_security_code')\n    return state\n  })\n\nexport default { $auth }\n","export default [\n  {\n    name: 'home',\n    path: '/',\n    private: true\n  },\n  {\n    name: 'auth',\n    path: '/auth',\n    forGuests: true\n  },\n  {\n    name: 'unlock',\n    path: '/unlock',\n    private: true\n  },\n  {\n    name: 'item',\n    path: '/item/:id',\n    private: true\n  },\n  {\n    name: 'profile',\n    path: '/profile',\n    private: true\n  },\n  {\n    name: 'add',\n    path: '/add',\n    private: true\n  },\n  {\n    name: '404',\n    path: '/404'\n  }\n]\n","import transitionPath from 'router5-transition-path'\nimport { $auth } from '../../store/auth/store'\n// import { $locker } from '../../store/locker/store'\nimport { checkAuth } from '../../store/auth/events'\nimport { State } from 'router5/dist/types/base'\nimport { Router } from 'router5/dist/types/router'\n// import { checkIsAppLocked } from '../../store/locker/events'\n\nimport routes from '../routes'\n\nasync function _checkAuth () {\n  const user = $auth.getState().user\n  // console.log('_checkAuth', user)\n  if (!user) {\n    await checkAuth()\n  }\n}\n\nfunction _checkLocker () {\n  // checkIsAppLocked()\n  // const user = $auth.getState().user\n  // if (!user) {\n  //   return\n  // }\n  // const isLocked = $locker.getState().isLocked\n  // console.log('_checkLocker', isLocked)\n}\n\nexport const session = (router: Router) => (toState: State, fromState: State) => {\n  const { toActivate } = transitionPath(toState, fromState)\n  const onActivateHandlers =\n    toActivate\n      .map(segment => (routes as any).find((r: State) => r.name === segment).onActivate)\n      .filter(Boolean)\n\n  return Promise\n    .all(onActivateHandlers.map(callback => callback()))\n    // actions before app mounting\n    .then(async data => {\n      await _checkAuth()\n      _checkLocker()\n      return data\n    })\n    .then(data => {\n      const routeData = data.reduce((accData: any, rData: any) => Object.assign(accData, rData), {})\n      return { ...toState, data: routeData }\n    })\n}\n\nexport default session\n","import { $auth } from '../../store/auth/store'\nimport routes from '../routes'\nimport { State } from 'router5/dist/types/base'\n\nfunction showOnlyForGuests (): boolean {\n  return !$auth.getState().user\n}\n\nfunction showOnlyForAuthed (): boolean {\n  return !!$auth.getState().user\n}\n\nconst canActivate = (routeName: string): boolean => {\n  const foundRoute = routes.find(i => i.name === routeName)\n  const isRouterOnlyForGuests = foundRoute ? !!foundRoute.forGuests : false\n  const isRouterOnlyForAuthed = foundRoute ? !!foundRoute.private : false\n\n  if (isRouterOnlyForGuests) {\n    return showOnlyForGuests()\n  } else if (isRouterOnlyForAuthed) {\n    return showOnlyForAuthed()\n  } else {\n    return true\n  }\n}\n\nexport const accessor = (router: any) => (toState: State, fromState: State, done: any) => {\n  if (!canActivate(toState.name)) {\n    // redirecting from unavailable pages to default\n    return router.navigate($auth.getState().user ? 'home' : 'auth')\n  }\n  done()\n}\n\nexport default accessor\n","import { createStore } from 'effector'\nimport { checkIsAppLocked, lock, setIsAppLocked, unlock } from './events'\nimport { $auth } from '../auth/store'\nimport { router } from '../../index'\nimport { State } from './types'\n\nconst initialState: State = {\n  isLocked: false,\n  lastPath: null\n}\n\nexport const $locker = createStore(initialState)\n  .on(lock.done, state => {\n    state = {\n      ...state,\n      isLocked: true\n    }\n    return state\n  })\n  .on(unlock.done, state => {\n    state = {\n      ...state,\n      isLocked: false\n    }\n    return state\n  })\n  .on(checkIsAppLocked, state => {\n    const routerState = router.getState()\n    const isAuthed = !!$auth.getState().user\n\n    if (isAuthed && routerState) {\n      if (state.isLocked && routerState.name !== 'unlock') {\n        router.navigate('unlock')\n      }\n      if (!state.isLocked && routerState.name === 'unlock') {\n        router.navigate('home')\n        // TODO: last url\n      }\n    }\n    return state\n  })\n  .on(setIsAppLocked, (state, value) => {\n    checkIsAppLocked()\n    return {\n      ...state,\n      isLocked: value\n    }\n  })\n\nexport default $locker\n","import { State } from 'router5/dist/types/base'\nimport { $locker } from '../../store/locker/store'\n\nexport const locker = (router: any) => (toState: State, fromState: State, done: any) => {\n  const isLocked = $locker.getState().isLocked\n\n  if (isLocked && toState.name !== 'unlock') {\n    return router.navigate('unlock')\n  }\n  done()\n}\n\nexport default locker\n","import createRouter from 'router5'\nimport loggerPlugin from 'router5-plugin-logger'\nimport browserPlugin from 'router5-plugin-browser'\n\n// middlewares and plugins\nimport session from './middlewares/session'\nimport accessor from './middlewares/accessor'\nimport locker from './middlewares/locker'\n\n// routes\nimport routes from './routes'\n\nexport function configureRouter () {\n  const router = createRouter(routes, {})\n\n  router.usePlugin(loggerPlugin)\n  router.usePlugin(browserPlugin())\n\n  // middleware\n  router.useMiddleware(session, accessor, locker)\n\n  return router\n}\n\nexport default { configureRouter }\n","import { createDomain } from 'effector'\n\nexport const AppDomain = createDomain()\n","import { MountedState } from './types'\nimport { AppDomain } from './domain'\n\nexport const setMounted = AppDomain.event<MountedState>()\n\nexport const toggleMasonryItem = AppDomain.event<void>()\n\nexport const itemsFiltered = AppDomain.event<void>()\n","import React from 'react'\n\nimport './_index.scss'\n\nfunction RoundLoader () {\n  return (\n    <div className=\"component -loader-round\">\n      <svg className=\"svg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 20 20\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n          <g transform=\"translate(-629.000000, -385.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n            <path d=\"M631.20799,398.4917 C631.37363,398.8603 631.2091,399.2933 630.8405,399.459 C630.4719,399.6246 630.03881,399.4601 629.873162,399.0915 C629.300253,397.8166 629,396.4285 629,395 C629,389.47726 633.47726,385 639,385 C644.5227,385 649,389.47726 649,395 C649,400.5227 644.5227,405 639,405 C636.65339,405 634.42972,404.1881 632.65267,402.7281 C632.34042,402.4715 632.29526,402.0105 632.55179,401.6982 C632.80833,401.386 633.26941,401.3408 633.58166,401.5973 C635.09934,402.8442 636.9955,403.5366 639,403.5366 C643.7145,403.5366 647.5366,399.7145 647.5366,395 C647.5366,390.28549 643.7145,386.46341 639,386.46341 C634.28549,386.46341 630.46341,390.28549 630.46341,395 C630.46341,396.2208 630.71947,397.4046 631.20799,398.4917 Z\" id=\"Path\"></path>\n          </g>\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport default RoundLoader\n","import React, { forwardRef, useEffect, useRef, useState } from 'react'\n\nimport LoaderRound from '../../loader/round'\n\nimport './_index.scss'\n\ninterface ButtonOptions extends React.ButtonHTMLAttributes<any> {\n  fullWidth?: boolean,\n  loading?: boolean,\n  size?: 'default' | 'small',\n  theme?: 'default' | 'ghost'\n}\n\nconst Button = forwardRef((props: ButtonOptions, ref) => {\n  if (!ref) {\n    ref = useRef()\n  }\n\n  const [buttonProps, setButtonProps] = useState({})\n  const classList = `button -component -theme-${props.theme || 'default'} -size-${props.size || 'default'} ${props.fullWidth ? '-full-width' : ''} ${props.loading ? '-loading' : ''}`\n  const innerRef = useRef(null)\n\n  const update = () => {\n    // @ts-ignore\n    ref.current = {}\n\n    // eslint-disable-next-line no-new-object\n    const fieldProps = { ...props } as ButtonOptions\n    delete fieldProps.fullWidth\n    delete fieldProps.loading\n    delete fieldProps.size\n    delete fieldProps.theme\n    setButtonProps(fieldProps)\n  }\n\n  useEffect(() => {\n    update()\n  }, [props])\n\n  return (\n    <div className={classList}>\n      <button {...buttonProps} ref={innerRef}>\n        { props.loading\n          ? <div className=\"loader\">\n            <LoaderRound />\n          </div>\n          : props.children }\n      </button>\n    </div>\n  )\n})\n\nButton.displayName = 'Button'\n\nexport default Button\n","import React from 'react'\n\nimport './_index.scss'\n\nfunction IconLock () {\n  return (\n    <svg className=\"icon -lock\" width=\"12px\" height=\"16px\" viewBox=\"0 0 12 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-858.000000, -67.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n          <g transform=\"translate(858.000000, 67.000000)\">\n            <path d=\"M9.6969697,6.67253333 L9.6969697,4.12116364 C9.6969697,1.84877576 7.84819394,0 5.57575758,0 C3.30332121,0 1.45459394,1.84877576 1.45459394,4.12116364 L1.45459394,6.67243636 C0.551418182,7.66370909 0,8.9808 0,10.4242424 C0,13.4987152 2.50128485,16 5.57575758,16 C8.6502303,16 11.1515152,13.4987152 11.1515152,10.4242424 C11.1515152,8.9808 10.600097,7.66370909 9.6969697,6.67253333 Z M5.57575758,1.45454545 C7.04615758,1.45454545 8.24242424,2.65081212 8.24242424,4.12116364 L8.24242424,5.5286303 C7.44979394,5.09517576 6.54109091,4.84848485 5.57575758,4.84848485 C4.61047273,4.84848485 3.7017697,5.09517576 2.90913939,5.5286303 L2.90913939,4.12116364 C2.90913939,2.65081212 4.10535758,1.45454545 5.57575758,1.45454545 Z M5.57575758,14.5454545 C3.30332121,14.5454545 1.45454545,12.6966788 1.45454545,10.4242424 C1.45454545,8.15180606 3.30332121,6.3030303 5.57575758,6.3030303 C7.84819394,6.3030303 9.6969697,8.15180606 9.6969697,10.4242424 C9.6969697,12.6966788 7.84819394,14.5454545 5.57575758,14.5454545 Z\" id=\"XMLID_811_\"></path>\n            <path d=\"M5.57575758,8.48484848 C4.90739394,8.48484848 4.36363636,9.02860606 4.36363636,9.6969697 C4.36363636,10.092703 4.55427879,10.4446545 4.84848485,10.6659879 L4.84848485,11.6363636 C4.84848485,12.0380121 5.17410909,12.3636364 5.57575758,12.3636364 C5.97740606,12.3636364 6.3030303,12.0380121 6.3030303,11.6363636 L6.3030303,10.6659879 C6.59723636,10.4446545 6.78787879,10.0926545 6.78787879,9.6969697 C6.78787879,9.02860606 6.24412121,8.48484848 5.57575758,8.48484848 Z\" id=\"XMLID_815_\"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  )\n}\n\nexport default IconLock\n","import React from 'react'\n\nfunction IconAdd () {\n  return (\n    <svg className=\"icon -add\" width=\"14px\" height=\"14px\" viewBox=\"0 0 14 14\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-1000.000000, -56.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n          <g transform=\"translate(984.000000, 43.000000)\">\n            <g transform=\"translate(16.000000, 11.000000)\">\n              <g transform=\"translate(0.000000, 2.000000)\">\n                <path d=\"M7,0 C10.8599548,0 14,3.14004518 14,7 C14,10.8599548 10.8599548,14 7,14 C3.14004518,14 0,10.8599548 0,7 C0,3.14004518 3.14004518,0 7,0 Z M7,3.35420228 C6.67796325,3.35420228 6.41670228,3.61546325 6.41670228,3.9375 L6.41670228,3.9375 L6.41670228,6.41670228 L3.9375,6.41670228 C3.61546325,6.41670228 3.35420228,6.67796325 3.35420228,7 C3.35420228,7.32203675 3.61546325,7.58329772 3.9375,7.58329772 L3.9375,7.58329772 L6.41670228,7.58329772 L6.41670228,10.0625 C6.41670228,10.3845368 6.67796325,10.6457977 7,10.6457977 C7.32203675,10.6457977 7.58329772,10.3845368 7.58329772,10.0625 L7.58329772,10.0625 L7.58329772,7.58329772 L10.0625,7.58329772 C10.3845368,7.58329772 10.6457977,7.32203675 10.6457977,7 C10.6457977,6.67796325 10.3845368,6.41670228 10.0625,6.41670228 L10.0625,6.41670228 L7.58329772,6.41670228 L7.58329772,3.9375 C7.58329772,3.61546325 7.32203675,3.35420228 7,3.35420228 Z\" id=\"Path-3\"></path>\n              </g>\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  )\n}\n\nexport default IconAdd\n","import React from 'react'\nimport { Link } from 'react-router5'\nimport { lock } from '../../store/locker/events'\n\nimport UIButton from '../ui/button'\nimport IconLock from '../icons/lock'\nimport IconAdd from '../icons/add'\n\nimport './_index.scss'\n\nfunction Header () {\n  const lockApp = (e: React.FormEvent) => {\n    e.preventDefault()\n    lock()\n  }\n\n  return (\n    <header className=\"component -header flex a-center j-between\">\n      <nav>\n        <Link routeName=\"home\">Home</Link>\n        <Link routeName=\"profile\">Account</Link>\n        {/* <Link routeName=\"about\">About</Link> */}\n        <a href=\"https://github.com/star-tech-dev/passwords-frontend\" target=\"_blank\" rel=\"noreferrer\">Github</a>\n      </nav>\n      <div className=\"right flex a-center\">\n        <UIButton size=\"small\" theme=\"ghost\" onClick={lockApp}>\n          <IconLock />\n          <span>Lock app</span>\n        </UIButton>\n        <Link routeName=\"add\">\n          <UIButton size=\"small\">\n            <IconAdd />\n            <span>New item</span>\n          </UIButton>\n        </Link>\n      </div>\n    </header>\n  )\n}\n\nexport default Header\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport HeaderComponent from '../components/header'\n\nconst DefaultLayout: React.FC = ({ children }) => {\n  return (\n    <div className=\"layout -default\">\n      <div className=\"container\">\n        <HeaderComponent />\n        <main>{children}</main>\n      </div>\n    </div>\n  )\n}\n\nDefaultLayout.propTypes = {\n  children: PropTypes.node\n}\n\nexport default DefaultLayout\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport './_index.scss'\n\nconst SimpleLayout: React.FC = ({ children }) => {\n  return (\n    <div className=\"layout -simple\">\n      <main>\n        <div className=\"container\">\n          {children}\n        </div>\n      </main>\n    </div>\n  )\n}\n\nSimpleLayout.propTypes = {\n  children: PropTypes.node\n}\n\nexport default SimpleLayout\n","/**\n * next tick helper\n * @param cb {function}\n */\nexport const nextTick = (cb: any) => {\n  setTimeout(cb, 0)\n}\n\nexport default {\n  nextTick\n}\n","import { createDomain } from 'effector'\n\nexport const ItemsDomain = createDomain()\n","import { ItemsDomain } from './domain'\nimport { sendRequest } from '../../api'\nimport { ItemId, Item, ItemPayload } from './types'\n\nexport const getItems = ItemsDomain.createEffect<void, Array<Item>>().use(() => {\n  return sendRequest({\n    url: '/items'\n  }).catch(() => [])\n})\n\nexport const getItem = ItemsDomain.createEffect<ItemId, Item>().use(id => {\n  return sendRequest({\n    data: { id },\n    url: '/item'\n  })\n})\n\nexport const createItem = ItemsDomain.createEffect<ItemPayload, Item>().use(payload => {\n  return sendRequest({\n    method: 'post',\n    data: payload,\n    url: '/items'\n  })\n})\n","import { createStore } from 'effector'\nimport { createItem, getItems } from './events'\nimport { State } from './types'\n\nconst initialState: State = []\n\nexport const $items = createStore(initialState)\n  .on(getItems.done, (state, { result }) => {\n    state = result\n    return state\n  })\n  .on(createItem.done, (state, { result }) => {\n    if (result) {\n      state.push(result)\n    }\n    return state\n  })\n\nexport default $items\n","import { AppState } from './types'\nimport { AppDomain } from './domain'\nimport { setMounted } from './events'\n\nconst initialState: AppState = {\n  mounted: false\n}\n\nexport const $app = AppDomain.store<AppState>(initialState)\n  .on(setMounted, (state, value) => {\n    state.mounted = value\n    return state\n  })\n\nexport default { $app }\n","import React from 'react'\n\ninterface IconOptions extends React.HTMLAttributes<any> {}\n\nfunction InfoIcon (props: IconOptions) {\n  return (\n    <div {...props} className=\"icon -cross\">\n      <svg width=\"18px\" height=\"18px\" viewBox=\"0 0 18 18\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n          <g transform=\"translate(-410.000000, -395.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n            <g transform=\"translate(121.000000, 380.000000)\">\n              <g id=\"information\" transform=\"translate(289.000000, 15.000000)\">\n                <path d=\"M9,0 C13.9626,0 18,4.03745455 18,9.00005455 C18,13.9626545 13.9626,18 9,18 C4.0374,18 0,13.9626545 0,9.00005455 C0,4.03745455 4.0374,0 9,0 Z M9,7.63636364 C8.54814545,7.63636364 8.18181818,8.00269091 8.18181818,8.45454545 L8.18181818,13.3636364 C8.18181818,13.8154909 8.54814545,14.1818182 9,14.1818182 C9.45185455,14.1818182 9.81818182,13.8154909 9.81818182,13.3636364 L9.81818182,8.45454545 C9.81818182,8.00269091 9.45185455,7.63636364 9,7.63636364 Z M8.99989091,3.81818182 C8.39847273,3.81818182 7.9092,4.30778182 7.9092,4.90958182 C7.9092,5.51083636 8.39847273,6 8.99989091,6 C9.60130909,6 10.0905818,5.51083636 10.0905818,4.90958182 C10.0905818,4.30778182 9.60130909,3.81818182 8.99989091,3.81818182 Z\"></path>\n              </g>\n            </g>\n          </g>\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport default InfoIcon\n","import React, { forwardRef, useEffect, useRef, useState } from 'react'\nimport tippy from 'tippy.js'\nimport { nextTick } from '../../../helpers/next-tick'\n\nimport IconInfo from '../../icons/info'\n\nimport './_index.scss'\n\ninterface InputOptions extends React.InputHTMLAttributes<any> {\n  theme?: 'default' | 'clean',\n  model?: any,\n  error?: any,\n  beforeInput?: Function\n}\n\nconst Input = forwardRef((props: InputOptions, ref: any) => {\n  if (!ref) {\n    ref = useRef()\n  }\n\n  const [inputProps, setInputProps] = useState<InputOptions>({\n    value: ''\n  })\n  const [localError, setLocalError] = useState(props.error)\n  const innerRef = useRef(null)\n  const iconError = React.useRef<HTMLInputElement>(null)\n  const classList = `input -component -theme-${props.theme || 'default'} ${props.error ? '-error' : ''}`\n\n  const focus = () => {\n    nextTick(() => {\n      innerRef.current && (innerRef.current as HTMLInputElement | null)?.focus()\n    })\n  }\n\n  const select = () => {\n    nextTick(() => {\n      innerRef.current && (innerRef.current as HTMLInputElement | null)?.select()\n    })\n  }\n\n  const onTooltipClick = (e: React.FormEvent) => {\n    e.preventDefault()\n    focus()\n  }\n\n  const onInput = (e: React.FormEvent) => {\n    if (props.beforeInput) {\n      props.beforeInput(e)\n    }\n\n    if (props.onInput) {\n      props.onInput(e)\n    }\n    setLocalError('')\n  }\n\n  const update = () => {\n    const obj = { ...props }\n    delete obj.beforeInput\n    setInputProps(obj)\n  }\n\n  useEffect(() => {\n    if (localError) {\n      if (iconError.current) {\n        tippy(iconError.current, {\n          placement: 'top-end',\n          content: localError\n        })\n      }\n    }\n  }, [localError])\n\n  useEffect(() => {\n    setLocalError(props.error)\n    update()\n  }, [])\n\n  useEffect(() => {\n    ref.current = { focus, select }\n  }, [ref])\n\n  useEffect(() => {\n    // inputProps = { ...props }\n    update()\n    // inputProps = inputProps\n  }, [props])\n\n  useEffect(() => {\n    setLocalError(props.error)\n  }, [props.error])\n\n  return (\n    <div className={classList}>\n      <div className=\"buttons\">\n        {localError\n          ? <div ref={iconError} className=\"icon-error\" onClick={e => onTooltipClick(e)}>\n          <IconInfo />\n        </div>\n          : null}\n      </div>\n      <input\n        {...inputProps}\n        ref={innerRef}\n        type={props.type || 'text'}\n        onInput={(e) => onInput(e)} />\n    </div>\n  )\n})\n\nInput.displayName = 'Input'\n\nexport default Input\n","import React from 'react'\n\nfunction EyeIcon () {\n  return (\n    <svg className=\"icon -eye\" width=\"18px\" height=\"12px\" viewBox=\"0 0 18 12\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-701.000000, -405.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n          <g transform=\"translate(701.000000, 405.000000)\">\n            <path d=\"M8.8000125,3.6 C7.476,3.6 6.4000125,4.6759875 6.4000125,6 C6.4000125,7.3240125 7.476,8.4 8.8000125,8.4 C10.124025,8.4 11.2000125,7.3240125 11.2000125,6 C11.2000125,4.6759875 10.1239875,3.6 8.8000125,3.6 Z\" id=\"Path\"></path>\n            <path d=\"M8.8000125,0 C4.8,0 1.3840125,2.487975 0,6 C1.3840125,9.5119875 4.8,12 8.8000125,12 C12.804,12 16.2160125,9.5119875 17.600025,6 C16.2160125,2.487975 12.804,0 8.8000125,0 Z M8.8000125,9.999975 C6.5920125,9.999975 4.8,8.2079625 4.8,5.9999625 C4.8,3.7919625 6.5920125,1.9999875 8.8000125,1.9999875 C11.0080125,1.9999875 12.800025,3.792 12.800025,6 C12.800025,8.208 11.0080125,9.999975 8.8000125,9.999975 Z\" id=\"Shape\"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  )\n}\n\nexport default EyeIcon\n","import React, { InputHTMLAttributes, useEffect, useState } from 'react'\nimport tippy from 'tippy.js'\nimport UIInput from '../../ui/input'\nimport IconEye from '../../icons/eye'\n\nimport './_index.scss'\n\ninterface ItemFieldProps extends InputHTMLAttributes<any> {\n  name?: string,\n  value?: any\n}\n\nfunction ItemField (props: ItemFieldProps) {\n  const [fieldType, setFieldType] = useState(props.type)\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false)\n  const id = Math.random().toFixed(10).slice(2)\n  const fieldRef = React.useRef()\n  let tooltip = null as any\n\n  const select = () => {\n    (fieldRef.current as any).focus();\n    (fieldRef.current as any).select()\n  }\n\n  const togglePasswordVisibility = () => {\n    if (isPasswordVisible) {\n      setIsPasswordVisible(false)\n      setFieldType('password')\n    } else {\n      setIsPasswordVisible(true)\n      setFieldType('text')\n    }\n  }\n\n  const copy = () => {\n    navigator.clipboard.writeText(props.value)\n    setTimeout(() => {\n      tooltip?.show()\n    }, 100)\n    setTimeout(() => {\n      tooltip?.hide()\n    }, 1600)\n  }\n\n  const onClick = (e: React.MouseEvent) => {\n    e.preventDefault()\n    select()\n    copy()\n  }\n\n  useEffect(() => {\n    tooltip = tippy(`#item_field_${id}`, {\n      trigger: 'manual',\n      content: 'Copied',\n      placement: 'left',\n      animation: 'perspective-subtle',\n      theme: 'small',\n      duration: 200\n    })\n    tooltip = tooltip[0]\n  }, [])\n\n  return (\n    <div className=\"component -item-field\">\n      <div className=\"flex column a-start\">\n        <div className=\"label\" onClick={onClick}>\n          {props.name}\n        </div>\n\n        <div className=\"field\">\n          <div className=\"icons\">\n            {props.name === 'password' && <div onClick={togglePasswordVisibility}>\n              <IconEye />\n            </div>}\n          </div>\n          <div id={`item_field_${id}`}>\n            <UIInput ref={fieldRef} {...props} type={fieldType} theme=\"clean\" onClick={onClick} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ItemField\n","import React, { useEffect, useState } from 'react'\n// import { useRouter } from 'react-router5'\nimport { toggleMasonryItem } from '../../store/app/events'\n\nimport { Item as ItemInterface } from '../../store/items/types'\n\nimport ItemField from '../ui/item-field'\n\nimport './_index.scss'\n\ninterface ItemProps {\n  data: ItemInterface,\n  mode?: 'compact' | 'full'\n}\n\nfunction Index ({ data, mode }: ItemProps) {\n  const [localMode, setLocalMode] = useState('compact')\n  const subtitle = data.username || data.url || data.note || ''\n  const title = data.name || subtitle\n  // const router = useRouter()\n\n  // const compactIfFull = () => {\n  //   if (localMode === 'full') {\n  //     console.log('compact')\n  //     setLocalMode('compact')\n  //   }\n  // }\n\n  const onClick = () => {\n    // router.navigate('item', { id: data._id })\n    localMode === 'full'\n      ? setLocalMode('compact')\n      : setLocalMode('full')\n\n    toggleMasonryItem()\n  }\n\n  useEffect(() => {\n    setLocalMode(mode as string)\n  }, [mode])\n\n  if (localMode === 'full') {\n    return (\n      <div className={`component -item -mode-${localMode}`}>\n        <div className=\"head flex a-start\" onClick={onClick}>\n          <div className=\"image\">\n            <img src=\"\" alt=\"\"/>\n          </div>\n          <div className=\"content\">\n            <div className=\"title\">{title}</div>\n            <div className=\"subtitle\">\n              {data.url\n                ? <a href={data.url} target=\"_blank\" rel=\"noreferrer\">{data.url}</a>\n                : <div>{subtitle}</div>}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"fields\">\n          {data.username && <ItemField name=\"username\" value={data.username} readOnly={true}/>}\n          {data.password && <ItemField name=\"password\" type=\"password\" value={data.password} readOnly={true}/>}\n          {data.note && <ItemField name=\"note\" value={data.note} readOnly={true}/>}\n        </div>\n      </div>\n    )\n  } else {\n    return (\n      <div className={`component -item -mode-${localMode}`} onClick={onClick}>\n        <div className=\"head flex a-start\">\n          <div className=\"image\">\n            <img src=\"\" alt=\"\"/>\n          </div>\n          <div className=\"content\">\n            <div className=\"title\">{title}</div>\n            <div className=\"subtitle\">{subtitle}</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Index\n","import React, { useEffect } from 'react'\n// @ts-ignore\nimport Masonry from 'masonry-layout'\nimport { useStore } from 'effector-react'\nimport { $items } from '../../store/items/store'\nimport { $app } from '../../store/app/store'\nimport { toggleMasonryItem, itemsFiltered } from '../../store/app/events'\nimport { getItems } from '../../store/items/events'\n\nimport Item from '../item'\n\nimport './_index.scss'\nimport { nextTick } from '../../helpers/next-tick'\n\ninterface ItemsProps {\n  searchQuery?: string\n}\n\nfunction Items (props: ItemsProps) {\n  const items = useStore($items)\n  let msnry = null as any\n\n  const list = () => {\n    let arr = items\n    if (props.searchQuery) {\n      arr = items.filter(item => {\n        const str = `${item.name} ${item.url} ${item.username} ${item.note}`\n        return str.includes(props.searchQuery as string)\n      })\n    }\n    return arr.map(item => {\n      return <Item data={item} mode={arr.length < 3 ? 'full' : 'compact'} key={item._id} />\n    })\n  }\n\n  const createMasonry = () => {\n    const gridElement = document.querySelector('.-item-list .grid')\n    if (!gridElement) {\n      return\n    }\n    msnry = new Masonry(gridElement, {\n      itemSelector: '.-item',\n      columnWidth: 330,\n      gutter: 20\n    })\n    msnry.appended(gridElement)\n    nextTick(() => {\n      msnry.reloadItems()\n      msnry.layout()\n    })\n  }\n\n  const updateMasonry = () => {\n    nextTick(() => {\n      msnry && msnry.reloadItems()\n      msnry && msnry.layout()\n    })\n  }\n\n  const reinitMasonry = () => {\n    msnry && msnry.destroy()\n    createMasonry()\n  }\n\n  const onMounted = async () => {\n    await getItems()\n    createMasonry()\n  }\n\n  const onToggleMasonryItem = (state: any) => {\n    updateMasonry()\n    return state\n  }\n\n  useEffect(() => {\n    onMounted()\n\n    $app.on(itemsFiltered, reinitMasonry)\n    $app.on(toggleMasonryItem, onToggleMasonryItem)\n    return () => {\n      $app.off(itemsFiltered)\n      $app.off(toggleMasonryItem)\n    }\n  }, [])\n\n  useEffect(() => {\n    updateMasonry()\n  }, [list, props])\n\n  return (\n    <div className=\"component -item-list\">\n      <div className=\"grid\">\n        {list()}\n      </div>\n    </div>\n  )\n}\n\nexport default Items\n","import React from 'react'\n\nfunction SearchIcon () {\n  return (\n    <svg className=\"icon -search\" width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n        <g transform=\"translate(-421.000000, -181.000000)\" fill=\"currentColor\" fillRule=\"nonzero\">\n          <g transform=\"translate(421.000000, 180.000000)\">\n            <g transform=\"translate(-0.000000, 1.000000)\">\n              <path d=\"M15.2124425,14.5734649 L11.4044167,10.612927 C12.383527,9.44900467 12.9199874,7.98455219 12.9199874,6.45999368 C12.9199874,2.89800934 10.021978,0 6.45999368,0 C2.89800934,0 0,2.89800934 0,6.45999368 C0,10.021978 2.89800934,12.9199874 6.45999368,12.9199874 C7.79721237,12.9199874 9.07151634,12.5166591 10.1610083,11.7510094 L13.9979637,15.7416003 C14.1583401,15.9081557 14.3740477,16 14.6052031,16 C14.8240003,16 15.0315627,15.9165818 15.1891304,15.7649124 C15.5239266,15.4427553 15.5345996,14.9085419 15.2124425,14.5734649 Z M6.45999368,1.68521574 C9.09286241,1.68521574 11.2347716,3.82712495 11.2347716,6.45999368 C11.2347716,9.09286241 9.09286241,11.2347716 6.45999368,11.2347716 C3.82712495,11.2347716 1.68521574,9.09286241 1.68521574,6.45999368 C1.68521574,3.82712495 3.82712495,1.68521574 6.45999368,1.68521574 Z\" id=\"Shape\"></path>\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  )\n}\n\nexport default SearchIcon\n","import React from 'react'\n\nfunction CrossIcon () {\n  return (\n    <svg className=\"icon -cross\" width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path d=\"M6 0C2.7 0 0 2.7 0 6C0 9.3 2.7 12 6 12C9.3 12 12 9.3 12 6C12 2.7 9.3 0 6 0ZM8.625 7.575L7.575 8.625L6 7.05L4.425 8.625L3.375 7.575L4.95 6L3.375 4.425L4.425 3.375L6 4.95L7.575 3.375L8.625 4.425L7.05 6L8.625 7.575Z\" fill=\"currentColor\"/>\n    </svg>\n  )\n}\n\nexport default CrossIcon\n","import React, { forwardRef, useEffect, useRef, useState } from 'react'\nimport { nextTick } from '../../helpers/next-tick'\nimport { itemsFiltered } from '../../store/app/events'\n\nimport UIInput from '../ui/input'\nimport IconSearch from '../icons/search'\nimport IconCross from '../icons/cross'\n\nimport './_index.scss'\n\ninterface SearchBarOptions {\n  onChange?: Function\n}\n\nconst SearchBar = forwardRef((props: SearchBarOptions, ref: any) => {\n  const delay = 300\n  const [_timeout, _setTimeout] = useState<any>(null)\n  const [query, setQuery] = useState('')\n  const innerRef = useRef(null)\n\n  const filterItems = () => {\n    if (props.onChange) {\n      props.onChange(query)\n      itemsFiltered()\n    }\n  }\n\n  const clear = () => {\n    setQuery('')\n    nextTick(() => {\n      (innerRef.current as any)?.focus()\n    })\n  }\n\n  const onKeyUp = (e: React.KeyboardEvent) => {\n    let watchFocus = true\n    let target = document.activeElement\n    while (target) {\n      if (target.classList.contains('-search-bar')) {\n        watchFocus = false\n        target = null\n        return\n      }\n      target = target.parentElement\n    }\n\n    if (watchFocus && /\\w/.test(e.key) && e.key.length === 1) {\n      if (!query.length) {\n        setQuery(e.key)\n      }\n      nextTick(() => {\n        (innerRef.current as any)?.focus()\n      })\n    }\n  }\n\n  const onFieldKeyUp = (e: React.KeyboardEvent) => {\n    if (e.keyCode === 27) { // escape\n      setQuery('')\n    }\n  }\n\n  useEffect(() => {\n    clearTimeout(_timeout)\n    _setTimeout(null)\n\n    query\n      ? _setTimeout(setTimeout(filterItems, delay))\n      : filterItems()\n  }, [query])\n\n  useEffect(() => {\n    ref.current = {\n      focus: (innerRef.current as any)?.focus\n    }\n  }, [ref])\n\n  useEffect(() => {\n    // @ts-ignore\n    document.addEventListener('keyup', onKeyUp)\n    const field = document.querySelector('.component.-search-bar input') as HTMLElement\n    // @ts-ignore\n    field.addEventListener('keyup', onFieldKeyUp)\n    return () => {\n      // @ts-ignore\n      document.removeEventListener('keyup', onKeyUp)\n      // @ts-ignore\n      field.removeEventListener('keyup', onFieldKeyUp)\n    }\n  }, [])\n\n  return (\n    <div className=\"component -search-bar\">\n      <div className=\"icon-parent flex center\">\n        {query\n          ? <div className=\"clear flex center\" onClick={clear}>\n            <IconCross />\n          </div>\n          : <IconSearch/>}\n      </div>\n\n      <UIInput\n        ref={innerRef}\n        value={query}\n        theme=\"clean\"\n        placeholder=\"Start typing to search...\"\n        onInput={(e: React.ChangeEvent<HTMLInputElement>) => setQuery(e.target.value)} />\n    </div>\n  )\n})\n\nSearchBar.displayName = 'SearchBar'\n\nexport default SearchBar\n","import React, { useEffect, useState } from 'react'\nimport { nextTick } from '../helpers/next-tick'\n\nimport Items from '../components/items'\nimport SearchBar from '../components/search-bar'\n\nfunction HomePage () {\n  const [searchQuery, setSearchQuery] = useState('')\n  const searchField = React.createRef()\n\n  useEffect(() => {\n    nextTick(() => {\n      (searchField.current as any)?.focus()\n    })\n    return () => {}\n  }, [])\n\n  return (\n    <div className=\"page -home\">\n      <div>\n        <div className=\"flex a-center j-between\">\n          <div>\n            <SearchBar ref={searchField} onChange={(query: string) => setSearchQuery(query)} />\n          </div>\n          <div>sort by: default</div>\n        </div>\n\n        <div>\n          <Items searchQuery={searchQuery} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default HomePage\n","import React from 'react'\nimport { useRouter } from 'react-router5'\nimport { $auth } from '../store/auth/store'\nimport { logout as sendLogoutRequest } from '../store/auth/events'\nimport { useStore } from 'effector-react'\n\nfunction ProfilePage () {\n  const router = useRouter()\n  const user = useStore($auth).user\n\n  const logout = async () => {\n    await sendLogoutRequest()\n    router.navigate('auth')\n  }\n\n  if (user) {\n    return (\n      <div className=\"page -profile\">\n        <div>ProfilePage</div>\n        <div className=\"flex a-center\">\n          <div>name</div>\n          <input type=\"text\" value={user.username} readOnly />\n        </div>\n        <div className=\"flex a-center\">\n          <div>hasSecurityCode</div>\n          <input type=\"checkbox\" checked={user.hasSecurityCode} readOnly />\n        </div>\n        <div>\n          <button onClick={logout}>logout</button>\n        </div>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default ProfilePage\n","import React, { useEffect, useState } from 'react'\nimport { useRouter } from 'react-router5'\nimport { checkUserSecurityCode, login as sendLoginRequest } from '../../../store/auth/events'\nimport { nextTick } from '../../../helpers/next-tick'\n\nimport UIInput from '../../ui/input'\nimport UIButton from '../../ui/button'\n\nimport './_index.scss'\n\ninterface LoginFormOptions {\n  onRegisterShow?: () => void\n}\n\nfunction Index ({ onRegisterShow }: LoginFormOptions) {\n  const [loginUsername, setLoginUsername] = useState('')\n  const [loginPassword, setLoginPassword] = useState('')\n  const [usernameError, setUsernameError] = useState('')\n  const [passwordError, setPasswordError] = useState('')\n\n  const router = useRouter()\n\n  const usernameField = React.createRef()\n  const passwordField = React.createRef()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const login = async () => {\n    setIsLoading(true)\n    const successResponse = await sendLoginRequest({\n      username: loginUsername,\n      password: loginPassword\n    }).then(() => true)\n      .catch(() => {\n        (passwordField.current as any).focus();\n        (passwordField.current as any).select()\n        setPasswordError('Failed to sign in')\n        return false\n      })\n\n    setIsLoading(false)\n\n    if (successResponse) {\n      await router.navigate('home')\n      checkUserSecurityCode()\n    }\n  }\n\n  const validateForm = () => {\n    const res = []\n\n    if (!loginUsername.length) {\n      res.push({\n        field: 'username',\n        message: 'This field is required'\n      });\n      (usernameField.current as any).focus()\n      return res\n    }\n    if (!loginPassword.length) {\n      res.push({\n        field: 'password',\n        message: 'This field is required'\n      })\n      if (loginUsername.length) {\n        (passwordField.current as any).focus()\n      }\n    }\n\n    return res\n  }\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    const errorsFound = validateForm()\n\n    if (errorsFound.length) {\n      errorsFound.forEach(error => {\n        switch (error.field) {\n          case 'username':\n            setUsernameError(error.message)\n            break\n          case 'password':\n            setPasswordError(error.message)\n            break\n        }\n      })\n      console.log({\n        username: loginUsername,\n        password: loginPassword\n      })\n      return\n    }\n\n    login()\n  }\n\n  const goToRegister = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (onRegisterShow) {\n      onRegisterShow()\n    }\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      (usernameField.current as any).focus()\n    })\n  }, [])\n\n  return (\n    <div className=\"component -login-form\">\n      <form onSubmit={onSubmit}>\n        <div>\n          <UIInput\n            ref={usernameField}\n            placeholder=\"Username\"\n            value={loginUsername}\n            error={usernameError}\n            onInput={() => setUsernameError('')}\n            onChange={e => setLoginUsername(e.target.value)}\n            onBlur={e => !e.target.value.length ? setUsernameError('') : null } />\n        </div>\n        <div>\n          <UIInput\n            ref={passwordField}\n            type=\"password\"\n            placeholder=\"Password\"\n            value={loginPassword}\n            error={passwordError}\n            onInput={() => setPasswordError('')}\n            onChange={e => setLoginPassword(e.target.value)}\n            onBlur={e => !e.target.value.length ? setPasswordError('') : null } />\n        </div>\n\n        <div className=\"button-block\">\n          <UIButton type=\"submit\" loading={isLoading} fullWidth={true}>Sign in</UIButton>\n        </div>\n        <div>\n          <span>or </span>\n          <a href=\"#\" onClick={goToRegister}>create new account</a>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default Index\n","import React, { useEffect, useState } from 'react'\nimport { useRouter } from 'react-router5'\nimport { Api } from '../../react-app-env'\nimport {\n  checkUserSecurityCode,\n  register as sendRegisterRequest\n} from '../../store/auth/events'\nimport { nextTick } from '../../helpers/next-tick'\n\nimport UIInput from '../ui/input'\nimport UIButton from '../ui/button'\n\ninterface RegisterFormOptions {\n  onLoginShow?: () => void\n}\n\nfunction RegisterForm ({ onLoginShow }: RegisterFormOptions) {\n  const router = useRouter()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [usernameError, setUsernameError] = useState('')\n  const [passwordError, setPasswordError] = useState('')\n  const [isLoading, setIsLoading] = useState(false)\n  const passwordField = React.createRef()\n  const usernameField = React.createRef()\n\n  const register = async () => {\n    setIsLoading(true)\n    const successResponse = await sendRegisterRequest({\n      username: username,\n      password: password\n    }).then(() => true)\n      .catch((err: Api.Error) => {\n        (usernameField.current as any).focus();\n        (usernameField.current as any).select()\n        setUsernameError(err.response?.data.message)\n        return false\n      })\n\n    setIsLoading(false)\n\n    if (successResponse) {\n      await router.navigate('home')\n      checkUserSecurityCode()\n    }\n  }\n\n  const goToLogin = (e: React.FormEvent) => {\n    e.preventDefault()\n    if (onLoginShow) {\n      onLoginShow()\n    }\n  }\n\n  const validateForm = () => {\n    const res = []\n\n    if (!username.length) {\n      res.push({\n        field: 'username',\n        message: 'This field is required'\n      });\n      (usernameField.current as any).focus()\n      return res\n    }\n    if (!password.length) {\n      res.push({\n        field: 'password',\n        message: 'This field is required'\n      })\n      if (username.length) {\n        (passwordField.current as any).focus()\n      }\n    }\n\n    return res\n  }\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    const errorsFound = validateForm()\n\n    if (errorsFound.length) {\n      errorsFound.forEach(error => {\n        switch (error.field) {\n          case 'username':\n            setUsernameError(error.message)\n            break\n          case 'password':\n            setPasswordError(error.message)\n            break\n        }\n      })\n      console.log({\n        username: username,\n        password: password\n      })\n      return\n    }\n\n    register()\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      (usernameField.current as any).focus()\n    })\n  }, [])\n\n  return (\n    <div className=\"component -register-form\">\n      <form onSubmit={onSubmit}>\n        <div>\n          <UIInput\n            ref={usernameField}\n            placeholder=\"Username\"\n            value={username}\n            error={usernameError}\n            onInput={() => setUsernameError('')}\n            onChange={e => setUsername(e.target.value)}\n            onBlur={e => !e.target.value.length ? setUsernameError('') : null } />\n        </div>\n        <div>\n          <UIInput\n            ref={passwordField}\n            type=\"password\"\n            placeholder=\"Password\"\n            value={password}\n            error={passwordError}\n            onInput={() => setPasswordError('')}\n            onChange={e => setPassword(e.target.value)}\n            onBlur={e => !e.target.value.length ? setPasswordError('') : null } />\n        </div>\n\n        <div className=\"button-block\">\n          <UIButton type=\"submit\" loading={isLoading} fullWidth={true}>Sign up</UIButton>\n        </div>\n        <div>\n          <span>or </span>\n          <a href=\"#\" onClick={goToLogin}>return to login</a>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default RegisterForm\n","import React, { useState } from 'react'\n\nimport LoginForm from '../../components/auth/login-form'\nimport RegisterForm from '../../components/auth/register-form'\n\nimport './_index.scss'\n\nfunction AuthPage () {\n  const [mode, setMode] = useState('login')\n\n  return (\n    <div className=\"page -auth\">\n      <h1>\n        {mode === 'register'\n          ? <span>Let&apos;s create a new account:</span>\n          : <span>Hi, I&apos;m your password manager.</span> }\n      </h1>\n\n      <div className=\"container -narrow\">\n        {mode === 'register'\n          ? <RegisterForm onLoginShow={() => setMode('login')} />\n          : <LoginForm onRegisterShow={() => setMode('register')} /> }\n      </div>\n    </div>\n  )\n}\n\nexport default AuthPage\n","import React, { useEffect, useState } from 'react'\nimport { useStore } from 'effector-react'\nimport { useRouter } from 'react-router5'\nimport { nextTick } from '../../helpers/next-tick'\nimport { unlock } from '../../store/locker/events'\nimport { logout as _logout } from '../../store/auth/events'\nimport { $auth } from '../../store/auth/store'\n\nimport UIInput from '../../components/ui/input'\nimport UIButton from '../../components/ui/button'\n\nimport './_index.scss'\n\nfunction UnlockPage () {\n  const [_loading, _setLoading] = useState(false)\n  const [code, setCode] = useState('')\n  const [codeFieldError, setCodeFieldError] = useState('')\n  const user = useStore($auth).user\n  const router = useRouter()\n  const codeField = React.createRef()\n\n  const logout = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await _logout()\n    router.navigate('auth')\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n\n    if (!code.length) {\n      setCodeFieldError('This field is required')\n      nextTick(() => {\n        (codeField.current as any)?.focus()\n      })\n      return\n    }\n\n    _setLoading(true)\n    await unlock(code).catch(e => {\n      setCodeFieldError('')\n      setCodeFieldError(e.response.data.message)\n      nextTick(() => {\n        (codeField.current as any)?.focus()\n      })\n    })\n\n    _setLoading(false)\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      (codeField.current as any)?.focus()\n    })\n    return () => {}\n  }, [])\n\n  return (\n    <div className=\"page -unlock\">\n      <h1>App is locked!</h1>\n\n      <div className=\"flex column center\">\n        <div>Enter your security code to unlock the app:</div>\n\n        <form className=\"flex column\" onSubmit={onSubmit}>\n          <div>\n            <UIInput ref={codeField} type=\"password\" error={codeFieldError} placeholder=\"your_security_code\" value={code} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n          </div>\n          <div>\n            <UIButton type=\"submit\" loading={_loading} fullWidth={true}>Unlock</UIButton>\n          </div>\n        </form>\n\n        <div className=\"bottom flex a-center\">\n          <div>You signed as&nbsp;</div>\n          <div className=\"name\">{user?.username}</div>\n          <div>.&nbsp;</div>\n          <a href=\"#\" onClick={logout}>logout</a>\n          <div>.</div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default UnlockPage\n","/**\n * is all fields empty helper\n * @param data {object}\n * @param exclude {array}\n * @returns {boolean}\n */\nexport const isAllFieldsEmpty = (data: object, exclude: string[] = []) => {\n  let isFilled = false\n  Object.entries(data).every(pair => {\n    if (exclude.includes(pair[0])) {\n      return true\n    }\n    if (pair[1]) {\n      isFilled = true\n      return false\n    }\n    return true\n  })\n  return !isFilled\n}\n\nexport default {\n  isAllFieldsEmpty\n}\n","import React, { useState } from 'react'\nimport { useRoute } from 'react-router5'\nimport { createItem } from '../store/items/events'\nimport { isAllFieldsEmpty } from '../helpers/validator'\n\nfunction AddItemPage () {\n  const { router } = useRoute()\n  const [name, setName] = useState('')\n  const [url, setUrl] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [note, setNote] = useState('')\n\n  const create = async (e: React.FormEvent) => {\n    e.preventDefault()\n    const item = {\n      group: null,\n      name,\n      url,\n      username,\n      password,\n      note\n    }\n\n    if (isAllFieldsEmpty(item, ['group'])) {\n      alert('Cannot save empty item.')\n    } else {\n      const res = await createItem(item)\n      router.navigate('item', { id: res._id })\n    }\n  }\n\n  return (\n    <div className=\"Page Home\">\n      <div>Add newItem:</div>\n      <form onSubmit={create}>\n        <div>\n          <div>name</div>\n          <input type=\"text\" name=\"name\" value={name} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}/>\n        </div>\n        <div>\n          <div>url</div>\n          <input type=\"text\" name=\"url\" value={url} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUrl(e.target.value)}/>\n        </div>\n        <div>\n          <div>username</div>\n          <input type=\"text\" name=\"username\" value={username} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setUsername(e.target.value)}/>\n        </div>\n        <div>\n          <div>password</div>\n          <input type=\"text\" name=\"password\" value={password} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setPassword(e.target.value)}/>\n        </div>\n        <div>\n          <div>note</div>\n          <textarea name=\"note\" value={note} onInput={(e: React.ChangeEvent<HTMLTextAreaElement>) => setNote(e.target.value)}/>\n        </div>\n        <div>\n          <button type=\"submit\">create</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default AddItemPage\n","import React, { useEffect, useState } from 'react'\nimport { useRoute } from 'react-router5'\nimport { getItem } from '../store/items/events'\nimport { Item } from '../store/items/types'\n\nfunction ItemPage () {\n  // @ts-ignore // null as initial state\n  const [data, setData] = useState<Item>(null)\n  const { route, router } = useRoute()\n\n  useEffect(() => {\n    async function _getData () {\n      getItem(route.params.id).then(res => {\n        setData(res)\n      }).catch(() => router.navigate('home'))\n    }\n    _getData()\n    return () => {}\n  }, [route.params.id])\n\n  return (\n    <div className=\"Page Profile\">\n      <div>ItemPage</div>\n      { data\n        ? <div>\n          <div>\n            <div>name</div>\n            <input type=\"text\" value={data.name} readOnly />\n          </div>\n          <div>\n            <div>url</div>\n            <input type=\"text\" value={data.url} readOnly />\n          </div>\n          <div>\n            <div>username</div>\n            <input type=\"text\" value={data.username} readOnly />\n          </div>\n          <div>\n            <div>password</div>\n            <input type=\"text\" value={data.password} readOnly />\n          </div>\n          <div>\n            <div>note</div>\n            <textarea value={data.note} readOnly />\n          </div>\n        </div>\n        : null }\n    </div>\n  )\n}\n\nexport default ItemPage\n","import React from 'react'\n\nfunction NotFound () {\n  return (\n    <div className=\"page -not-found\">\n      <div>404</div>\n    </div>\n  )\n}\n\nexport default NotFound\n","import React from 'react'\nimport RoundLoader from '../round'\n\nimport './_index.scss'\n\nfunction Loader () {\n  return (\n    <div className=\"component -page-loader flex center\">\n      <RoundLoader />\n    </div>\n  )\n}\n\nexport default Loader\n","import { createStore } from 'effector'\nimport { closeAllModals, closeLastModal, closeModal, openModal } from './events'\nimport { State } from './types'\n\nconst initialState: State = []\n\nexport const $modals = createStore<State>(initialState)\n  .on(openModal, (state, id) => {\n    const set = new Set([...state, ...[id]])\n    state = Array.from(set) as State\n    return state\n  })\n  .on(closeModal, (state, id) => {\n    state = state.filter((i) => i !== id)\n    return state\n  })\n  .on(closeLastModal, state => {\n    state = state.slice(0, 1)\n    return state\n  })\n  .on(closeAllModals, () => [])\n\nexport default $modals\n","import React, { useEffect, useState } from 'react'\nimport { useStore } from 'effector-react'\nimport { $modals } from '../../../store/modals/store'\nimport { closeModal } from '../../../store/modals/events'\nimport { ModalName } from '../../../store/modals/types'\nimport CrossIcon from '../../icons/cross'\nimport PropTypes from 'prop-types'\n\nimport './_index.scss'\n\ninterface ModalWrapperProps {\n  id: ModalName,\n  children?: any,\n  closable?: boolean,\n  heading?: any,\n  size?: 'default' | 'auto',\n  onOpen?: Function,\n  onClose?: Function\n}\n\nfunction ModalWrapper (props: ModalWrapperProps) {\n  if (props.closable === undefined) {\n    props.closable = true\n  }\n\n  const [_mounted, _setMounted] = useState(false)\n  const modals = useStore($modals)\n  const [show, setShow] = useState(false)\n  const classList = `component modal -${props.id} -size-${props.size || 'default'}`\n\n  useEffect(() => {\n    _setMounted(true)\n  }, [])\n\n  useEffect(() => {\n    const unwatch = $modals.watch(modals => {\n      setShow(modals.includes(props.id))\n    })\n    return () => {\n      unwatch()\n    }\n  }, [modals])\n\n  useEffect(() => {\n    if (_mounted) {\n      if (show && props.onOpen) {\n        props.onOpen()\n      }\n      if (!show && props.onClose) {\n        props.onClose()\n      }\n    }\n  }, [show])\n\n  const close = () => {\n    if (props.closable) {\n      closeModal(props.id)\n    }\n  }\n\n  const onParentClick = (e: React.MouseEvent) => {\n    const target = e.target as Element\n    if (target.classList.contains('Modal') && target.classList.contains('Component')) {\n      close()\n    }\n  }\n\n  if (show) {\n    return (\n      <div className={classList} onClick={onParentClick}>\n        <dialog open className=\"dialog\">\n          {props.closable && <div className=\"close\" onClick={close}>\n            <CrossIcon/>\n          </div>}\n          <div className=\"head\">\n            <div className=\"h2 flex center\">{props.heading}</div>\n          </div>\n          <div className=\"body\">{props.children}</div>\n        </dialog>\n      </div>\n    )\n  } else {\n    return null\n  }\n}\n\nModalWrapper.propTypes = {\n  id: PropTypes.string,\n  children: PropTypes.any,\n  closable: PropTypes.bool,\n  heading: PropTypes.any\n}\n\nexport default ModalWrapper\n","import React, { useEffect, useState } from 'react'\nimport ModalWrapper from './wrapper'\nimport { logout, setUserSecurityCode } from '../../store/auth/events'\nimport { closeModal } from '../../store/modals/events'\nimport { nextTick } from '../../helpers/next-tick'\n\nfunction SetSecurityCodeModal () {\n  const id = 'set_security_code'\n  const [code, setCode] = useState('')\n\n  let codeField = null as HTMLInputElement | null\n  const setCodeFieldRef = (element: HTMLInputElement) => {\n    codeField = element\n  }\n\n  const _logout = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await logout()\n    closeModal(id)\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    await setUserSecurityCode(code)\n  }\n\n  useEffect(() => {\n    nextTick(() => {\n      codeField?.focus()\n    })\n  }, [codeField])\n\n  return (\n    <ModalWrapper id={id} closable={false}>\n      <form onSubmit={onSubmit}>\n        <div>Set your security code:</div>\n        <div>\n          <input type=\"text\" ref={setCodeFieldRef} value={code} onInput={(e: React.ChangeEvent<HTMLInputElement>) => setCode(e.target.value)} />\n        </div>\n        <div>\n          <button type=\"submit\">Set</button>\n        </div>\n        <div>Do not forget your secret code!</div>\n      </form>\n\n      <div>\n        <a href=\"#\" onClick={_logout}>logout</a>\n      </div>\n    </ModalWrapper>\n  )\n}\n\nexport default SetSecurityCodeModal\n","import React, { useEffect, useState } from 'react'\nimport { $modals } from '../../../store/modals/store'\n\nimport SetSecurityCodeModal from '../set-security-code'\n\nimport './_index.scss'\n\nfunction ModalController () {\n  const [show, setShow] = useState(false)\n\n  useEffect(() => {\n    const unwatch = $modals.watch(modals => {\n      setShow(!!modals.length)\n    })\n    return () => {\n      unwatch()\n    }\n  })\n\n  return (\n    <div className={`Modal Controller ${show ? '-active' : ''}`}>\n      <SetSecurityCodeModal />\n    </div>\n  )\n}\n\nexport default ModalController\n","import React, { useEffect } from 'react'\nimport { useRoute } from 'react-router5'\nimport { useStore } from 'effector-react'\nimport { setMounted } from './store/app/events'\nimport { checkUserSecurityCode } from './store/auth/events'\nimport { $locker } from './store/locker/store'\nimport { checkIsAppLocked } from './store/locker/events'\n\n// layouts\nimport DefaultLayout from './layouts/default'\nimport SimpleLayout from './layouts/simple'\n\n// App pages\nimport HomePage from './pages/home'\nimport ProfilePage from './pages/profile'\nimport AuthPage from './pages/auth'\nimport UnlockPage from './pages/unlock'\nimport AddItemPage from './pages/add-item'\nimport ItemPage from './pages/item'\nimport NotFound from './pages/not-found'\n\n// Layout components\nimport Loader from './components/loader/page-loader'\nimport ModalController from './components/modals/controller'\n\nfunction App () {\n  const { route } = useRoute()\n  const locker = useStore($locker)\n\n  useEffect(() => {\n    const unwatchMounted = setMounted.watch(mounted => {\n      if (mounted) {\n        /**\n         * app mounted after loader\n         */\n        checkUserSecurityCode()\n      }\n    })\n    return () => {\n      unwatchMounted()\n    }\n  }, [])\n\n  useEffect(() => {\n    checkIsAppLocked()\n  }, [locker])\n\n  function Switch () {\n    switch (route.name) {\n      case 'home':\n        return <DefaultLayout><HomePage /></DefaultLayout>\n      case 'auth':\n        return <SimpleLayout><AuthPage /></SimpleLayout>\n      case 'unlock':\n        return <SimpleLayout><UnlockPage /></SimpleLayout>\n      case 'profile':\n        return <DefaultLayout><ProfilePage /></DefaultLayout>\n      case 'add':\n        return <DefaultLayout><AddItemPage /></DefaultLayout>\n      case 'item':\n        return <DefaultLayout><ItemPage /></DefaultLayout>\n      default:\n        return <SimpleLayout><NotFound /></SimpleLayout>\n    }\n  }\n\n  if (route) {\n    return (\n      <div className=\"app\">\n        <Switch />\n        <ModalController />\n      </div>\n    )\n  } else {\n    return (\n      <Loader />\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { RouterProvider } from 'react-router5'\nimport { configureRouter as createRouter } from './router'\nimport { setMounted } from './store/app/events'\n// import reportWebVitals from './report-web-vitals'\n\nimport App from './app'\n\nimport './assets/scss/index.scss'\n\nexport const router = createRouter()\n\nReactDOM.render(\n  <RouterProvider router={router}>\n    <App />\n  </RouterProvider>,\n  document.getElementById('root')\n)\n\nrouter.start(() => {\n  setMounted(true)\n})\n\n// If you want to start measuring performance in your app, pass a function.\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals(console.log)\n"],"sourceRoot":""}